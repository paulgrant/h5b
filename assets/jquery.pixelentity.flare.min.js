(function(e){function t(t){var n=t||window.event,r=[].slice.call(arguments,1),i=0,s=true,o=0,u=0;t=e.event.fix(n);t.type="mousewheel";if(n.wheelDelta){i=n.wheelDelta/120}if(n.detail){i=-n.detail/3}u=i;if(n.axis!==undefined&&n.axis===n.HORIZONTAL_AXIS){u=0;o=-1*i}if(n.wheelDeltaY!==undefined){u=n.wheelDeltaY/120}if(n.wheelDeltaX!==undefined){o=-1*n.wheelDeltaX/120}r.unshift(t,i,o,u);return(e.event.dispatch||e.event.handle).apply(this,r)}var n=["DOMMouseScroll","mousewheel"];if(e.event.fixHooks){for(var r=n.length;r;){e.event.fixHooks[n[--r]]=e.event.mouseHooks}}e.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var e=n.length;e;){this.addEventListener(n[--e],t,false)}}else{this.onmousewheel=t}},teardown:function(){if(this.removeEventListener){for(var e=n.length;e;){this.removeEventListener(n[--e],t,false)}}else{this.onmousewheel=null}}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})})(jQuery);String.prototype.format=function(){var e=this;for(var t=0;t<arguments.length;t++){var n=new RegExp("%"+t,"gi");e=e.replace(n,arguments[t])}return e};(function(e){e.pixelentity=e.pixelentity||{version:"1.0.0"};var t=navigator.userAgent.toLowerCase();var n=t.match(/(iphone|ipod|ipad)/)!==null;var r=!n&&t.match(/android ([^;]+)/);if(r){r=r[1].split(/\./);r=parseFloat(r.shift()+"."+r.join(""))}else{r=false}var i=n||r||t.match(/(android|blackberry|webOS|opera mobi)/)!==null;e.pixelentity.browser={iDev:n,android:r,mobile:i}})(jQuery);(function(e){e.pixelentity=e.pixelentity||{version:"1.0.0"};e.pixelentity.Geom={getScaler:function(e,t,n,r,i,s,o){var u={};var a=r/s;var f=i/o;var l;if(typeof e=="string"){switch(e){case"fill":case"fillmax":l=a>f?a:f;if(e=="fill"){l=Math.min(1,l)}break;case"fit":case"fitmax":l=a<f?a:f;if(e=="fit"){l=Math.min(1,l)}break;case"none":l=1;break}}else{l=e}u.ratio=l;u.diff={};u.offset={};u.align={w:t,h:n};var c=u.diff;var h=u.offset;c.w=h.w=r-s*l;c.h=h.h=i-o*l;switch(t){case"center":h.w=c.w/2;break;case"left":h.w=0;break}switch(n){case"center":h.h=c.h/2;break;case"top":h.h=0;break}return u},splitProps:function(e,t){var n=e.split(/,/);return t?{h:parseFloat(n[0]),w:parseFloat(n[1])}:{h:n[0],w:n[1]}}}})(jQuery);(function(e){function t(n){var r=e(n.currentTarget);var i;while(r.data("peUtilsLoader")&&(i=r.data("peUtilsLoader").shift())){if(--i.total<=0){var s=i.callback;var o=i.target;r.unbind("load error",t);s(o)}}}e.pixelentity=e.pixelentity||{version:"1.0.0"};if(e.pixelentity.preloader){return}var n=e.pixelentity.preloader={load:function(n,r,i){n=n instanceof jQuery?n:e(n);var s=n[0].tagName.toLowerCase()=="img"?[n[0]]:n.find("img").get();var o;var u=[];var a;while(o=s.shift()){a=o.complete;if(!(o.src&&a&&!(o.src.match(/blank.png$/i)!==null&&o.getAttribute("data-src")))){u.push(o)}}if(u.length>0){var f={target:n,callback:r,total:u.length};while(o=u.shift()){o=e(o);if(!i&&e.browser.msie&&o[0].src.match(/blank.png$/i)!==null){o.removeAttr("src");o.replaceWith(o.clone());if(!o.attr("data-src")){f.total--}}if(o.data("peUtilsLoader")){o.data("peUtilsLoader").push(f)}else{o.data("peUtilsLoader",[f])}o.one("load error",t);if(o.attr("data-src")){o.attr("src",o.attr("data-src"));o.removeAttr("data-src")}else{if(e.browser.msie){o.attr("src",o.attr("src"))}}o=undefined}}else{r(n)}}}})(jQuery);(function(e){var t=(new Image).style,n="ransition",r,i;i=e.support.csstransitions=(r="t"+n)in t&&r||(r="webkitT"+n)in t&&r||(r="MozT"+n)in t&&r||(r="OT"+n)in t&&r||(r="MST"+n)in t&&r||false;e.support.csstransitionsEnd=i=="MozTransition"&&"transitionend"||i=="OTransition"&&"oTransitionEnd"||i&&i+"End"})(jQuery);(function(e){function t(){for(var e=0;e<s.length;e++){s[e](i)}}function n(){if(r){return}r=true;var e=document.createElement("script");e.src="http://www.youtube.com/player_api";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n);window.onYouTubePlayerAPIReady=function(){i=YT.Player;t()}}e.pixelentity=e.pixelentity||{version:"1.0.0"};if(e.pixelentity.youtube){return}var r=false;var i=window.YT&&window.YT.Player;var s=[];e.pixelentity.youtube=function(e){if(i){e(i)}else{s.push(e);n()}}})(jQuery);var Froogaloop=function(){function e(t){return new e.fn.init(t)}function t(e,t,n){if(!n||!n.contetWindow||!n.contentWindow.postMessage){return false}var r=n.getAttribute("src").split("?")[0],i=JSON.stringify({method:e,value:t});n.contentWindow.postMessage(i,r)}function n(e){if(e.origin!=playerDomain){return false}var t=JSON.parse(e.data),n=t.value,r=t.event||t.method,s=t.data,o=o==""?null:t.player_id,u=i(r,o),a=[];if(!u){return false}if(n!==undefined){a.push(n)}if(s){a.push(s)}if(o){a.push(o)}return a.length>0?u.apply(null,a):u.call()}function r(e,t,n){if(n){if(!f[n]){f[n]={}}f[n][e]=t}else{f[e]=t}}function i(e,t){if(t){return f[t][e]}else{return f[e]}}function s(e,t){if(t&&f[t]){if(!f[t][e]){return false}f[t][e]=null}else{if(!f[e]){return false}f[e]=null}return true}function o(e){var t=e.split("/"),n="";for(var r=0,i=t.length;r<i;r++){if(r<3){n+=t[r]}else{break}if(r<2){n+="/"}}return n}function u(e){return!!(e&&e.constructor&&e.call&&e.apply)}function a(e){return toString.call(e)==="[object Array]"}var f={},l=false,c=Array.prototype.slice;e.fn=e.prototype={playerDomain:"",element:null,init:function(e){if(typeof e==="string"){e=document.getElementById(e)}this.element=e;return this},api:function(e,n){if(!this.element||!e){return false}var i=this,s=i.element,o=s.id!=""?s.id:null,a=!u(n)?n:null,f=u(n)?n:null;if(f){r(e,f,o)}t(e,a,s);return i},addEvent:function(e,i){if(!this.element){return false}var s=this,u=s.element,a=u.id!=""?u.id:null;r(e,i,a);if(e!="ready"){t("addEventListener",e,u)}if(l){return s}playerDomain=o(u.getAttribute("src"));if(window.addEventListener){window.addEventListener("message",n,false)}else{window.attachEvent("onmessage",n,false)}l=true;return s},removeEvent:function(e){if(!this.element){return false}var n=this,r=n.element,i=r.id!=""?r.id:null,o=s(e,i);if(e!="ready"&&o){t("removeEventListener",e,r)}}};e.fn.init.prototype=e.fn;return window.Froogaloop=e}();(function(e){function t(t,r){function i(){n++;var i=e('<iframe id="pe_vimeo_player'+n+'" src="http://player.vimeo.com/video/'+r.videoId+"?autoplay="+(r.playerVars.autoplay?1:0)+"&loop="+(r.playerVars.loop?1:0)+"&api=1&player_id=pe_vimeo_player"+n+"&origin="+location.href.match(/:\/\/(.[^\/]+)/)[1]+'" width="'+r.width+'" height="'+r.height+'" frameborder="0"></iframe>')[0];e(t).append(i);a=new Froogaloop(i);a.addEvent("ready",s);setTimeout(s,4e3)}function s(){if(a){a.removeEvent("ready",s);e(u).trigger("video_ready.pixelentity");a.addEvent("finish",o)}}function o(){e(u).trigger("video_ended.pixelentity")}var u=this;var a;e.extend(u,{destroy:function(){if(a){a.removeEvent("ready",s);a.removeEvent("finish",o);e(a.element).remove();delete a.element;a=undefined}u=undefined}});i()}e.pixelentity=e.pixelentity||{version:"1.0.0"};if(e.pixelentity.vimeo){return}var n=0;e.pixelentity.vimeo=function(e){e(t)}})(jQuery);jQuery(function($){function Iterator(e){this.length=e.length;this.each=function(t){$.each(e,t)};this.size=function(){return e.length}}if($.browser.msie){(function(){if(!0){return}var e="div,audio,video,source".split(",");for(var t=0;t<e.length;t++){document.createElement(e[t])}})();if(!Array.prototype.indexOf){Array.prototype.indexOf=function(e,t){for(var n=t||0,r=this.length;n<r;n++){if(this[n]==e){return n}}return-1}}}var projekktors=[];if($.prop==undefined||$().jquery<"1.6"){$.fn.prop=function(e,t){return $(this).attr(e,t)}}projekktor=$p=function(){function PPlayer(srcNode,cfg,onReady){this.config=new projekktorConfig("0.9.08");this._persCfg=["enableNativePlayback","enableFlashFallback"];this._queue=[];this.env={muted:false,inFullscreen:false,playerStyle:null,scrollTop:null,scrollLeft:null,bodyOverflow:null,playerDom:null,mediaContainer:null,agent:"standard",mouseIsOver:false,loading:false,autoSize:false,className:"",onReady:onReady};this.media=[null];this._plugins=[];this.listeners=[];this.playerModel={};this._isReady=false;this._compTableCache=false;this._currentItem=0;this._playlistServer="";this._id="";this._reelUpdate=function(e){this.env.loading=true;switch(typeof e){default:e=[{file:"",type:"",errorCode:98}];break;case"object":if(e.length==0){e=[{file:"",type:"",errorCode:97}]}break;case"undefined":e=[{file:"",type:"",errorCode:97}];break}var t=this,n=e;this.media=[];try{var r=false;for(var i in n.config){if(typeof n.config[i].indexOf("objectfunction")>-1){continue}this.config[i]=this._cleanValue(n.config[i]);r=true}delete n.config;if(r===true){this._debug("Updated config var: "+i+" to "+this.config[i]);this._promote("configModified")}}catch(s){}var o=n.playlist||n;for(var u in o){if(typeof o[u]=="function"){continue}if(typeof o[u]==undefined){continue}if(o[u]){this._addItem(this._prepareMedia({file:o[u],config:o[u].config||{},errorCode:o[u].errorCode}))}}this.env.loading=false;this._promote("scheduled",this.getItemCount());this._syncPlugins(function(){t.setActiveItem(0)})};this._addItem=function(e,t,n){var r=0;if(this.media.length===1&&this.media[0].mediaModel=="NA"){this._detachplayerModel();this.media=[]}if(t===undefined||t<0||t>this.media.length-1){this.media.push(e);r=this.media.length-1}else{this.media.splice(t,n===true?1:0,e);r=t}if(this.env.loading===false){this._promote("scheduleModified",this.getItemCount())}return r};this._removeItem=function(e){var t=0;if(this.media.length===1){if(this.media[0].mediaModel=="NA"){return 0}else{this.media[0]=this._prepareMedia({file:""});return 0}}if(e===undefined||e<0||e>this.media.length-1){this.media.pop();t=this.media.length}else{this.media.splice(e,1);t=e}if(this.env.loading===false){this._promote("scheduleModified",this.getItemCount())}return t};this._prepareMedia=function(e){var t="",n={},r={},i=e.errorCode||7,s=[],o=[];result={};var u=[];for(var a in $p.mmap){if($p.mmap[a].platform&&$p.mmap[a].platform.toUpperCase()=="FLASH"){if(!this.getFlashVersion()>0){continue}if(this.getConfig("enableFlashFallback")==false){continue}}if($p.mmap[a].platform&&$p.mmap[a].platform.toUpperCase()=="NATIVE"){if(!this.getCanPlayNatively($p.mmap[a].type)){continue}if(this.getConfig("enableNativePlayback")==false){continue}if(e.config&&e.config.flashStreamType=="rtmp"){continue}}$p.mmap[a].level=this.config._platformPriority.indexOf($p.mmap[a].platform);$p.mmap[a].level=$p.mmap[a].level<0?100:$p.mmap[a].level;u.push("."+$p.mmap[a].ext);if(!n[$p.mmap[a].ext]){n[$p.mmap[a].ext]=new Array}n[$p.mmap[a].ext].push($p.mmap[a]);if(!r[$p.mmap[a].type]){r[$p.mmap[a].type]=new Array}r[$p.mmap[a].type].push($p.mmap[a])}u="^.*.("+u.join("|")+")$";if(typeof e.file=="string"){e.file=[{src:e.file}];if(typeof e.type=="string"){e.file=[{src:e.file,type:e.type}]}}if(e.file===false){e.file=[{src:""}]}for(var f in e.file){if(f=="config"){continue}if(typeof e.file[f]=="string"){e.file[f]={src:e.file[f]}}if(e.file[f].src==undefined){continue}try{e.file[f].ext=e.file[f].src.match(new RegExp(u))[1];e.file[f].ext=!e.file[f].ext?"NaN":e.file[f].ext.replace(".","")}catch(l){e.file[f].ext="NaN"}if(e.file[f].type!==undefined&&e.file[f].type!==""){try{var c=e.file[f].type.split(" ").join("").split(/[\;]codecs=.([a-zA-Z0-9\,]*)[\'|\"]/i);if(c[1]!==undefined){e.file[f].codec=c[1];e.file[f].type=c[0]}}catch(l){}if(r[e.file[f].type]){o=$.merge(o,r[e.file[f].type])}}else{if(n[e.file[f].ext]){o=$.merge(o,n[e.file[f].ext])}}}if(o.length==0){o=r["none/none"]}else{o.sort(function(e,t){return e.level-t.level})}for(var f in e.file){if(e.file[f].type==o[0].type||o[0].type=="none/none"){result={setup:e.file,ID:this.randomId(8),type:e.file[f].type,ext:e.file[f].ext,file:e.config.flashStreamType!="rtmp"?this.toAbsoluteURL(e.file[f].src):e.file[f].src,mediaModel:o[0].model||"NA",errorCode:i,config:e.config||{}};break}}return result};this._modelUpdateListener=function(e,t){var n=this;if(!this.playerModel.init){return}if(e!="time"&&e!="progress"){this._debug("Received model Update: '"+e+"' ("+t+") while handling '"+this.playerModel.getFile()+"' using '"+this.playerModel.getModelName()+"'")}switch(e){case"state":this._promote("state",t);switch(t){case"IDLE":case"AWAKENING":case"BUFFERING":case"PLAYING":break;case"ERROR":this._promote("error",{});break;case"STOPPED":this._promote("stopped",{});break;case"PAUSED":if(this.getConfig("disablePause")===true){this.playerModel.applyCommand("play",0)}break;case"COMPLETED":if(this._currentItem+1>=this.media.length){if(this.getInFullscreen()===true){this.setFullscreen(false)}this._promote("done",{})}this.setActiveItem("next");break}break;case"buffer":this._promote("buffer",t);break;case"modelReady":this._promote("item",n._currentItem);break;case"displayReady":this._promote("displayReady",true);this._addGUIListeners();this._syncPlugins();break;case"FFreinit":break;case"seek":this._promote("seek",{dest:t});break;case"volume":this.setConfig({volume:t});this._promote("volume",t);if(t<=0){this.env.muted=true;this._promote("mute",t)}else{if(this.env.muted==true){this.env.muted=false;this._promote("unmute",t)}}break;case"resume":case"progress":case"time":case"fullscreen":case"resize":case"start":this._promote(e,t);break;case"playlist":this.setFile(t,true);break;case"config":this.setConfig(t);break;case"scaled":if(this.env.autoSize===true){this.env.playerDom.css({height:t.realHeight+"px",width:t.realWidth+"px"});this._promote("resize",t);this.env.autoSize=false;break}this._promote("scaled",t);break}};this._syncPlugins=function(e){var t=this;this.env.loading=true;(function(){try{if(t._plugins.length>0){for(var n=0;n<t._plugins.length;n++){if(t._plugins[n].pluginReady!==true){setTimeout(arguments.callee,50);return}}}t.env.loading=false;t._promote("pluginsReady",{});if(t._isReady===true){t._promote("ready",t.getItemIdx())}try{e()}catch(r){}}catch(r){}})()};this._MD=function(e){projekktor("#"+e.currentTarget.id.replace("_media",""))._displayMousedownListener(e)};this._addGUIListeners=function(){var e=this;this._removeGUIListeners();if(this.getDC().get(0).addEventListener){this.getDC().get(0).addEventListener("mousedown",this._MD,true)}else{this.getDC().mousedown(function(t){e._displayMousedownListener(t)})}this.getDC().mousemove(function(t){e._displayMousemoveListener(t)}).mouseenter(function(t){e._displayMouseEnterListener(t)}).mouseleave(function(t){e._displayMouseLeaveListener(t)});$(window).bind("resize.projekktor"+this.getId(),function(){e.playerModel.applyCommand("resize")});if(this.config.enableKeyboard===true){if(!$.browser.mozilla){$(document.documentElement).unbind("keydown.pp"+this._id);$(document.documentElement).bind("keydown.pp"+this._id,function(t){e._keyListener(t)})}else{$(document.documentElement).unbind("keypress.pp"+this._id);$(document.documentElement).bind("keypress.pp"+this._id,function(t){e._keyListener(t)})}}};this._removeGUIListeners=function(){$("#"+this.getId()).unbind();this.getDC().unbind();if(this.getDC().get(0).removeEventListener){this.getDC().get(0).removeEventListener("mousedown",this._MD,true)}else{this.getDC().get(0).detachEvent("onmousedown",this._MD)}$(window).unbind("resize.projekktor"+this.getId())};this._registerPlugins=function(){var plugins=$.merge($.merge([],this.config._plugins),this.config._addplugins);if(this._plugins.length>0){return}if(plugins==0){return}for(var i=0;i<plugins.length;i++){var pluginName="projekktor"+plugins[i];try{typeof eval(pluginName)}catch(e){continue}var pluginObj=$.extend(true,{},new projekktorPluginInterface,eval(pluginName).prototype);pluginObj.name=plugins[i].toLowerCase();pluginObj.pp=this;pluginObj.playerDom=this.env.playerDom;pluginObj._init(this.config["plugin_"+plugins[i].toLowerCase()]||{});this._plugins.push(pluginObj)}};this.removePlugin=function(e){if(this._plugins.length==0){return}var t=e||$.merge($.merge([],this.config._plugins),this.config._addplugins),n=this._plugins.length;for(var r=0;r<t.length;r++){for(var i=0;i<n;i++){if(this._plugins[i]!=undefined){if(this._plugins[i].name==t[r].toLowerCase()){this._plugins[i].deconstruct();this._plugins.splice(i,1)}}}}};this._promote=function(e,t){var n=e,r={};if(typeof n=="object"){if(!n._plugin){return}t.PLUGIN=n._plugin+"";t.EVENT=n._event+"";n="pluginevent"}if(n!="time"&&n!="progress"&&n!="mousemove"){this._debug("Fireing :"+n)}if(this._plugins.length>0){for(var i in this._plugins){try{this._plugins[i][n+"Handler"](t,this)}catch(s){}}}if(this.listeners.length>0){for(var i in this.listeners){try{if(this.listeners[i]["event"]==n||this.listeners[i]["event"]=="*"){this.listeners[i]["callback"](t,this)}}catch(s){}}}};this._detachplayerModel=function(){this._removeGUIListeners();try{this.playerModel.destroy()}catch(e){}this._promote("detach",{})};this._displayMousedownListener=function(e){if(!this.env.mouseIsOver){return}switch(e.which){case 1:this._promote("leftclick",e);break;case 2:this._promote("middleclick",e);break;case 3:e.stopPropagation();e.preventDefault();$(document).bind("contextmenu",function(e){$(document).unbind("contextmenu");return false});this._promote("rightclick",e);break}return false};this._displayMousemoveListener=function(e){if("TEXTAREA|INPUT".indexOf(e.target.tagName.toUpperCase())>-1){this.env.mouseIsOver=false}this._promote("mousemove",{});e.stopPropagation()};this._displayMouseEnterListener=function(e){this._promote("mouseenter",{});this.env.mouseIsOver=true;e.stopPropagation()};this._displayMouseLeaveListener=function(e){this._promote("mouseleave",{});this.env.mouseIsOver=false;e.stopPropagation()};this._keyListener=function(e){if(!this.env.mouseIsOver){return}e.stopPropagation();e.preventDefault();this._debug("Keypress: "+e.keyCode);this._promote("key",e.keyCode);switch(e.keyCode){case 27:this.setFullscreen(false);break;case 13:this.setFullscreen(true);break;case 39:this.setActiveItem("next");break;case 37:this.setActiveItem("previous");break;case 123:break;default:this.setPlayPause();break}return false};this._enterFullViewport=function(){if(this.env.inFullscreen===true){return}this.env.scrollTop=$(window).scrollTop();this.env.scrollLeft=$(window).scrollLeft();this.env.playerStyle=this.getDC().attr("style");this.env.bodyOverflow=$("body").css("overflow");$(window).scrollTop(0).scrollLeft(0);if($.browser.mozilla&&this.getUsesFlash()){}else{$("body").css("overflow","hidden")}this.env.playerDom.css({position:"fixed",display:"block",top:0,left:0,width:"100%",height:"100%",zIndex:99997});this.env.inFullscreen=true};this._exitFullViewport=function(){if(this.env.inFullscreen===false){return}this.getDC().attr("style",this.env.playerStyle);$("body").css("overflow",this.env.bodyOverflow);$(window).scrollTop(this.env.scrollTop);$(window).scrollLeft(this.env.scrollLef);if(this.getDC().width()!=this.config._width||this.getDC().height()!=this.config._height){this.getDC().css({width:this.config._width+"px",height:this.config._height+"px"})}this._modelUpdateListener("resize");this.env.inFullscreen=false};this._enterIframeFullViewport=function(){if(this.env.inFullscreen===true){return}var e=this.getIframeWindow(),t=this.getIframe();if(!e||!t){return}this.env.scrollTop=e.scrollTop();this.env.scrollLeft=e.scrollLeft();this.env.playerStyle=t.attr("style");this.env.iframeWidth=t.attr("width");this.env.iframeHeight=t.attr("height");this.env.bodyOverflow=$(e[0].document.body).css("overflow");e.scrollTop(0);e.scrollLeft(0);$(e[0].document.body).css("overflow","hidden");t.css({position:"fixed",display:"block",top:0,left:0,width:"100%",height:"100%",zIndex:9999});this.env.inFullscreen=true};this._exitIframeFullViewport=function(){if(this.env.inFullscreen===false){return}var e=this.getIframeWindow();var t=this.getIframe();if(!e||!t){return}e.scrollTop(this.env.scrollTop);e.scrollLeft(this.env.scrollLef);$(e[0].document.body).css("overflow",this.env.bodyOverflow);t.attr("width",this.env.iframeWidth+"px");t.attr("height",this.env.iframeHeight+"px");t.attr("style",this.env.playerStyle==undefined?"":this.env.playerStyle);this.env.inFullscreen=false};this.getItemConfig=function(e,t){return this.getConfig(e,t)};this.getConfig=function(e,t){var n=t||this._currentItem,r=undefined,i=this.config["_"+e]?this.config["_"+e]:this.config[e];if(i!==undefined){r=i;if($.inArray(e,this._persCfg)>-1){if(this._cookie(e)!==null){r=this._cookie(e)}}if(this.config["_"+e]==undefined){try{if(this.media[n]["config"][e]!==undefined){r=this.media[n]["config"][e]}}catch(s){}}}else{if(e.indexOf("plugin_")>-1){try{if(this.media[n]["config"][e]){r=this.media[n]["config"][e]}}catch(s){}}}return r};this.getItemCount=function(){return this.media.length};this.getDC=function(){return this.env.playerDom};this.getState=function(e){var t=null;try{t=this.playerModel.getState()}catch(n){t="IDLE"}if(e!=null){return t==e.toUpperCase()}return t};this.getLoadProgress=function(){try{return this.playerModel.getLoadProgress()}catch(e){return 0}};this.getKbPerSec=function(){try{return this.playerModel.getKbPerSec()}catch(e){return 0}};this.getItemId=function(e){if(e==undefined){return this.media[this._currentItem].ID}return this.media[e].ID};this.getItemIdx=function(){return this._currentItem};this.getItem=function(){arg=arguments[0]||"current";switch(arg){case"next":return $.extend(true,[],this.media[this._currentItem+1]);case"prev":return $.extend(true,[],this.media[this._currentItem-1]);case"current":return $.extend(true,[],this.media[this._currentItem]);case"*":return $.extend(true,[],this.media);default:return $.extend(true,[],this.media[arg])}};this.getVolume=function(){return this.getConfig("fixedVolume")===true?this.config.volume:this.getConfig("volume")};this.getTrackId=function(){if(this.getConfig("trackId")){return this.config.trackId}if(this._playlistServer!=null){return"pl"+this._currentItem}return null};this.getLoadPlaybackProgress=function(){try{return this.playerModel.getLoadPlaybackProgress()}catch(e){return 0}};this.getDuration=function(){try{return this.playerModel.getDuration()}catch(e){return 0}};this.getPosition=function(){try{return this.playerModel.getPosition()||0}catch(e){return 0}};this.getTimeLeft=function(){try{return this.playerModel.getDuration()-this.playerModel.getPosition()}catch(e){return this.media[this._currentItem].duration}};this.getInFullscreen=function(){return this.env.inFullscreen};this.getMediaContainer=function(){if(this.env.mediaContainer==null){this.env.mediaContainer=$("#"+this.getMediaId())}if(this.env.mediaContainer.length==0){if(this.env.playerDom.find("."+this.config._cssClassPrefix+"display").length>0){this.env.mediaContainer=$(document.createElement("div")).attr({id:this.getId()+"_media"}).css({overflow:"hidden",height:"100%",width:"100%",top:0,left:0,padding:0,margin:0,display:"block"}).appendTo(this.env.playerDom.find("."+this.config._cssClassPrefix+"display"))}else{this.env.mediaContainer=$(document.createElement("div")).attr({id:this.getMediaId()}).css({width:"1px",height:"1px"}).appendTo($(document.body))}}return this.env.mediaContainer};this.getMediaId=function(){return this.getId()+"_media"};this.getMediaType=function(){return this.media[this._currentItem].type};this.getUsesFlash=function(){return this.playerModel.requiresFlash!==false};this.getModel=function(){try{return this.media[this._currentItem].mediaModel}catch(e){return"NA"}};this.getIframeWindow=function(){try{return $(parent.window)}catch(e){return false}};this.getIframe=function(){try{return window.$(frameElement)}catch(e){return false}};this.getPlaylist=function(){return this.getItem("*")};this.getFlashVersion=function(){try{try{var e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");try{e.AllowScriptAccess="always"}catch(t){return"6,0,0"}}catch(t){}return(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1].match(/\d+/g)[0]}catch(t){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin){return(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1].match(/\d+/g)[0]}}catch(t){}}return"0,0,0".match(/\d+/g)[0]};this.getCanPlayNatively=function(e){var t=[];if(this._compTableCache==false){this._compTableCache=this._testMediaSupport()}switch(typeof e){case"undefined":if(this._compTableCache.media.length>0){return true};case"string":t.push(e);break;case"array":t=e;break}for(var n in t){if($.inArray(t[n],this._compTableCache.all)>-1){return true}}return false};this.getNativeFullscreenSupport=function(){if(typeof this.video.webkitEnterFullScreen=="function"){if(!navigator.userAgent.match("Chrome")&&!navigator.userAgent.match("Mac OS X 10.5")){return true}}return false};this.getId=function(){return this._id};this.getHasGUI=function(){try{return this.playerModel.getHasGUI()}catch(e){return false}};this.getCssPrefix=function(){return this.config._cssClassPrefix};this.getPlayerDimensions=function(){return{width:this.config._width,height:this.config._height}};this.getMediaDimensions=function(){return{width:this.config._width,height:this.config._height}};this.getFromUrl=function(e,t,n,r,i){var s=null,o=this;if(t==o&&n=="_reelUpdate"){this._promote("scheduleLoading",1+this.getItemCount())}if(n.substr(0,1)!="_"){window[n]=function(e){try{delete window[n]}catch(r){}t[n](e)}}else{this["_jsonp"+n]=function(e){t[n](e)}}if(i){if($.parseJSON==undefined&&i.indexOf("json")>-1){this._raiseError("Projekktor requires jQuery 1.4.2 in order to handle JSON playlists.");return this}i=i.indexOf("/")>-1?i.split("/")[1]:i}$.ajax({url:e,complete:function(e,o){if(i==undefined){try{if(e.getResponseHeader("Content-Type").indexOf("xml")>-1){i="xml"}if(e.getResponseHeader("Content-Type").indexOf("json")>-1){i="json"}if(e.getResponseHeader("Content-Type").indexOf("html")>-1){i="html"}}catch(u){}}switch(i){case"html":case"xml":if(window.DOMParser){s=new DOMParser;s=s.parseFromString(e.responseText,"text/xml")}else{s=new ActiveXObject("Microsoft.XMLDOM");s.async="false";s.loadXML(e.responseText)}break;case"json":s=e.responseText;if(typeof s=="string"){s=$.parseJSON(s)}break;case"jsonp":break;default:s=e.responseText;break}try{s=r(s,e.responseText)}catch(u){}if(o!="error"&&i!="jsonp"){t[n](s)}},error:function(e){if(i!="jsonp"){t[n](false)}},cache:true,dataType:i,jsonpCallback:n.substr(0,1)!="_"?false:"projekktor('"+this.getId()+"')._jsonp"+n,jsonp:n.substr(0,1)!="_"?false:"callback"});return this};this.setActiveItem=function(e){var t=0;var n=this._currentItem;if(this.env.loading===true){return this}if(typeof e=="string"){switch(e){case"previous":if(this.getConfig("disallowSkip")==true&&!this.getState("COMPLETED")){return this}t=this._currentItem-1;break;case"next":if(this.getConfig("disallowSkip")==true&&!this.getState("COMPLETED")){return this}t=this._currentItem+1;break;default:case"poster":result=0;break}}else{if(typeof e=="number"){t=parseInt(e)}else{t=0}}if(t!=this._currentItem){if(this.getConfig("disallowSkip")==true&&!this.getState("COMPLETED")){return this}}this._detachplayerModel();var r=false;if(t===0&&n==0&&(this.config._autoplay===true||this.getState().indexOf("IDLE|STOPPED")>-1)){r=true}else{if(this.getItemCount()>1&&t!=n&&this.config._continuous===true&&t<this.getItemCount()){r=true}}if(t>=this.getItemCount()||t<0){r=this.config._loop;t=0}this._currentItem=t;this.getDC().attr("class",this.env.className);var i=this.media[this._currentItem].mediaModel.toUpperCase();if(!$p.models[i]){i="NA";this.media[this._currentItem].mediaModel=i;this.media[this._currentItem].errorCode=8}else{if(this.getConfig("className")!==false){this.getDC().addClass(this.getConfig("className"))}}this.playerModel=new playerModel;$.extend(this.playerModel,$p.models[i].prototype);this.playerModel._init({media:$.extend(true,{},this.media[this._currentItem]),model:i,pp:this,environment:$.extend(true,{},this.env),autoplay:r});return this};this._enqueue=function(e,t,n){this._queue.push({command:e,params:t,delay:n});this._processQueue()};this._clearqueue=function(e,t){if(this._isReady!==true){return}this._queue=[]};this._processQueue=function(){var e=this,t=false;if(this._processing===true){return}if(this.env.loading===true){return}this._processing=true;(function(){t=false;try{t=e.playerModel.getIsReady()}catch(n){}if(e.env.loading!==true&&t){var r=e._queue.shift();if(!r){e._processing=false;if(e._isReady===false){e._promote("ready",e.getItemIdx());e._isReady=true}return}if(typeof r.command=="string"){if(r.delay>0){setTimeout(function(){e.playerModel.applyCommand(r.command,r.params)},r.delay)}else{e.playerModel.applyCommand(r.command,r.params)}}else{r.command(e)}arguments.callee();return}setTimeout(arguments.callee,100)})()};this.getIsLastItem=function(){return this._currentItem==this.media.length-1&&this.config._loop!==true};this.getIsFirstItem=function(){return this._currentItem==0&&this.config._loop!==true};this.getIsMobileClient=function(){var e=navigator.userAgent.toLowerCase();var t=["android","windows ce","blackberry","palm","mobile"];for(var n=0;n<t.length;n++){if(e.indexOf(t[n])>-1){return true}}return false};this.setPlay=function(){this._enqueue("play",false);return this};this.setPause=function(){this._enqueue("pause",false);return this};this.setStop=function(e){var t=this;this._enqueue("stop",false);if(e){this._enqueue(function(){t._currentItem=0;t.setActiveItem(0)})}return this};this.setPlayPause=function(){if(!this.getState("PLAYING")){this.setPlay()}else{this.setPause()}return this};this.setVolume=function(e,t){if(this.getConfig("fixedVolume")==true){return this}var n=this.getVolume();if(typeof e=="string"){var r=e.substr(0,1);e=parseFloat(e.substr(1));e=e>1?e/100:e;if(r=="+"){e=this.getVolume()+e}else{if(r=="-"){e=this.getVolume()-e}else{e=this.getVolume()}}}if(typeof e=="number"){e=e>1?1:e;e=e<0?0:e}else{return this}if(e>n&&t){if(e-n>.03){for(var i=n;i<=e;i=i+.03){this._enqueue("volume",i,t)}this._enqueue("volume",e,t);return this}}else{if(e<n&&t){if(n-e>.03){for(var i=n;i>=e;i=i-.03){this._enqueue("volume",i,t)}this._enqueue("volume",e,t);return this}}}this._enqueue("volume",e);return this};this.setPlayhead=function(e){if(this.getConfig("disallowSkip")==true){return this}if(typeof e=="string"){var t=e.substr(0,1);e=parseFloat(e.substr(1));if(t=="+"){e=this.getPosition()+e}else{if(t=="-"){e=this.getPosition()-e}else{e=this.getPosition()}}}if(typeof e=="number"){this._enqueue("seek",e)}return this};this.setPlayerPoster=function(e){var t=this;this._enqueue(function(){t.setConfig({poster:e},0)});return this};this.setItemConfig=function(){var e=this,t=arguments;this._enqueue(function(){e._setConfig(t[0]||null,t[1]||null)});return this};this.setConfig=function(){var e=this,t=arguments;this._enqueue(function(){e._setConfig(t[0]||null,t[1]||null)});return this};this._setConfig=function(){if(!arguments.length){return result}var e=arguments[0],t="*",n=false;if(typeof e!="object"){return this}if(arguments[1]=="string"||arguments[1]=="number"){t=arguments[1]}else{t=this._currentItem}for(var r in e){if($.inArray(r,this._persCfg)>-1){this._cookie(r,this._cleanValue(e[r]))}if(this.config["_"+r]!=undefined){continue}n=this._cleanValue(e[r]);if(t=="*"){$.each(this.media,function(){if(this.config==undefined){this.config={}}this.config[r]=n});continue}if(this.media[t]==undefined){return this}if(this.media[t]["config"]==undefined){this.media[t]["config"]={}}this.media[t]["config"][r]=n}return this};this.setFullscreen=function(e){e=e==null?!this.getInFullscreen():e;if(e==this.getInFullscreen()||!this.config.enableFullscreen||this.getIsMobileClient()){return this}switch(e){case true:if(this.config._iframe===true){this._enterIframeFullViewport()}else{this._enterFullViewport()}break;case false:if(this.config._iframe===true){this._exitIframeFullViewport()}else{this._exitFullViewport()}break}this.playerModel.applyCommand("fullscreen",e);return this};this.setResize=function(){this._modelUpdateListener("resize");return this};this.setSize=function(e){this.config._width=e.width||this.config._width;this.config._height=e.height||this.config._height;if(this.getInFullscreen()===true){return}this.getDC().css({width:e.width+"px",height:e.height+"px"});this._modelUpdateListener("resize")};this.addListener=function(e,t){var n=this;this._enqueue(function(){n._addListener(e,t)})};this._addListener=function(e,t){var n={event:e,callback:t};this.listeners.push(n);return this};this.removeListener=function(e,t){var n=this.listeners.length;for(var r=0;r<n;r++){if(this.listeners[r]==undefined){continue}if(this.listeners[r].event!=e&&e!=="*"){continue}if(this.listeners[r].callback!=t&&t!==undefined){continue}this.listeners.splice(r,1)}return this};this.setItem=function(){var e=arguments[0];var t=0;this._clearqueue();if(this.env.loading===true){return this}if(e==null){t=this._removeItem(arguments[1]);if(t===this._currentItem){this.setActiveItem("previous")}}else{t=this._addItem(this._prepareMedia({file:e,config:e.config||{}}),arguments[1],arguments[2]);if(t===this._currentItem){this.setActiveItem(this._currentItem)}}return this};this.setFile=function(e,t,n){var r=e||{},i={},s=t||false;this._clearqueue();if(this.env.loading===true){return this}if(typeof r=="object"&&r.length==0){return false}this.env.loading=true;this._detachplayerModel();if(typeof r=="object"){if(r.length==0){this._reelUpdate({});return false}this._debug("Applying incoming JS Object",r);this._reelUpdate(r);return this}if(typeof r=="string"){var o=[];o[0]=r;if(r.indexOf(this.config._FilePosterSeparator)>-1){o=r.split(this.config._FilePosterSeparator);r.config={poster:o[1]}}else{i[0]={};i[0].file=r}if(s===false){this._debug("Applying incoming single file:"+i[0]["file"],r);this._reelUpdate(i)}else{this._debug("Loading external data from "+o[0]+" supposed to be "+n);this._playlistServer=o[0];this.getFromUrl(o[0],this,"_reelUpdate",this.config._reelParser,n)}}return this};this.openUrl=function(e){e=e||{url:"",target:"",pause:false};window.open(e.url,e.target).focus();if(e.pause===true){this.setPause()}return this};this.selfDestruct=function(){var e=this;this._enqueue(function(){e._selfDestruct()});return this},this._selfDestruct=function(){var e=this;$(this).unbind();this.removePlugin();this._removeGUIListeners();this.env.playerDom.replaceWith($(this.env.srcNode).clone());$.each(projekktors,function(t){try{if(this.getId()==e.getId()||this.getId()==e.getId()||this.getParent()==e.getId()){projekktors.splice(t,1);return}}catch(n){}});return this};this.reset=function(){var e=this;this._clearqueue();this._enqueue(function(){e._reset()});return this},this._reset=function(){var e={},t=this;$(this).unbind();this.setFullscreen(false);this.removePlugin();this._removeGUIListeners();this.env.mediaContainer=null;for(var n in this.config){e[n.substr(0,1)=="_"?n.substr(1):n]=this.config[n]}if(typeof this.env.onReady==="function"){this._enqueue(t.env.onReady(t))}this._init(this.env.playerDom,e);return this},this._cookie=function(e,t){if(document.cookie===undefined){return null}if(document.cookie===false){return null}var n={};if(arguments.length>1&&(t===null||typeof t!=="object")){var r=new Date;r.setDate(r.getDate()+this.config._cookieExpiry);return document.cookie=encodeURIComponent(this.config._cookieName+"_"+e)+"="+encodeURIComponent(String(t))+"; expires="+r.toUTCString()+"; path=/"}n=t||{};var i,s=n.raw?function(e){return e}:decodeURIComponent;var o=(i=(new RegExp("(?:^|; )"+encodeURIComponent(this.config._cookieName+"_"+e)+"=([^;]*)")).exec(document.cookie))?s(i[1]):null;return o!=null?this._cleanValue(o):null};this.embeddFlash=function(e,t){var n=t.FlashVars||{},r="",i="",s="",o="",u="";t.src+="?";for(var a in n){if(typeof n[a]!="function"){o=n[a];for(var f in this.media){if(typeof o!="string"){continue}o=o.replace("{"+f+"}",this.media[f])}t.src+=a+"="+encodeURIComponent(o)+"&"}}t.src.replace(/&$/,"");if($.browser.msie){u=' id="'+t.id+'" '}i="<object"+u+' codebase="https://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0"  name="'+t.name+'" width="'+t.width+'" height="'+t.height+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">';i+='<param name="movie" value="'+t.src+'"></param>';i+='<param name="allowScriptAccess" value="'+t.allowScriptAccess+'"></param>';i+='<param name="allowFullScreen" value="'+t.allowFullScreen+'"></param>';i+='<param name="wmode" value="'+t.wmode+'"></param>';s="<embed ";for(var a in t){if(a.toUpperCase()==="FLASHVARS"){continue}if(typeof t[a]!="function"){s+=a+'="'+t[a]+'" '}}s+=' pluginspage="http://www.macromedia.com/go/getflashplayer" type="application/x-shockwave-flash"></embed>';r=i+s;r+="</object>";if($.browser.mozilla){r=s}if(e===null){return r}e[0].innerHTML=r;return $("#"+t.id)[0]};this._testMediaSupport=function(){var e="",t={all:[],media:[]};for(var n=0;n<$p.mmap.length;n++){if($.inArray($p.mmap[n]["type"],t.all)>-1){continue}if("all|internal".indexOf($p.mmap[n]["platform"])>-1){t.all.push($p.mmap[n]["type"]);continue}if($p.mmap[n]["fixed"]!==true){if($p.mmap[n]["type"].indexOf("video")>-1||$p.mmap[n]["type"].indexOf("audio")>-1){try{e=$p.mmap[n]["type"].indexOf("video")>-1?"video":"audio";var r=document.createElement(e);if(r.canPlayType!=false){switch(r.canPlayType($p.mmap[n]["type"])){case"no":case"":break;case"maybe":if($.browser.opera){if($.browser.version.slice(0,2)<11){break}};case"probably":default:t.all.push($p.mmap[n]["type"]);t.media.push($p.mmap[n]["type"])}}}catch(i){}}}}return t};this.randomId=function(e){var t="abcdefghiklmnopqrstuvwxyz";var n="";for(var r=0;r<e;r++){var i=Math.floor(Math.random()*t.length);n+=t.substring(i,i+1)}return n};this.toAbsoluteURL=function(e){var t=location,n,r,i,s;if(e==null||e==""){return""}if(/^\w+:/.test(e)){return e}n=t.protocol+"//"+t.host;if(e.indexOf("/")==0){return n+e}r=t.pathname.replace(/\/[^\/]*$/,"");i=e.match(/\.\.\//g);if(i){e=e.substring(i.length*3);for(s=i.length;s--;){r=r.substring(0,r.lastIndexOf("/"))}}return n+r+"/"+e};this.parseTemplate=function(e,t){if(t===undefined||t.length==0||typeof t!="object"){return e}for(var n in t){e=e.replace(new RegExp("%{"+n+"}","gi"),t[n])}e=e.replace(/%{(.*?)}/gi,"");return e};this._cleanValue=function(e){switch(e){case"false":return false;case"true":return true;case"null":return null;case"undefined":return"";case undefined:return false;default:return typeof e!="string"&&typeof e!="number"&&typeof e!="boolean"?false:e}};this._getTypeFromFileExtension=function(e){var t="",n=[],r={},n=[];for(var i in $p.mmap){n.push("."+$p.mmap[i].ext);r[$p.mmap[i].ext]=$p.mmap[i]}n="^.*.("+n.join("|")+")";try{t=e.match(new RegExp(n))[1];t=!t?"NaN":t.replace(".","")}catch(s){t="NaN"}return r[t].type};this._debug=function(e,t){if(this.config._debug===false){return}if(this.config._debug=="console"){try{if(e){console.log(e)}if(t){console.log(t)}}catch(n){}return}var r="<pre><b>"+e+"</b>\n";if(t&&this.config.debugLevel>1){switch(typeof t){case"undefined":break;case"object":var i="";if(i==""){i="";for(var s in t){i+=s+" : "+t[s]+"\n"}}r+=i;break;case"string":r+=t}r+="</pre>"}try{$("#"+this.config._debug).prepend(r)}catch(n){}};this._raiseError=function(e){this.env.playerDom.html(e).css({color:"#fdfdfd",backgroundColor:"#333",lineHeight:this.config.height+"px",textAlign:"center",display:"block"});this._promote("error")};this._readMediaTag=function(e){var t={},n="",r=[],i=this;if(e[0].tagName.toUpperCase()!="VIDEO"&&e[0].tagName.toUpperCase()!="AUDIO"){return false}t={autoplay:e.prop("autoplay")!==undefined&&e.prop("autoplay")!==false?true:false,controls:e.prop("controls")!==undefined&&e.prop("controls")!==false?true:false,loop:e.prop("loop")!==undefined&&e.prop("loop")!==false?true:false,title:e.attr("title")!==undefined&&e.attr("title")!==false?e.attr("title"):"",poster:e.attr("poster")!==undefined&&e.attr("poster")!==false?e.attr("poster"):"",width:e.attr("width")!==undefined&&e.attr("width")!==false?e.attr("width"):false,height:e.attr("height")!==undefined&&e.attr("height")!==false?e.attr("height"):false};if($.browser.msie){n=$($("<div></div>").html($(e).clone())).html();r=["autoplay","controls","loop"];for(var s=0;s<r.length;s++){if(n.indexOf(r[s])==-1){continue}t[r[s]]=true}}e.prop("autoplay",false);t.playlist=[];t.playlist[0]=[];if(srcNode.attr("src")){t.playlist[0].push({src:srcNode.attr("src"),type:srcNode.attr("type")||this._getTypeFromFileExtension(srcNode.attr("src"))})}if($.browser.msie&&$.browser.version<9){var o=srcNode;do{o=o.next("source");if(o.attr("src")){t.playlist[0].push({src:o.attr("src"),type:o.attr("type")||this._getTypeFromFileExtension(o.attr("src"))})}}while(o.attr("src"))}else{srcNode.children("source").each(function(){if($(this).attr("src")){t.playlist[0].push({src:$(this).attr("src"),type:$(this).attr("type")||i._getTypeFromFileExtension($(this).attr("src"))})}})}try{e[0].pause();e.find("source").remove();e.prop("src","");e[0].load()}catch(u){}return t};this._applyDimensions=function(){if(this.config._height!==false&&this.config._width!==false){if(this.config._width<=this.config._minWidth){this.config._width=this.config._minWidth;this.env.autoSize=true}if(this.config._height<=this.config._minHeight){this.config._height=this.config._minHeight;this.env.autoSize=true}}this.env.playerDom.css({overflow:"hidden",width:this.config._width+"px",height:this.config._height+"px","max-width":"100%"})};this._init=function(e,t){var n=e||srcNode,r=t||cfg,i=this._readMediaTag(n);this.env.srcNode=$.extend(true,{},n);this.env.className=n.attr("class");if(i!==false){this.env.playerDom=$(document.createElement("div")).attr({"class":n[0].className,style:n.attr("style")});n.replaceWith(this.env.playerDom)}else{i={width:n.attr("width")?n.attr("width"):n.width(),height:n.attr("height")?n.attr("height"):n.height()};this.env.playerDom=n}r=$.extend(true,{},i,r);for(var s in r){if(this.config["_"+s]!=undefined){this.config["_"+s]=r[s]}else{this.config[s]=r[s]}}if(this.getIsMobileClient()){this.config._autoplay=false}this._id=n[0].id||this.randomId(8);this.env.playerDom.attr("id",this._id);if(this.config._theme){switch(typeof this.config._theme){case"string":break;case"object":this._applyTheme(this.config._theme)}}else{this._start(false)}return this};this._start=function(e){var t=this,n=[];this._applyDimensions();try{$("#projekktorver").html("V"+this.config._version)}catch(r){}this._registerPlugins();if(this.config._iframe===true){if(this.getIframeWindow()){this.getIframeWindow().ready(function(){t._enterFullViewport();t.env.inFullscreen=false})}else{t._enterFullViewport();t.env.inFullscreen=false;this.config.disableFullscreen=true}}if(typeof onReady==="function"){this._enqueue(function(){onReady(t)})}for(var i in this.config._playlist[0]){if(this.config._playlist[0][i].type){if(this.config._playlist[0][i].type.indexOf("/json")>-1||this.config._playlist[0][i].type.indexOf("/xml")>-1){this.setFile(this.config._playlist[0][i].src,true,this.config._playlist[0][i].type);return this}}}this.setFile(this.config._playlist);return this};this._applyTheme=function(data){var ref=this;if(data===false){this._raiseError("The Projekktor theme-set specified could not be loaded.");return false}if(typeof data.config.plugins=="object"){for(var i=0;i<data.config.plugins.length;i++){try{typeof eval("projekktor"+data.config.plugins[i])}catch(e){this._raiseError("The applied theme requires the following Projekktor plugin(s): <b>"+data.config.plugins.join(", ")+"</b>");return false}}}if(typeof data.css=="string"){$("head").append('<style type="text/css">'+this.parseTemplate(data.css,{rp:data.baseURL})+"</style>")}if(typeof data.html=="string"){this.env.playerDom.html(this.parseTemplate(data.html,{p:this.config._cssClassPrefix}))}this.env.playerDom.addClass(data.id).addClass(data.variation);if(typeof data.config=="object"){for(var i in data.config){if(this.config["_"+i]!=undefined){this.config["_"+i]=data.config[i]}else{this.config[i]=data.config[i]}}}if(data.onReady){this._enqueue(function(player){eval(data.onReady)})}return this._start()};return this._init()}var arg=arguments[0],instances=[];if(!arguments.length){return projekktors[0]||null}if(typeof arg=="number"){return projekktors[arg]}if(typeof arg=="string"){if(arg=="*"){return new Iterator(projekktors)}for(var i=0;i<projekktors.length;i++){try{if(projekktors[i].getId()==arg.id){instances.push(projekktors[i]);continue}}catch(e){}try{for(var j=0;j<$(arg).length;j++){if(projekktors[i].env.playerDom.get(0)==$(arg).get(j)){instances.push(projekktors[i]);continue}}}catch(e){}try{if(projekktors[i].getParent()==arg){instances.push(projekktors[i]);continue}}catch(e){}try{if(projekktors[i].getId()==arg){instances.push(projekktors[i]);continue}}catch(e){}}if(instances.length>0){return instances.length==1?instances[0]:new Iterator(instances)}}if(instances.length==0){var cfg=arguments[1]||{};var callback=arguments[2]||{};if(typeof arg=="string"){var count=0,playerA;$.each($(arg),function(){playerA=new PPlayer($(this),cfg,callback);projekktors.push(playerA);count++});return count>1?new Iterator(projekktors):playerA}else{if(arg){projekktors.push(new PPlayer(arg,cfg,callback));return new Iterator(projekktors)}}}return null};$p.mmap=[];$p.models={};$p.newModel=function(e,t){var n=false,r=$p.models[t]&&t!=undefined?$p.models[t].prototype:{};if(typeof e!="object"){return n}if(!e.modelId){return n}if($p.models[e.modelId]){return n}$p.models[e.modelId]=function(){};$p.models[e.modelId].prototype=$.extend({},r,e);for(var i=0;i<e.iLove.length;i++){e.iLove[i].model=e.modelId.toLowerCase();$p.mmap.push(e.iLove[i])}return true}});var projekktorConfig=function(e){this._version=e};var projekktorPluginInterface=function(){};jQuery(function(e){projekktorPluginInterface.prototype={pluginReady:false,name:"",pp:{},config:{},playerDom:null,canvas:{media:null,projekktor:null},_appliedDOMObj:[],_init:function(t){this.config=e.extend(true,this.config,t);this.initialize()},getConfig:function(e,t){var n=null;if(this.pp.getConfig("plugin_"+this.name)!=null){n=this.pp.getConfig("plugin_"+this.name)[e]}if(n==null){n=this.pp.getConfig(e)}if(n==null){n=this.config[e]||t}return n},sendEvent:function(e,t){this.pp._promote({_plugin:this.name,_event:e},t)},deconstruct:function(){this.pluginReady=false;e.each(this._appliedDOMObj,function(){e(this).remove()})},parseTemplate:function(e,t){return this.pp.parseTemplate(e,t)},blockSelection:function(t){if(!t){return}if(e.browser.mozilla){t.css("MozUserSelect","none")}else{if(e.browser.msie){t.bind("selectstart",function(){return false})}else{t.mousedown(function(){return false})}}},applyToPlayer:function(e,t){var n=this.getConfig("cssClassPrefix");if(!e){return null}if(this.playerDom.find("."+n+e.attr("class")).length==0){var r=e.attr("class");e.removeClass(r);e.addClass(n+r);if(t===true){e.prependTo(this.playerDom)}else{e.appendTo(this.playerDom)}this._appliedDOMObj.push(e);return e}var r=e.attr("class");e=this.playerDom.find("."+n+e.attr("class"));e.removeClass(r);e.addClass(n+r);return e},initialize:function(){}}});var playerModel=function(){};jQuery(function(e){playerModel.prototype={modelId:"player",iLove:[],_currentState:null,_currentBufferState:null,_volume:0,_KbPerSec:0,_bandWidthTimer:null,_isPoster:false,modelReady:true,requiresFlash:false,hasGUI:false,allowRandomSeek:false,flashVerifyMethod:"api_get",elementReady:false,mediaElement:null,pp:{},media:{duration:0,position:0,startOffset:0,file:false,poster:"",ended:false,message:"",error:null,loadProgress:0,errorCode:0,message:"",type:"NA"},_init:function(e){this.pp=e.pp||null;this.media=e.media||this.media;this._ap=e.autoplay;this._volume=this.pp.getVolume("volume");this.init()},init:function(e){this.ready()},ready:function(){this.sendUpdate("modelReady");this.displayItem(this._ap)},displayItem:function(e){if(e!==true||this.getState("STOPPED")){this._setState("idle");this.applyImage(this.getPoster(),this.pp.getMediaContainer().html(""));this._isPoster=true;this.elementReady=true}else{if(this.hasGUI){this.pp.env.playerDom.children().not(".ppdisplay").addClass("inactive").removeClass("active")}if(this.requiresFlash!==false){if(this.requiresFlash>this.pp.getFlashVersion()){this.setTestcard(6);return}}this._setState("awakening");this.elementReady=false;this._isPoster=false;this.applyMedia(this.pp.getMediaContainer().html("").show())}this.waitTillReady(e)},applyMedia:function(){},sendUpdate:function(e,t){this.pp._modelUpdateListener(e,t)},waitTillReady:function(e){var t=this;(function(){try{if(t.elementReady!==true){setTimeout(arguments.callee,70);return}}catch(n){}if(!t.getState("STOPPED")||e===true){try{t.addListeners()}catch(n){}}t.pp._modelUpdateListener("displayReady");if(e===true){if(t.pp.getIsMobileClient()){setTimeout(function(){t.setPlay()},500)}t.setPlay()}})()},addListeners:function(){},removeListeners:function(){try{this.mediaElement.unbind()}catch(e){}},detachMedia:function(){},destroy:function(){this.setPause();this.removeListeners();this.detachMedia();try{e("#"+this.mediaElement.id).empty()}catch(t){}try{e("#"+this.mediaElement.id).remove()}catch(t){}try{this.mediaElement.remove()}catch(t){}this.pp.getMediaContainer().html("");this.mediaElement=null;this.media.loadProgress=0;this.media.playProgress=0;this.media.position=0;this.media.duration=0;this._setState("stopped")},reInit:function(){if(this.requiresFlash===false||!e.browser.mozilla||this.getState("ERROR")||this.pp.getConfig("bypassFlashFFFix")===true){return}this.sendUpdate("FFreinit");this.removeListeners();this.displayItem(!this.getState("IDLE"))},applyCommand:function(e,t){switch(e){case"play":if(this.getState("ERROR")){break}if(this.getState("IDLE")){this._setState("awakening");this.displayItem(true);break}this.setPlay();break;case"pause":if(this.getState("ERROR")){break}this.setPause();break;case"volume":if(this.getState("ERROR")){break}if(!this.setVolume(t)){this._volume=t;this.sendUpdate("volume",t)}break;case"stop":this.setStop();break;case"seek":if(this.getState("ERROR")){break}if(this.media.loadProgress==-1){break}this.setSeek(t);break;case"fullscreen":this.sendUpdate("fullscreen",t);this.setFullscreen(t);this.reInit();break;case"resize":this.setResize();this.sendUpdate("resize",t);break}},setSeek:function(e){},setPlay:function(){},setPause:function(){},setStop:function(){this.detachMedia();this.destroy();this.displayItem(false)},setVolume:function(e){},setFullscreen:function(e){},setResize:function(){},getVolume:function(){if(this.mediaElement==null){return this._volume}return this.mediaElement.prop("muted")==true?0:this.mediaElement.prop("volume")},getLoadProgress:function(){return this.media.loadProgress||0},getLoadPlaybackProgress:function(){return this.media.playProgress||0},getPosition:function(){return this.media.position||0},getDuration:function(){return this.media.duration||0},getInFullscreen:function(){return this.pp.getInFullscreen()},getKbPerSec:function(){return this._KbPerSec},getState:function(e){var t=this._currentState==null?"IDLE":this._currentState;if(e!=null){return t==e.toUpperCase()}return t},getFile:function(){return this.media.file||null},getModelName:function(){return this.modelId||null},getHasGUI:function(){return this.hasGUI&&!this._isPoster},getIsReady:function(){return this.elementReady},getPoster:function(){return this.pp.getConfig("poster")},timeListener:function(e){if(e==undefined){return}var t=e.position!=undefined?e.position:e.currentTime,n=e.duration,r=t>0&&n>0?t*100/n:0;this.media.duration=this._roundNumber(n,2);this.media.position=this._roundNumber(t,2);this.media.playProgress=r;this.sendUpdate("time",this.media.position);this.loadProgressUpdate()},loadProgressUpdate:function(){try{var e=this.mediaElement[0];if(typeof e.buffered!=="object"){return}if(typeof e.buffered.length<=0){return}var t=Math.round(e.buffered.end(e.buffered.length-1)*100)/100,n=t*100/this.media.duration;if(n==this.media.loadProgress){return}this.media.loadProgress=this.allowRandomSeek===true?100:-1;this.media.loadProgress=this.media.loadProgress<100||this.media.loadProgress==undefined?n:100;this.sendUpdate("progress",this.media.loadProgress)}catch(r){}},progressListener:function(e,t){try{if(typeof this.mediaElement[0].buffered=="object"){if(this.mediaElement[0].buffered.length>0){this.mediaElement.unbind("progress");return}}}catch(n){}if(this._bandWidthTimer==null){this._bandWidthTimer=(new Date).getTime()}var r=0,i=0;if(!isNaN(e.loaded/e.total)){r=e.loaded;i=e.total}else{if(e.originalEvent&&!isNaN(e.originalEvent.loaded/e.originalEvent.total)){r=e.originalEvent.loaded;i=e.originalEvent.total}else{if(t&&!isNaN(t.loaded/t.total)){r=t.loaded;i=t.total}}}var s=r>0&&i>0?r*100/i:0;if(Math.round(s)>Math.round(this.media.loadProgress)){this._KbPerSec=r/1024/(((new Date).getTime()-this._bandWidthTimer)/1e3)}s=this.media.loadProgress!==100?s:100;s=this.allowRandomSeek===true?100:s;if(this.media.loadProgress!=s){this.media.loadProgress=s;this.sendUpdate("progress",s)}if(this.media.loadProgress>=100&&this.allowRandomSeek==false){this._setBufferState("full")}},endedListener:function(e){if(this.mediaElement===null){return}this._setState("completed")},waitingListener:function(e){this._setBufferState("empty")},canplayListener:function(e){this._setBufferState("full")},canplaythroughListener:function(e){this._setBufferState("full")},suspendListener:function(e){this._setBufferState("full")},playingListener:function(e){this._setState("playing")},startListener:function(e){this.applyCommand("volume",this.pp.getConfig("volume"));this._setState("playing")},pauseListener:function(e){this._setState("paused")},volumeListener:function(e){this.sendUpdate("volume",this.getVolume())},flashReadyListener:function(){this.elementReady=true},errorListener:function(e,t){try{switch(e.target.error.code){case e.target.error.MEDIA_ERR_ABORTED:this.setTestcard(1);break;case e.target.error.MEDIA_ERR_NETWORK:this.setTestcard(2);break;case e.target.error.MEDIA_ERR_DECODE:this.setTestcard(3);break;case e.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:this.setTestcard(4);break;default:this.setTestcard(5);break}}catch(n){}},metaDataListener:function(e){try{this.videoWidth=e.videoWidth;this.videoHeight=e.videoHeight}catch(t){}this._scaleVideo()},setTestcard:function(t,n){var r=this.pp.getMediaContainer(),i=this.pp.getConfig("messages"),s=i[t]!=undefined?i[t]:i[0];s=n!=undefined&&n!=""?n:s;if(this.pp.getItemCount()>1){s+=i[99]}if(s.length<3){s="ERROR"}if(t==100){s=""}s=this.pp.parseTemplate(s,e.extend({},this.media,{flashver:this.requiresFlash}));r.css({width:"100%",height:"100%"}).html("");this.mediaElement=e(document.createElement("div")).addClass("pptestcard").attr("id",this.pp.getId()+"_testcard_media").appendTo(r);if(s.length>0){e(document.createElement("p")).appendTo(this.mediaElement).html(s)}this._setState("error")},applyImage:function(t,n){var r=e(document.createElement("img")).hide(),i=this;if(t==""||t==undefined){r=e(document.createElement("span")).attr({id:this.pp.getMediaId()+"_image"}).appendTo(n);return r}r.appendTo(n).attr({id:this.pp.getMediaId()+"_image",src:t}).css({position:"absolute"});r.error(function(t){e(this).remove()});var s=function(e){e.realWidth=e.prop("width");e.realHeight=e.prop("height");e.width=function(){return e.realWidth};e.height=function(){return e.realHeight}};if(e.browser.msie){(function(){try{if(r[0].complete==true){r.show();s(r);i.stretch(i.pp.getConfig("imageScaling"),r,n.width(),n.height());return}setTimeout(arguments.callee,100)}catch(e){setTimeout(arguments.callee,100)}})()}else{r.load(function(t){e(this).show();s(r);i.stretch(i.pp.getConfig("imageScaling"),e(this),n.width(),n.height())})}var o=function(e,t){if(t.is(":visible")===false){i.pp.removeListener("fullscreen",arguments.callee)}i.stretch(i.pp.getConfig("imageScaling"),e,t.width(),t.height())};this.pp.addListener("fullscreen",function(){o(r,n)});this.pp.addListener("resize",function(){o(r,n)});return r},stretch:function(e,t,n,r,i,s){if(t==undefined||t==null){return false}if(t._originalDimensions===undefined){t._originalDimensions={};t._originalDimensions={width:t.width(),height:t.height()}}var o=i!==undefined?i:t._originalDimensions.width;var u=s!==undefined?s:t._originalDimensions.height;var a=n/o;var f=r/u;var l=n;var c=r;switch(e){case"fill":if(a>f){l=o*a;c=u*a}else{if(a<f){l=o*f;c=u*f}}break;case"aspectratio":default:if(a>f){l=o*f;c=u*f}else{if(a<f){l=o*a;c=u*a}}break}n=this._roundNumber(l/n*100,0);r=this._roundNumber(c/r*100,0);if(n==0||r==0){return false}t.css({margin:0,padding:0,width:n+"%",height:r+"%",left:(100-n)/2+"%",top:(100-r)/2+"%"});if(t._originalDimensions.width!=t.width()||t._originalDimensions.height!=t.height()){return true}return false},createFlash:function(e,t){this.mediaElement=this.pp.embeddFlash(t,e);this._waitforPlayer()},_waitforPlayer:function(){if(this.elementReady==true){return}var e=this;this._setBufferState("empty");(function(){try{if(e.mediaElement==undefined){setTimeout(arguments.callee,100)}else{if(e.mediaElement[e.flashVerifyMethod]==undefined){setTimeout(arguments.callee,100)}else{e._setBufferState("full");e.flashReadyListener()}}}catch(t){setTimeout(arguments.callee,100)}})()},_roundNumber:function(e,t){if(e<=0||isNaN(e)){return 0}return Math.round(e*Math.pow(10,t))/Math.pow(10,t)},_setState:function(e){e=e.toUpperCase();if(this._currentState!=e){if(this._currentState=="PAUSED"&&e=="PLAYING"){this.sendUpdate("resume",this.media)}if((this._currentState=="IDLE"||this._currentState=="AWAKENING")&&e=="PLAYING"){this.sendUpdate("start",this.media)}this._currentState=e.toUpperCase();this.sendUpdate("state",this._currentState)}},_setBufferState:function(e){if(this._currentBufferState!=e){this._currentBufferState=e.toUpperCase();this.sendUpdate("buffer",this._currentBufferState)}},_scaleVideo:function(e){var t=this.pp.getMediaContainer();if(this.pp.getIsMobileClient()){return}try{var n=t.width(),r=t.height(),i=this.videoWidth,s=this.videoHeight;if(this.stretch(this.pp.getConfig("videoScaling"),this.mediaElement,n,r,i,s)){this.sendUpdate("scaled",{realWidth:i,realHeight:s,displayWidth:n,displayHeight:r})}}catch(o){}}}});jQuery(function(e){$p.newModel({modelId:"NA",iLove:[{ext:"NaN",type:"none/none",platform:"all"}],hasGUI:true,applyMedia:function(e){if(this.pp.getConfig("enableTestcard")&&!this.pp.getIsMobileClient()){this.setTestcard(this.media.file!==""&&this.media.errorCode===7?5:this.media.errorCode);this.elementReady=true}else{this.elementReady=true;this.applyCommand("stop");window.location.href=this.media.file}},setPlay:function(){this.sendUpdate("start")},setPause:function(){if(this._hasEnded==false){this._hasEnded=true;this.sendUpdate("ended")}}})});jQuery(function(e){$p.newModel({modelId:"PLAYLIST",iLove:[{ext:"json",type:"text/json",platform:"internal"},{ext:"jsonp",type:"text/jsonp",platform:"internal"},{ext:"xml",type:"text/xml",platform:"internal"},{ext:"json",type:"application/json",platform:"internal"},{ext:"jsonp",type:"application/jsonp",platform:"internal"},{ext:"xml",type:"application/xml",platform:"internal"}],applyMedia:function(e){this.elementReady=true},setPlay:function(){this.sendUpdate("playlist",this.media.file)}})});jQuery(function(e){$p.newModel({modelId:"VIDEOFLASH",iLove:[{ext:"flv",type:"video/x-flv",platform:"flash",fixed:true},{ext:"flv",type:"video/flv",platform:"flash",fixed:true},{ext:"mp4",type:"video/mp4",platform:"flash",fixed:"maybe"},{ext:"mov",type:"video/quicktime",platform:"flash"},{ext:"m4v",type:"video/mp4",platform:"flash",fixed:"maybe"}],requiresFlash:9,allowRandomSeek:false,flashVerifyMethod:"api_get",_jarisVolume:0,applyMedia:function(e){var t={id:this.pp.getMediaId()+"_flash",name:this.pp.getMediaId()+"_flash",src:this.pp.getConfig("playerFlashMP4"),width:"100%",height:"100%",allowScriptAccess:"always",allowFullScreen:"true",allowNetworking:"all",wmode:"transparent",bgcolor:"#000000",FlashVars:{source:this.media.file,type:"video",streamtype:this.pp.getConfig("flashStreamType"),server:this.pp.getConfig("flashStreamType")=="rtmp"?this.pp.getConfig("flashRTMPServer"):"",autostart:"false",hardwarescaling:"true",controls:"false",jsapi:"true"}};switch(this.pp.getConfig("flashStreamType")){case"rtmp":case"http":this.allowRandomSeek=true;this.media.loadProgress=100;break}this.createFlash(t,e)},addListeners:function(){if(this.mediaElement==null){return}this.mediaElement.api_addlistener("onprogress","projekktor('"+this.pp.getId()+"').playerModel.progressListener");this.mediaElement.api_addlistener("ontimeupdate","projekktor('"+this.pp.getId()+"').playerModel.timeListener");if(this.getModelName().indexOf("VIDEO")>-1){this.mediaElement.api_addlistener("ondatainitialized","projekktor('"+this.pp.getId()+"').playerModel.metaDataListener")}if(this.getModelName().indexOf("AUDIO")>-1){this.mediaElement.api_addlistener("onconnectionsuccess","projekktor('"+this.pp.getId()+"').playerModel.startListener")}this.mediaElement.api_addlistener("onplaypause","projekktor('"+this.pp.getId()+"').playerModel._playpauseListener");this.mediaElement.api_addlistener("onplaybackfinished","projekktor('"+this.pp.getId()+"').playerModel.endedListener");this.mediaElement.api_addlistener("onmute","projekktor('"+this.pp.getId()+"').playerModel.volumeListener");this.mediaElement.api_addlistener("onvolumechange","projekktor('"+this.pp.getId()+"').playerModel.volumeListener");this.mediaElement.api_addlistener("onbuffering","projekktor('"+this.pp.getId()+"').playerModel.waitingListener");this.mediaElement.api_addlistener("onnotbuffering","projekktor('"+this.pp.getId()+"').playerModel.canplayListener");this.mediaElement.api_addlistener("onconnectionfailed","projekktor('"+this.pp.getId()+"').playerModel.errorListener")},removeListeners:function(){try{this.mediaElement.api_removelistener("*")}catch(e){}},_playpauseListener:function(e){if(e.isplaying){this.playingListener()}else{this.pauseListener()}},metaDataListener:function(e){this.startListener(e);try{this.videoWidth=e.width;this.videoHeight=e.height;this.sendUpdate("scaled",{width:this.videoWidth,height:this.videoHeight})}catch(t){}},setSeek:function(e){try{this.mediaElement.api_seek(e)}catch(t){}},setVolume:function(e){this._volume=e;try{this.mediaElement.api_volume(e)}catch(t){return false}return e},setPause:function(e){try{this.mediaElement.api_pause()}catch(t){}},setPlay:function(e){try{this.mediaElement.api_play()}catch(t){}},getVolume:function(){return this._jarisVolume},errorListener:function(e){this.setTestcard(4)},volumeListener:function(e){if(this._jarisVolume!=e.volume){this._jarisVolume=e.volume;this.sendUpdate("volume",e.volume)}},detachMedia:function(){try{e(this.mediaElement).remove()}catch(t){}}});$p.newModel({modelId:"AUDIOFLASH",iLove:[{ext:"mp3",type:"audio/mp3",platform:"flash"},{ext:"mp3",type:"audio/mpeg",platform:"flash"},{ext:"m4a",type:"audio/mp4",platform:"flash"}],applyMedia:function(t){this.imageElement=this.applyImage(this.pp.getConfig("cover")||this.pp.getConfig("poster"),t);var n=e("#"+this.pp.getMediaId()+"_flash_container");if(n.length==0){n=e(document.createElement("div")).css({width:"1px",height:"1px"}).attr("id",this.pp.getMediaId()+"_flash_container").appendTo(t)}var r={id:this.pp.getMediaId()+"_flash",name:this.pp.getMediaId()+"_flash",src:this.pp.getConfig("playerFlashMP3"),width:"1px",height:"1px",allowScriptAccess:"always",allowFullScreen:"true",allowNetworking:"all",wmode:"transparent",bgcolor:"#000000",FlashVars:{source:this.media.file,type:"audio",streamtype:this.pp.getConfig("flashStreamType"),server:this.pp.getConfig("flashStreamType")=="rtmp"?this.pp.getConfig("flashRTMPServer"):"",autostart:"false",hardwarescaling:"false",controls:"false",jsapi:"true"}};this.createFlash(r,n)}},"VIDEOFLASH")});jQuery(function(e){$p.newModel({modelId:"VIDEO",iLove:[{ext:"ogv",type:"video/ogg",platform:"native"},{ext:"webm",type:"video/webm",platform:"native"},{ext:"ogg",type:"video/ogg",platform:"native"},{ext:"anx",type:"video/ogg",platform:"native"},{ext:"mp4",type:"video/mp4",platform:"native",fixed:"maybe"}],allowRandomSeek:false,videoWidth:0,videoHeight:0,element:"video",init:function(e){if(this.pp.getIsMobileClient()&&this.element=="video"){this.hasGUI=true}this.ready()},applyMedia:function(t){this.elementReady=false;if(this.media.type.indexOf("/ogg")>-1||this.media.type.indexOf("/webm")>-1){this.allowRandomSeek=true}if(this.element=="audio"){this.imageElement=this.applyImage(this.pp.getConfig("cover")||this.pp.getConfig("poster"),t)}var n=this.element=="video"?t:e("body");n.append(e(document.createElement(this.element)).attr({id:this.pp.getMediaId()+"_html",poster:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABBJREFUeNpi/v//PwNAgAEACQsDAUdpTjcAAAAASUVORK5CYII=",loop:false,autoplay:true,"x-webkit-airplay":"allow"}).prop({controls:this.hasGUI&&this.element=="video",volume:this.getVolume()}).css({width:this.element=="video"?"100%":"1px",height:this.element=="video"?"100%":"1px",position:"absolute",top:0,left:0}));this.mediaElement=e("#"+this.pp.getMediaId()+"_html");for(var r in this.media.setup){if(this.media.setup[r].src){e(document.createElement("source")).appendTo(this.mediaElement).attr({src:this.media.setup[r].src,type:this.media.setup[r].type})}}this.waitforPlayer()},waitforPlayer:function(){if(this.elementReady==true){return}var t=this,n=e("#"+this.pp.getMediaId()+"_html");try{if(n==undefined){setTimeout(function(){t.waitforPlayer()},200);return}if(n[0].networkState==undefined){setTimeout(function(){t.waitforPlayer()},200);return}this.elementReady=true}catch(r){setTimeout(function(){t.waitforPlayer()},200);return}},addListeners:function(){var e=this;if(this.element=="video"){this.mediaElement.bind("loadedmetadata",function(){e.metaDataListener(this)})}this.mediaElement.bind("pause",function(){e.pauseListener(this)});this.mediaElement.bind("play",function(){e.playingListener(this)});this.mediaElement.bind("volumechange",function(){e.volumeListener(this)});this.mediaElement.bind("progress",function(t){e.progressListener(t,this)});this.mediaElement.bind("timeupdate",function(){e.timeListener(this)});this.mediaElement.bind("ended",function(){e.endedListener(this)});this.mediaElement.bind("waiting",function(){e.waitingListener(this)});this.mediaElement.bind("canplaythrough",function(){e.canplayListener(this)});this.mediaElement.bind("canplay",function(){e.canplayListener(this)});this.mediaElement.bind("error",function(t){e.errorListener(t,this)});this.mediaElement.bind("suspend",function(){e.suspendListener(this)})},updatePlayerInfo:function(){if(this.mediaElement==null){return}var e=this,t=this.mediaElement[0];if(this.getState()=="PLAYING"){switch(t.networkState){case t.NETWORK_EMPTY:break;case t.NETWORK_IDLE:break;case t.NETWORK_LOADING:break;case t.NETWORK_NO_SOURCE:this.setTestcard(4);break}}if("PAUSED|ERROR".indexOf(this.getState())==-1){setTimeout(function(){e.updatePlayerInfo()},500)}},detachMedia:function(){try{this.mediaElement[0].pause();e(this.mediaElement[0]).prop("src","");this.mediaElement[0].load()}catch(t){}},setPlay:function(){try{this.mediaElement[0].play()}catch(e){}this.updatePlayerInfo()},setPause:function(){try{this.mediaElement[0].pause()}catch(e){}},setVolume:function(e){this._volume=e;try{this.mediaElement.prop("volume",e)}catch(t){return false}return e},setSeek:function(e){try{this.mediaElement.prop("currentTime",e)}catch(t){}},setFullscreen:function(e){if(this.element=="audio"){return}this._scaleVideo()},setResize:function(){if(this.element=="audio"){return}this._scaleVideo(false)}});$p.newModel({modelId:"AUDIO",iLove:[{ext:"ogg",type:"audio/ogg",platform:"native"},{ext:"oga",type:"audio/ogg",platform:"native"},{ext:"mp3",type:"audio/mp3",platform:"native"}],imageElement:{},element:"audio"},"VIDEO")});jQuery(function(e){$p.newModel({modelId:"IMAGE",iLove:[{ext:"jpg",type:"image/jpeg",platform:"all"},{ext:"gif",type:"image/gif",platform:"all"},{ext:"png",type:"image/png",platform:"all"}],allowRandomSeek:true,_interval:null,_position:0,_duration:0,applyMedia:function(e){this.mediaElement=this.applyImage(this.media.file,e);this.elementReady=true;this._duration=this.pp.getConfig("duration")},setPlay:function(){var e=this;this._setBufferState("full");this.progressListener(100);this.playingListener();if(this._duration>0){this._interval=setInterval(function(){e._position=e._position+.5;if(e._position>e._duration){clearInterval(e._interval);e._setState("completed")}e.timeListener({duration:e._duration,position:e._position})},500)}else{e._setState("completed")}},detachMedia:function(){this._position=0;clearInterval(this._interval);this.mediaElement.remove()},setPause:function(){this.pauseListener();clearInterval(this._interval)},setSeek:function(e){if(e<this._duration){this._position=e}}});$p.newModel({modelId:"HTML",iLove:[{ext:"html",type:"text/html",platform:"all"}],applyMedia:function(t){var n=this;this.mediaElement=e(document.createElement("iframe")).attr({id:this.pp.getMediaId()+"_iframe",name:this.pp.getMediaId()+"_iframe",src:this.media.file,scrolling:"no",frameborder:"0",width:"100%",height:"100%"}).css({overflow:"hidden",border:"0px",width:"100%",height:"100%"}).appendTo(t);this.mediaElement.load(function(e){n.success()});this.mediaElement.error(function(e){n.remove()});this._duration=this.pp.getConfig("duration")},success:function(){this.elementReady=true},remove:function(){this.mediaElement.remove();this.elementReady=true}},"IMAGE")});jQuery(function(e){$p.newModel({modelId:"YTVIDEO",iLove:[{ext:"youtube.com",type:"video/youtube",platform:"flash",fixed:true}],modelReady:false,allowRandomSeek:true,useIframeAPI:true,_updateTimer:null,init:function(t){var n=this;this.useIframeAPI=this.pp.getConfig("useYTIframeAPI")||this.pp.getIsMobileClient();if(this.useIframeAPI!==true){this.requiresFlash=8;this.flashVerifyMethod="cueVideoById";this.ready();return}var r=this.pp.getId();if(window.ProjekktorYoutubePlayerAPIReady!==true){e.getScript("http://www.youtube.com/player_api");(function(){try{if(window.ProjekktorYoutubePlayerAPIReady==true){n.ready();return}setTimeout(arguments.callee,50)}catch(e){setTimeout(arguments.callee,50)}})()}else{this.ready()}window.onYouTubePlayerAPIReady=function(){window.ProjekktorYoutubePlayerAPIReady=true}},applyMedia:function(t){this._setBufferState("empty");var n=this;if(this.useIframeAPI===true){this.mediaElement=new YT.Player(this.pp.getId()+"_media",{width:this.pp.getIsMobileClient()?this.pp.config._width:"100%",height:this.pp.getIsMobileClient()?this.pp.config._height:"100%",playerVars:{autoplay:0,disablekb:1,start:0,controls:0,enablejsapi:1,wmode:"opaque"},videoId:this.youtubeGetId(),events:{onReady:function(e){n.onReady(e)},onStateChange:function(e){n.stateChange(e)},onError:function(e){n.errorListener(e)}}});e(this.mediaElement.a).prop("ALLOWTRANSPARENCY",true).attr({scrolling:"no",frameborder:0}).css({overflow:"hidden",border:"0px",display:"block"});if(e.browser.mozilla){this.requiresFlash=8}}else{var r={id:this.pp.getId()+"_media_youtube",name:this.pp.getId()+"_media_youtube",src:"http://www.youtube.com/apiplayer",width:"100%",height:"100%",bgcolor:"#000000",allowScriptAccess:"always",wmode:"transparent",FlashVars:{enablejsapi:1,autoplay:1}};this.createFlash(r,t)}},flashReadyListener:function(){this._youtubeResizeFix();this.addListeners();this.mediaElement.cueVideoById(this.youtubeGetId())},flashReinitListener:function(){this._youtubeResizeFix();this.addListeners();if(e.browser.mozilla){this.mediaElement.cueVideoById(this.youtubeGetId());if(this.getState()==="PLAYING"){this.setPlay()}}this.elementReady=true},_youtubeResizeFix:function(){e(this.mediaElement).attr({width:"99.99999%",height:"99.9999%"});this.applyCommand("volume",this.pp.getConfig("volume"))},addListeners:function(){if(this.useIframeAPI===true){return}this.mediaElement.addEventListener("onStateChange","projekktor('"+this.pp.getId()+"').playerModel.stateChange");this.mediaElement.addEventListener("onError","projekktor('"+this.pp.getId()+"').playerModel.errorListener")},setSeek:function(e){try{this.mediaElement.seekTo(e,true)}catch(t){}},setVolume:function(e){try{this.mediaElement.setVolume(e*100)}catch(t){}},setPause:function(e){try{this.mediaElement.pauseVideo()}catch(t){}},setPlay:function(e){try{this.mediaElement.playVideo()}catch(t){}},getVolume:function(){try{return this.mediaElement.getVolume()}catch(e){}return 0},getPoster:function(){return this.media.config.poster||this.pp.config.poster||"http://img.youtube.com/vi/"+this.youtubeGetId()+"/0.jpg"},errorListener:function(e){switch(e.data==undefined?e:e.data){case 100:this.setTestcard(500);break;case 101:case 150:this.setTestcard(501);break;case 2:this.setTestcard(502);break}},stateChange:function(e){clearTimeout(this._updateTimer);if(this.mediaElement===null){return}switch(e.data==undefined?e:e.data){case-1:this.setPlay();break;case 0:this.endedListener({});break;case 1:this._setBufferState("full");this.playingListener({});this.canplayListener({});this.updateInfo();break;case 2:this.pauseListener({});break;case 3:this.waitingListener({});break;case 5:if(this.useIframeAPI!==true){this.onReady()}break}},onReady:function(){this.setVolume(this.pp.getVolume());this.elementReady=true;if(this.media.title||this.pp.config.title||this.elementReady){return}var t=this;e.ajax({url:"http://gdata.youtube.com/feeds/api/videos/"+this.youtubeGetId()+"?v=2&alt=jsonc",complete:function(n,r){try{data=n.responseText;if(typeof data=="string"){data=e.parseJSON(data)}if(data.data.title){t.sendUpdate("config",{title:data.data.title+" ("+data.data.uploader+")"})}}catch(i){}t.elementReady=true}})},youtubeGetId:function(){return encodeURIComponent(this.media.file.replace(/^[^v]+v.(.{11}).*/,"$1"))},updateInfo:function(){var e=this;clearTimeout(this._updateTimer);(function(){if(e.mediaElement==null){clearTimeout(e._updateTimer);return}try{if(e.getState()!=="IDLE"&&e.getState()!=="COMPLETED"){e.timeListener({position:e.mediaElement.getCurrentTime(),duration:e.mediaElement.getDuration()});e.progressListener({loaded:e.mediaElement.getVideoBytesLoaded(),total:e.mediaElement.getVideoBytesTotal()})}}catch(t){}e._updateTimer=setTimeout(arguments.callee,500)})()}});$p.newModel({modelId:"YTAUDIO",iLove:[{ext:"youtube.com",type:"audio/youtube",platform:"flash",fixed:"maybe"}],applyMedia:function(e){this.imageElement=this.applyImage(this.pp.getConfig("cover")||this.pp.getConfig("poster"),e);this._setBufferState("empty");this.mediaElement=new YT.Player(this.pp.getId()+"_media",{width:"100px",height:"100px",playerVars:{autoplay:10,disablekb:1,start:0,controls:0,enablejsapi:1,playerapiid:this.pp.getId(),origin:location.host},videoId:this.youtubeGetId(),events:{onReady:"onReady"+this.pp.getId(),onStateChange:"onStateChange"+this.pp.getId(),onError:"onError"+this.pp.getId()}})}},"YTVIDEO")});var projekktorControlbar=function(){};jQuery(function(e){projekktorControlbar.prototype={_cTimer:null,_noCHide:false,_cFading:false,_vSliderAct:false,_storeVol:0,_timeTags:{},cb:null,cbFS:null,_pos:{left:0,right:0},controlElements:{},controlElementsConfig:{cb:null,playhead:{on:null,call:null},loaded:{on:"click",call:"scrubberClk"},scrubber:{on:"click",call:"scrubberClk"},play:{on:"click",call:"playClk"},pause:{on:"click",call:"pauseClk"},stop:{on:"click",call:"stopClk"},prev:{on:"click",call:"prevClk"},next:{on:"click",call:"nextClk"},rewind:{on:"click",call:"rewindClk"},forward:{on:"click",call:"forwardClk"},fsexit:{on:"click",call:"exitFullscreenClk"},fsenter:{on:"click",call:"enterFullscreenClk"},vslider:{on:"click",call:"vsliderClk"},vmarker:{on:"click",call:"vsliderClk"},vknob:{on:"mousedown",call:"vknobStartDragListener"},mute:{on:"click",call:"muteClk"},unmute:{on:"click",call:"unmuteClk"},vmax:{on:"click",call:"vmaxClk"},open:{on:"click",call:"openCloseClk"},close:{on:"click",call:"openCloseClk"},loopon:{on:"click",call:"loopClk"},loopoff:{on:"click",call:"loopClk"},draghandle:{on:"mousedown",call:"handleStartDragListener"},controls:{on:null,call:null},title:null,sec_dur:null,min_dur:null,hr_dur:null,sec_elp:null,min_elp:null,hr_elp:null,sec_rem:null,min_rem:null,hr_rem:null},config:{disableFade:false,fadeDelay:2500,showOnStart:false,controlsTemplate:"<div %{fsexit}></div><div %{fsenter}></div><div %{play}></div><div %{pause}></div><div %{prev}></div><div %{next}></div><div %{title}></div><div %{timeleft}>%{min_elp}:%{sec_elp} | %{min_dur}:%{sec_dur}</div><div %{scrubber}><div %{loaded}></div><div %{playhead}></div></div><div %{vslider}><div %{vmarker}></div><div %{vknob}></div></div><div %{mute}></div><div %{vmax}></div>",controlsTemplateFull:null,toggleMute:false},initialize:function(){var t=this,n=this.playerDom.html(),r=true,i=this.getConfig("cssClassPrefix");for(var s in this.controlElementsConfig){if(n.match(new RegExp(i+s,"gi"))){r=false;break}}if(r){this.cb=this.applyToPlayer(e(document.createElement("div")).addClass("controls"));this.cbFS=this.applyToPlayer(e(document.createElement("div")).addClass("controls").addClass("fullscreen").removeClass("active").addClass("inactive"));this.applyTemplate(this.cb,this.getConfig("controlsTemplate"));this.applyTemplate(this.cbFS,this.getConfig("controlsTemplateFull")||this.getConfig("controlsTemplate"))}else{this.cb=this.playerDom.find("."+i+"controls:not(.fullscreen)");this.cbFS=this.playerDom.children("."+i+"controls.fullscreen");if(this.cbFS.length==0){this.cbFS=this.cb}}for(var s in this.controlElementsConfig){this.controlElements[s]=e(this.playerDom).find("."+i+s);this.blockSelection(this.controlElements[s])}this.addGuiListeners();this._storeVol=this.getConfig("volume");this.drawUpdateControls();this.hidecb(true);this.pluginReady=true},applyTemplate:function(t,n){var r=this,i=this.getConfig("cssClassPrefix");if(n){var s=n.match(/\%{[a-zA-Z_]*\}/gi);if(s!=null){e.each(s,function(e,t){var r=t.replace(/\%{|}/gi,"");if(t.match(/\_/gi)){n=n.replace(t,'<span class="'+i+r+'"></span>')}else{n=n.replace(t,'class="'+i+r+'"')}})}t.html(n)}},itemHandler:function(e){this.pluginReady=true;this.hidecb(true)},startHandler:function(){if(this.getConfig("showOnStart")==true){this.showcb(true)}else{this.hidecb(true)}},readyHandler:function(e){clearTimeout(this._cTimer);this.cb.removeClass("fade");this.cbFS.removeClass("fade");if(this.getConfig("disableFade")!=true){this.cb.addClass("fade");this.cbFS.addClass("fade")}this.pluginReady=true},drawUpdateControls:function(){var e=this,t=this.pp.getState();clearTimeout(this._cTimer);if(this.pp.getHasGUI()){return}if(this.getConfig("controls")==false){this.hidecb(true);return}var n=this.pp.getItemCount()<2||this.getConfig("disallowSkip");if(!n){this.controlElements.prev.removeClass("inactive").addClass("active");this.controlElements.next.removeClass("inactive").addClass("active")}else{this.controlElements.prev.removeClass("active").addClass("inactive");this.controlElements.next.removeClass("active").addClass("inactive")}if(this.pp.getItemIdx()<1){this.controlElements.prev.removeClass("active").addClass("inactive")}if(this.pp.getItemIdx()>=this.pp.getItemCount()-1){this.controlElements.next.removeClass("active").addClass("inactive")}if(this.getConfig("disablePause")){this.controlElements.pause.removeClass("active").addClass("inactive");this.controlElements.play.removeClass("active").addClass("inactive")}else{if(t==="PLAYING"){this.drawPauseButton()}if(t==="PAUSED"){this.drawPlayButton()}if(t==="IDLE"){this.drawPlayButton()}}if(t=="IDLE"){this.controlElements.stop.removeClass("active").addClass("inactive")}else{this.controlElements.stop.removeClass("inactive").addClass("active")}if(t=="IDLE"){this.controlElements.forward.removeClass("active").addClass("inactive");this.controlElements.rewind.removeClass("active").addClass("inactive")}else{this.controlElements.forward.removeClass("inactive").addClass("active");this.controlElements.rewind.removeClass("inactive").addClass("active")}if(this.pp.getInFullscreen()===true){this.drawExitFullscreenButton()}else{this.drawEnterFullscreenButton()}if(!this.getConfig("enableFullscreen")){this.controlElements.fsexit.removeClass("active").addClass("inactive");this.controlElements.fsenter.removeClass("active").addClass("inactive")}if(this.pp.config._loop!=true){this.controlElements.loopoff.removeClass("active").addClass("inactive");this.controlElements.loopon.removeClass("inactive").addClass("active")}else{this.controlElements.loopoff.removeClass("inactive").addClass("active");this.controlElements.loopon.removeClass("active").addClass("inactive")}this.drawTitle();this.drawUpdateTimeDisplay();this.drawUpdateVolumeDisplay(this.pp.getVolume()||this._storeVol)},stateHandler:function(e){this.drawUpdateControls();if("STOPPED|AWAKENING|IDLE".indexOf(e)>-1){this.drawUpdateTimeDisplay(0,0,0);this.drawUpdateProgressDisplay(0)}else{this.drawUpdateProgressDisplay()}},scheduleModifiedHandler:function(){if(this.pp.getState()==="IDLE"){return}this.drawUpdateControls();this.drawUpdateTimeDisplay();this.drawUpdateProgressDisplay()},volumeHandler:function(e){this.drawUpdateVolumeDisplay(e)},progressHandler:function(e){this.drawUpdateProgressDisplay()},timeHandler:function(e){this.drawUpdateTimeDisplay();this.drawUpdateProgressDisplay()},fullscreenHandler:function(e){var t=this,n=this.getConfig("cssClassPrefix");this._noCHide=false;this._cFading=false;this._vSliderAct=false;clearTimeout(this._cTimer);if(!this.getConfig("controls")){return}if(!this.getConfig("enableFullscreen")){return}if(this.pp.getInFullscreen()===true){this.playerDom.children("."+n+"controls:not(.fullscreen)").stop(true,true).removeClass("active").addClass("inactive").css("display","");this.playerDom.children("."+n+"controls.fullscreen").stop(true,true).removeClass("inactive").addClass("active").css("display","")}else{this.playerDom.children("."+n+"controls:not(.fullscreen)").stop(true,true).removeClass("inactive").addClass("active").css("display","");this.playerDom.children("."+n+"controls.fullscreen").stop(true,true).removeClass("active").addClass("inactive").css("display","")}this.drawUpdateControls();if(this.pp.getState()=="IDLE"){this.hidecb(true)}else{this._cTimer=setTimeout(function(){t.hidecb()},this.getConfig("fadeDelay"))}},addGuiListeners:function(){var t=this;e.each(this.controlElementsConfig,function(e,n){if(!n){return}if(n.on!=null){t.controlElements[e][n.on](function(r){t.clickCatcher(r,n.call,t.controlElements[e])})}});this.cbFS.mouseenter(function(e){t.controlsMouseEnterListener(e)});this.cbFS.mouseleave(function(e){t.controlsMouseLeaveListener(e)});this.cb.mouseenter(function(e){t.controlsMouseEnterListener(e)});this.cb.mouseleave(function(e){t.controlsMouseLeaveListener(e)})},clickCatcher:function(t,n,r){if(e.browser.msie){t.cancelBubble=true}else{t.stopPropagation()}if(!r.hasClass("inactive")){this[n](t,r)}return false},drawTitle:function(){this.controlElements.title.html(this.getConfig("title",""))},hidecb:function(t){clearTimeout(this._cTimer);var n=this.getConfig("cssClassPrefix"),r=this.pp.getInFullscreen()===true?this.cbFS:this.cb,i=this;if(r==null){return}r.stop(true,true);if(this._noCHide==true){return}if(!r.is(":visible")){return}if(t===true){this._cFading=false;r.removeClass("active").addClass("inactive").css("display","");return}if(this.getConfig("controls")==false||this.pp.getHasGUI()||!r.hasClass("fade")){r.removeClass("active").addClass("inactive");return}r.fadeOut("slow",function(){e(this).removeClass("active").addClass("inactive").css("display","");i._cFading=false})},showcb:function(t){clearTimeout(this._cTimer);if(this.pp.getHasGUI()||this.getConfig("controls")==false){r.removeClass("active").addClass("inactive").css("display","");return}var n=this,r=this.pp.getInFullscreen()===true?this.cbFS:this.cb,i=this.getConfig("cssClassPrefix");if(r==null){return}if("IDLE|AWAKENING|ERROR".indexOf(this.pp.getState())>-1&&t!=true){return}r.stop(true,true);if(!r.hasClass("fade")||t==true){r.removeClass("inactive").addClass("active").css("display","");return}if(r.is(":visible")||this._cFading==true){this._cTimer=setTimeout(function(){n.hidecb()},this.getConfig("fadeDelay"));return}this._cFading=true;r.fadeIn("slow",function(){n._cFading=false;e(this).removeClass("inactive").addClass("active").css("display","")})},drawUpdateTimeDisplay:function(t,n,r){if(this.pp.getHasGUI()){return}try{var i=t!=undefined?t:this.pp.getLoadPlaybackProgress(),s=n!=undefined?n:this.pp.getDuration(),o=r!=undefined?r:this.pp.getPosition()}catch(u){var i=t||0,s=n||0,o=r||0}this.controlElements.playhead.css("width",i+"%");var a=e.extend({},this._clockDigits(s,"dur"),this._clockDigits(o,"elp"),this._clockDigits(s-o,"rem"));e.each(this.controlElements,function(t,n){if(a[t]){e.each(n,function(){e(this).html(a[t])})}})},drawUpdateProgressDisplay:function(){this.controlElements.loaded.css("width",this.pp.getLoadProgress()+"%")},drawUpdateVolumeDisplay:function(e){if(this._vSliderAct==true){return}if(e==undefined){return}clearTimeout(this._cTimer);var t=this.pp.getInFullscreen()===true?this.cbFS:this.cb,n=t.is(":visible"),r=this,i=this.controlElements.mute.hasClass("toggle")||this.controlElements.unmute.hasClass("toggle")||this.getConfig("toggleMute"),s=t.find("."+this.getConfig("cssClassPrefix")+"vknob"),o=t.find("."+this.getConfig("cssClassPrefix")+"vslider");t.stop(true,true).show();switch(e){case 0:s.css("left",0);break;case 1:s.css("left",o.width()-s.width()/2+"px");break;default:s.css("left",e*(o.width()-s.width()/2)+"px");break}if(i){if(e){this.controlElements.mute.removeClass("inactive").addClass("active");this.controlElements.unmute.removeClass("active").addClass("inactive")}else{this.controlElements.mute.removeClass("active").addClass("inactive");this.controlElements.unmute.removeClass("inactive").addClass("active");this.controlElements.vmax.removeClass("inactive").addClass("active")}if(e==1){this.controlElements.vmax.removeClass("active").addClass("inactive")}else{this.controlElements.vmax.removeClass("inactive").addClass("active")}}else{this.controlElements.vmax.removeClass("inactive").addClass("active");this.controlElements.unmute.removeClass("inactive").addClass("active");this.controlElements.mute.removeClass("inactive").addClass("active")}this.controlElements.vmarker.css("width",e*100+"%");this._cTimer=setTimeout(function(){r.hidecb()},this.getConfig("fadeDelay"));if(!n){t.hide()}},drawPauseButton:function(e){this.controlElements.pause.removeClass("inactive").addClass("active");this.controlElements.play.removeClass("active").addClass("inactive")},drawPlayButton:function(e){this.controlElements.pause.removeClass("active").addClass("inactive");this.controlElements.play.removeClass("inactive").addClass("active")},drawEnterFullscreenButton:function(e){this.controlElements.fsexit.removeClass("active").addClass("inactive");this.controlElements.fsenter.removeClass("inactive").addClass("active")},drawExitFullscreenButton:function(e){this.controlElements.fsexit.removeClass("inactive").addClass("active");this.controlElements.fsenter.removeClass("active").addClass("inactive")},playClk:function(e){this.pp.setPlay()},pauseClk:function(e){this.pp.setPause()},stopClk:function(e){this.pp.setStop()},controlsMouseEnterListener:function(e){this._noCHide=true},controlsMouseLeaveListener:function(e){this._noCHide=false},controlsClk:function(e){},mousemoveHandler:function(e){this.showcb()},prevClk:function(e){this.pp.setActiveItem("previous")},nextClk:function(e){this.pp.setActiveItem("next")},forwardClk:function(e){this.pp.setPlayhead("+10")},rewindClk:function(e){this.pp.setPlayhead("-10")},muteClk:function(e){this._storeVol=this.pp.getVolume()==0?this.getConfig("volume"):this.pp.getVolume();this.pp.setVolume(0)},unmuteClk:function(e){if(this._storeVol<=0){this._storeVol=1}this.pp.setVolume(this._storeVol)},vmaxClk:function(e){this.pp.setVolume(1)},enterFullscreenClk:function(e){this.pp.setFullscreen(true)},exitFullscreenClk:function(e){this.pp.setFullscreen(false)},openCloseClk:function(t){var n=this;e(e(t.currentTarget).attr("class").split(/\s+/)).each(function(e,t){if(t.indexOf("toggle")==-1){return}n.playerDom.find("."+t.substring(6)).slideToggle("slow",function(){n.pp.setResize()});n.controlElements.open.toggle();n.controlElements.close.toggle()})},loopClk:function(t){if(e.inArray(this.getConfig("cssClassPrefix")+"loopon",e(t.currentTarget).attr("class").split(/\s+/))>-1){this.pp.config._loop=true}else{this.pp.config._loop=false}this.drawUpdateControls()},startClk:function(e){this.pp.setPlay()},scrubberClk:function(t){var n=0;if(this.getConfig("disallowSkip")==true){return}var r=this.pp.getInFullscreen()===true&&this.controlElements.vslider.length>1?1:0,i=e(this.controlElements.scrubber[r]).width(),s=e(this.controlElements.loaded[r]).width(),o=t.pageX-e(this.controlElements.scrubber[r]).offset().left;if(o<0||o=="NaN"||o==undefined){n=0}else{if(s!=undefined){if(o>s){o=s-1}n=o*100/i*this.pp.getDuration()/100*1}}this.pp.setPlayhead(n)},vmarkerClk:function(e){vsliderClk(e)},vsliderClk:function(t){if(this._vSliderAct==true){return}var n=this.pp.getInFullscreen()===true&&this.controlElements.vslider.length>1?1:0,r=e(this.controlElements.vslider[n]),i=r.width(),s=t.pageX-r.offset().left;if(s<0||s=="NaN"||s==undefined){result=0}else{result=s/i}this.pp.setVolume(result);this._storeVol=result},vknobStartDragListener:function(t,n){this._vSliderAct=true;var r=this,i=this.pp.getInFullscreen()===true&&this.controlElements.vslider.length>1?1:0,s=e(n[i]),o=e(this.controlElements.vslider[i]),u=Math.abs(parseInt(s.position().left)-t.clientX),a=0,f=function(t){if(e.browser.msie){t.cancelBubble=true}else{t.stopPropagation()}r.playerDom.unbind("mouseup",f);o.unbind("mousemove",l);o.unbind("mouseup",f);s.unbind("mousemove",l);s.unbind("mouseup",f);r._vSliderAct=false;return false},l=function(t){clearTimeout(r._cTimer);if(e.browser.msie){t.cancelBubble=true}else{t.stopPropagation()}var n=t.clientX-u;n=n>o.width()-s.width()/2?o.width()-s.width()/2:n;n=n<0?0:n;s.css("left",n+"px");a=Math.abs(n/(o.width()-s.width()/2));r.pp.setVolume(a);r._storeVol=a;e(r.controlElements.vmarker[i]).css("width",a*100+"%");return false};this.playerDom.mouseup(f);o.mousemove(l);o.mouseup(f);s.mousemove(l);s.mouseup(f)},handleStartDragListener:function(t,n){var r=this;var i=Math.abs(parseInt(this.cb.position().left)-t.clientX);var s=Math.abs(parseInt(this.cb.position().top)-t.clientY);var o=function(t){if(e.browser.msie){t.cancelBubble=true}else{t.stopPropagation()}r.playerDom.unbind("mouseup",o);r.playerDom.unbind("mouseout",o);r.playerDom.unbind("mousemove",u);return false};var u=function(t){if(e.browser.msie){t.cancelBubble=true}else{t.stopPropagation()}clearTimeout(r._cTimer);var n=t.clientX-i;n=n>r.playerDom.width()-r.cb.width()?r.playerDom.width()-r.cb.width():n;n=n<0?0:n;r.cb.css("left",n+"px");var o=t.clientY-s;o=o>r.playerDom.height()-r.cb.height()?r.playerDom.height()-r.cb.height():o;o=o<0?0:o;r.cb.css("top",o+"px");return false};this.playerDom.mousemove(u);this.playerDom.mouseup(o)},errorHandler:function(e){this.hidecb(true)},_clockDigits:function(e,t){if(e<0||isNaN(e)||e==undefined){e=0}var n=Math.floor(e/(60*60));var r=e%(60*60);var i=Math.floor(r/60);var s=r%60;var o=Math.floor(s);var u={};u["min_"+t]=i<10?"0"+i:i;u["sec_"+t]=o<10?"0"+o:o;u["hr_"+t]=n<10?"0"+n:n;return u}}});var projekktorDisplay=function(){};jQuery(function(e){projekktorDisplay.prototype={logo:null,logoIsFading:false,display:null,displayClicks:0,buffIcn:null,buffIcnSprite:null,bufferDelayTimer:null,bufferIconDelay:1,config:{onclick:{callback:"setPlayPause",value:null},onclick_playing:{callback:"setPlayPause",value:null},ondblclick:{callback:"setFullscreen",value:null},bufferIconDelay:200,spriteUrl:"",spriteWidth:50,spriteHeight:50,spriteTiles:25,spriteOffset:1,spriteCountUp:false,logoImage:"",logoDelay:0,logoPosition:"tl",onlogoclick:{callback:"",value:{url:"",target:"_blank",pause:true}}},initialize:function(){var t=this;var n={position:"absolute",overflow:"hidden",height:"100%",width:"100%",top:0,left:0,padding:0,margin:0,display:"block"};this.startButton=this.applyToPlayer(e(document.createElement("div")).addClass("start")).addClass("inactive");this.buffIcn=this.applyToPlayer(e(document.createElement("div")).addClass("buffering")).addClass("inactive");if(this.config.spriteUrl!=""){this.buffIcnSprite=e(document.createElement("div")).appendTo(this.buffIcn).css({width:this.config.spriteWidth,height:this.config.spriteHeight,marginLeft:(this.buffIcn.width()-this.config.spriteWidth)/2+"px",marginTop:(this.buffIcn.height()-this.config.spriteHeight)/2+"px",backgroundColor:"transparent",backgroundImage:"url("+this.config.spriteUrl+")",backgroundRepeat:"no-repeat",backgroundPosition:"0 0"}).addClass("inactive")}this.display=this.applyToPlayer(e(document.createElement("div")).addClass("display").css(n));this.pp.getMediaContainer();this.logo=this.applyToPlayer(e(document.createElement("img")).addClass("logo").addClass("inactive").attr("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABBJREFUeNpi/v//PwNAgAEACQsDAUdpTjcAAAAASUVORK5CYII=").css("position","absolute").css(this.getConfig("logoPosition").indexOf("r")>-1?"right":"left","2%").css(this.getConfig("logoPosition").indexOf("t")>-1?"top":"bottom","2%"));this.pluginReady=true},displayReadyHandler:function(){var e=this;this.startButton.unbind();this.startButton.click(function(){e.pp.setPlay()})},bufferHandler:function(e){if(e=="EMPTY"){this.showBufferIcon()}else{this.hideBufferIcon()}},stateHandler:function(e){if(e==="IDLE"){this.startButton.addClass("active").removeClass("inactive")}else{this.startButton.addClass("inactive").removeClass("active")}if(e=="AWAKENING"||e=="COMPLETED"||e=="ERROR"){this.hideBufferIcon()}if(e=="ERROR"||e==="STOPPED"){this.logo.addClass("inactive").removeClass("active")}},stoppedHandler:function(){this.hideBufferIcon()},scheduleLoadingHandler:function(){this.startButton.addClass("inactive").removeClass("active");this.showBufferIcon()},scheduledHandler:function(){if(!this.getConfig("autoplay")){this.startButton.addClass("active").removeClass("inactive")}this.hideBufferIcon()},itemHandler:function(){var e=this;this.hideBufferIcon();this.logoIsFading=false;this.logo.stop(true,true).addClass("inactive").removeClass("active").unbind();if(this.getConfig("logoImage")!=false){this.logo.attr("src",this.getConfig("logoImage")).css({cursor:this.getConfig("logoURL")!=""?"pointer":"normal"}).click(function(){try{e.pp[e.getConfig("onlogoclick").callback](e.getConfig("onlogoclick").value)}catch(t){}return false})}else{this.logo.attr("src","").addClass("inactive").removeClass("active")}},timeHandler:function(){if(this.getConfig("logoImage")==false){return}if(this.pp.getIsMobileClient()){return}var t=this.pp.getPosition(),n=this.pp.getDuration(),r=this;if(!this.logo.is(":visible")&&!this.logoIsFading&&t+this.config.logoDelay<n){if(t>this.config.logoDelay&&n>this.config.logoDelay*2){this.logoIsFading=true;this.logo.fadeIn("slow",function(){r.logoIsFading=false;e(this).addClass("active").removeClass("inactive").css("display","")})}}if(this.logo.is(":visible")&&!this.logoIsFading){if(t+this.config.logoDelay>n){this.logoIsFading=true;this.logo.fadeOut("slow",function(){e(this).addClass("inactive").removeClass("active").css("display","");r.logoIsFading=false})}}},leftclickHandler:function(t){var n=this;if(e(t.target).attr("id").indexOf("_media")==-1){return}if(this.pp.getState()=="ERROR"){this.pp.setActiveItem("next");return}if(this.pp.getHasGUI()==true){return}this.displayClicks++;if(this.displayClicks>0){setTimeout(function(){if(n.displayClicks==1){if(n.pp.getState()=="PLAYING"){try{n.pp[n.getConfig("onclick_playing").callback](n.getConfig("onclick_playing").value)}catch(e){}}else{try{n.pp[n.getConfig("onclick").callback](n.getConfig("onclick").value)}catch(e){}}}else{if(n.displayClicks==2){try{n.pp[n.getConfig("ondblclick").callback](n.getConfig("ondblclick").value)}catch(e){}}}n.displayClicks=0},250)}return},hideBufferIcon:function(){var t=this;clearTimeout(this.bufferDelayTimer);this.buffIcn.stop(true,true);this.buffIcn.fadeOut("fast",function(){e(this).addClass("inactive").removeClass("active").css("display","")})},showBufferIcon:function(e){var t=this;clearTimeout(this.bufferDelayTimer);if(this.pp.getHasGUI()){return}if(this.pp.getModel()==="YTAUDIO"||this.pp.getModel()==="YTVIDEO"){e=true}if(e!=true&&this.config.bufferIconDelay>0){this.bufferDelayTimer=setTimeout(function(){t.showBufferIcon(true)},t.config.bufferIconDelay);return}this.buffIcn.stop(true,true);if(this.buffIcn.hasClass("active")){return}this.buffIcn.fadeIn("fast",function(){if(t.buffIcnSprite==null){return}var e=t.config.spriteCountUp==true?0:(t.config.spriteHeight+t.config.spriteOffset)*t.config.spriteTiles;t.buffIcnSprite.addClass("active").removeClass("inactive").css("display","");(function(){if(!t.buffIcn.is(":visible")){return}t.buffIcnSprite.css("backgroundPosition","0px -"+e+"px");if(t.config.spriteCountUp==true){e+=t.config.spriteHeight+t.config.spriteOffset}else{e-=t.config.spriteHeight+t.config.spriteOffset}if(e>=t.config.spriteHeight*t.config.spriteTiles){e=0}setTimeout(arguments.callee,60)})()})}}});projekktorConfig.prototype={_cookieName:"qwprojekktor",_cookieExpiry:356,_plugins:["Display","Controlbar"],_addplugins:[],_reelParser:function(e){return e},_cssClassPrefix:"pp",_platformPriority:["native","flash"],_bypassFlashFFFix:false,_iframe:false,_loop:false,_autoplay:false,_continuous:true,_playlist:[],_theme:false,_themeRepo:"http://www.projekktorxl.com/themegen/api/themes/live/format/jsonp/id/%{id}/version/%{ver}",_messages:{0:"An error occurred.",1:"You aborted the media playback. ",2:"A network error caused the media download to fail part-way. ",3:"The media playback was aborted due to a corruption problem. ",4:"The media (%{file}) could not be loaded because the server or network failed.",5:"Sorry, your browser does not support the media format of the requested file (%{type}).",6:"Your client is in lack of the Flash Plugin V%{flashver} or higher.",7:"No media scheduled.",8:"! Invalid media model configured !",9:"File (%{file}) not found.",97:"No media scheduled.",98:"Invalid or malformed playlist data!",99:"Click display to proceed. ",500:"This Youtube video has been removed or set to private",501:"The Youtube user owning this video disabled embedding.",502:"Invalid Youtube Video-Id specified."},_debug:false,_width:0,_height:0,_minHeight:40,_minWidth:40,ID:0,title:null,poster:false,controls:false,start:false,stop:false,volume:.5,cover:"",disablePause:false,disallowSkip:false,fixedVolume:false,imageScaling:"aspectratio",videoScaling:"aspectratio",playerFlashMP4:"jarisplayer.swf",playerFlashMP3:"jarisplayer.swf",flashStreamType:"file",flashRTMPServer:"",useYTIframeAPI:false,enableFlashFallback:true,enableNativePlayback:true,enableKeyboard:true,enableFullscreen:true,enableTestcard:true,duration:0,className:""};(function(e){function t(t,n,r,i,s){function o(){c[0].play()}function u(){c.triggerHandler("ready");c.triggerHandler("buffer")}function a(){c.unbind("click",o).detach().empty();c=undefined}function f(e,t){c.bind(e,t)}function l(e,t){c.unbind(e,t)}var c;c=e('<video controls autobuffer height="'+r+'" width="'+n+'" poster="'+(s?s:"")+'"></video>');for(var h in i){if(typeof h==="string"){c.append('<source src="'+i[h].src+'" type="'+i[h].type+'">')}}c.bind("click",o);t.append(c);setTimeout(u,100);e.extend(this,{destroy:a,addListener:f,removeListener:l})}function n(t,n){function s(){switch(n.type){case"youtube":e.pixelentity.youtube(a);break;case"vimeo":e.pixelentity.vimeo(l);break;case"vidly":o(["http://vid.ly/"+n.videoId+"?content=video&format=mp4","http://vid.ly/"+n.videoId+"?content=video&format=webm","http://vid.ly/"+n.videoId+"?content=video&format=ogv"],n.poster);break;case"local":o(n.videoId,n.poster);break}}function o(t,s){var o={};for(var a=0;a<t.length;a++){o[a]={src:t[a],type:e.pixelentity.video.getType(t[a])}}if(n.useVideoTag){m=new e.pixelentity.video.SimplePlayer(v,n.width,n.height,o,s)}else{i++;var f="pe_local_player_"+i;var l=e('<div id="'+f+'"/>').css({"background-color":"black",width:n.width,height:n.height});v.html(l[0]);m=new projekktor("#"+f,{disableFade:n.disableFade,controls:true,volume:.9,_width:n.width,_height:n.height,_autoplay:true,enableFullscreen:false,imageScaling:"fill",videoScaling:"aspectratio",poster:s,playerFlashMP4:e.pixelentity.video.fallbackPlayer,playerFlashMP3:e.pixelentity.video.fallbackPlayer,playlist:[o]})}m.addListener(r?"ready":"buffer",u)}function u(e){if(r){setTimeout(f,100);m.removeListener("ready",u)}else{if(e=="FULL"||n.useVideoTag){m.removeListener("buffer",u);f()}}}function a(t){var r=e("<div/>");v.append(r);m=new t(r[0],{height:n.height,width:n.width,videoId:n.videoId,playerVars:{theme:"dark",wmode:"opaque",autohide:1,enablejsapi:1,origin:location.href.match(/:\/\/(.[^\/]+)/)[1],loop:n.loop?1:0,hd:n.hd?1:0,autoplay:n.autoPlay?1:0,showinfo:0,iv_load_policy:3,modestbranding:1,showsearch:0,fs:0},events:{onStateChange:h,onReady:f}});g=setInterval(h,250);if(e.browser.msie&&e.browser.version<8){setTimeout(f,1e3)}}function f(){if(!y){d.trigger("video_ready.pixelentity");y=true}}function l(t){m=new t(v[0],{height:n.height,width:n.width,videoId:n.videoId,playerVars:{autohide:0,origin:location.href.match(/:\/\/(.[^\/]+)/)[1],loop:n.loop?1:0,autoplay:n.autoPlay?1:0}});e(m).one("video_ready.pixelentity",f).one("video_ended.pixelentity",c)}function c(){d.trigger("video_ended.pixelentity")}function h(){if(!m){return}if(m.getPlayerState){switch(m.getPlayerState()){case YT.PlayerState.ENDED:d.trigger("video_ended.pixelentity");break;case YT.PlayerState.PLAYING:if(m.getDuration()-m.getCurrentTime()<.4){d.trigger("video_ended.pixelentity")}break}}}function p(e,t){if(m&&m.setSize){m.setSize({width:e,height:t})}}var d=e(this);var v=t;var m;var g;var y=false;e.extend(this,{resize:p,bind:function(e,t){d.bind(e,t)},unbind:function(e,t){d.bind(e,t)},one:function(e,t){d.one(e,t)},destroy:function(){clearInterval(g);if(d){d.remove()}d=undefined;if(m){e(m).unbind("video_ended.pixelentity");switch(n.type){case"vidly":case"local":if(m.removeListener){m.removeListener(r?"ready":"buffer",u)}if(n.useVideoTag){if(m.destroy){m.destroy()}}else{if(m.selfDestruct){m.selfDestruct()}}break;default:if(m.destroy){m.destroy()}}}m=undefined;v.data("peVideo",null);v=undefined}});s()}e.pixelentity=e.pixelentity||{version:"1.0.0"};e.pixelentity.video={conf:{disableFade:false,useVideoTag:false},getType:function(e){return"video/"+e.match(/(\w+)$/)[1].replace("ogv","ogg")},fallbackPlayer:"/includes/libs/js/plugins/flare/pe.flare/video/jarisplayer.swf",SimplePlayer:t};var r=navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad|android)/);var i=0;e.fn.peVideo=function(t){var r=this.data("peVideo");if(r){return r}t=e.extend(true,{},e.pixelentity.video.conf,t);this.each(function(){r=new n(e(this),t);e(this).data("peVideo",r)});return t.api?r:this}})(jQuery);(function(e){function t(e,t,n,r){var u,a,f,l,c=false,h=false;e=e?e:"";for(var p in i){if(typeof p==="string"){u=e.match(i[p]);if(u&&u.length>0){a=p;f=u[2];n=s[a]?s[a].replace("$ID",f):"";break}}}if(!f){var d=e.match(o);if(d){a="local";f=[d[0]];if(t){t=t.split(",");for(l=0;l<t.length;l++){f.push(d[1]+t[l])}}}else{f=false}}if(r){var v=r.split(/x| |,/);c=parseInt(v[0],10)||0;h=parseInt(v[1],10)||0}return{video:f,videoType:a,videoPoster:n,videoW:c,videoH:h}}function n(n,i){function s(){var r=t(n[0].href,n.attr("data-formats"),n.attr("data-poster"),n.attr("data-size"));if(r.video){y=r.video;g=r.videoType;b=r.videoPoster}else{return}if(r.videoW!==false){n.css({width:r.videoW,height:r.videoH})}v=r.videoW||n.width();m=r.videoH||n.height();var s=e('<span class="largePlay"></span>');if(i.responsive){w=e("<div/>").fadeTo(0,0);n.append(s).removeAttr("href").append(w).wrap('<div class="videoWrapper sixteenBYnine '+r.videoType+'"></div>').addClass("peActiveWidget").bind("enable.pixelentity ",h).bind("disable.pixelentity ",p).bind("click",f)}else{n.append(s).wrap('<div style="position: relative; overflow: hidden"></div>').addClass("peActiveWidget").bind("enable.pixelentity ",h).bind("disable.pixelentity ",p).bind("click",f);s.css({left:v-s.width()>>1,top:m-s.height()>>1});w=e("<div/>").css({position:"absolute","z-index":2,display:"none",width:v+"px",height:m+"px"});n.parent().prepend(w)}var l=n.children("img:eq(0)");if(l.length>0){d=l;b=l.attr("src");a()}else{if(b){if(g=="vimeo"){e.getJSON(b,o)}else{u()}}else{if(n.attr("data-poster")){b=n.attr("data-poster");u()}}}if(e.pixelentity.browser.mobile||i.autoPlay){h()}}function o(e){b=e&&e[0]&&e[0].thumbnail_large||false;if(b){u()}}function u(){d=e("<img/>");d.fadeTo(0,0).css("opacity",0).attr("data-src",b);n.append(d);e.pixelentity.preloader.load(d,a)}function a(){if(i.responsive){d.width("100%").fadeTo(300,1);return}var t=d[0].width||d.width();var n=d[0].height||d.height();var r=e.pixelentity.Geom.getScaler("fillmax","center","center",v,m,t,n);d.transform(r.ratio,r.offset.w,r.offset.h,v,m,true);d.fadeTo(300,1)}function f(t){if(E){return false}if(!e.pixelentity.browser.mobile){for(var n=0;n<r.length;n++){if(n!=S){r[n].disable()}}}w.show().fadeTo(0,0);E=w.peVideo({api:true,useVideoTag:i.responsive&&e.pixelentity.browser.mobile,width:i.responsive?"100%":v,height:i.responsive?"100%":m,type:g,videoId:y,poster:b,hd:true,autoPlay:true,loop:true});E.one("video_ready.pixelentity",l);return false}function l(){w.fadeTo(500,1)}function c(){}function h(){if(!E&&(e.pixelentity.browser.mobile||i.autoPlay)){f()}}function p(){if(E){if(E.destroy){E.destroy()}E=false;w.empty().fadeTo(0,0).hide()}}var d,v,m,g,y,b;var w;var E=false;var S;e.extend(this,{enable:h,disable:p,destroy:function(){if(E&&E.destroy){E.destroy()}E=undefined;r.splice(S,1);n.data("peVideoPlayer",null);n=undefined}});S=r.length;r.push(this);s()}e.pixelentity=e.pixelentity||{version:"1.0.0"};e.pixelentity.videoplayer={conf:{autoPlay:false,responsive:false,api:false},getInfo:t};var r=[];var i={vidly:/http:\/\/(vid.ly)\/([\w|\-]+)/i,youtube:/http:\/\/(www.youtube.com\/watch\?v=|youtube.com\/watch\?v=|youtu.be\/)([\w|\-]+)/i,vimeo:/http:\/\/(vimeo\.com|www\.vimeo\.com)\/([\w|\-]+)/i};var s={vidly:"http://cf.cdn.vid.ly/$ID/poster.jpg",youtube:"http://img.youtube.com/vi/$ID/0.jpg",vimeo:"http://vimeo.com/api/v2/video/$ID.json?callback=?"};var o=/(.+[^w])(mp4|webm|ogv)$/i;e.fn.peVideoPlayer=function(t){var r=this.data("peVideoPlayer");if(r){return r}t=e.extend(true,{},e.pixelentity.videoplayer.conf,t);this.each(function(){r=new n(e(this),t);e(this).data("peVideoPlayer",r)});return t.api?r:this}})(jQuery);(function(e){function t(){var e={transformProperty:"",MozTransform:"-moz-",WebkitTransform:"-webkit-",OTransform:"-o-",msTransform:"-ms-"};for(var t in e){if(typeof a[t]!="undefined"){return e[t]}}return null}function n(){var e=["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"];for(var t in e){if(a[e[t]]!==undefined){return true}}return false}function r(t,n,r,u,a,f,h,p){if(e.support.csstransforms&&!p){var d;var v="px";if(a&&f&&(parseInt(r,10)!=r||parseInt(u,10)!=u)){r=100*r/a;u=100*u/f;r=parseInt(r*1e3,10)/1e3;u=parseInt(u*1e3,10)/1e3;v="%"}else{r=parseInt(r,10);u=parseInt(u,10)}if(e.support.hw3dTransform){d=r!==undefined?"translate3d("+r+v+","+u+v+",0) ":"translateZ(0) "}else{d=r!==undefined?"translate("+r+v+","+u+v+") ":""}e(t).css(c,i).css(l,d+"scale("+n+")")}else{if(!h&&!p&&e.browser.msie){var m=t.style;var g='progid:DXImageTransform.Microsoft.Matrix(FilterType="'+s+'",M11='+n+",M12=0,M21=0,M22="+n+",Dx="+r+",Dy="+u+")";var y=m.filter||e.curCSS(t,"filter")||"";m.filter=o.test(y)?y.replace(o,g):y?y+" "+g:g}else{e(t).width(a*n).height(f*n).css({"margin-left":r+"px","margin-top":u+"px"})}}}var i="0px 0px";var s="bilinear";var o=/progid:DXImageTransform\.Microsoft\.Matrix\(.*?\)/;var u=document.createElement("modernizr"),a=u.style;var f=t(),l=f!==null?f+"transform":false,c=f!==null?f+"transform-origin":false;e.support.csstransforms=n();e.support.hw3dTransform="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix;if(f=="-ms-"){l="msTransform";c="msTransformOrigin"}e.fn.transform=function(e,t,n,i,s,o,u){this.each(function(){r(this,e,t,n,i,s,o,u)});return this}})(jQuery);(function(e){function t(){function t(){$=V.width();J=window.innerHeight?window.innerHeight:V.height();if(K){K.width($).height(J);if(Ht){K.css("top",V.scrollTop())}}if(e.pixelentity.browser.mobile&&Tt&&Tt.data("count")>0){u(Lt,true)}var t=lt.length;while(t--){lt[t].resize($,J)}p()}function n(e,t){rt[t]=e}function r(e){clearTimeout(kt);switch(e.type){case"mouseenter":h(true);break;case"mouseleave":h(false);break;case"click":if(!xt){var t=parseInt(e.currentTarget.id,10);if(vt>=0){yt=t>vt?"next":"prev"}D(t)}e.stopPropagation();e.stopImmediatePropagation();return false}}function o(e){clearTimeout(kt);var t=e?e.pageX:0;var n=Tt.data("width");var r=n-$;if(r>=0){t=-r*t/$;Nt.css("margin-left",t)}else{Nt.css("margin-left","auto")}}function u(e,t){var n=Tt.data("size");var r=Math.floor($/n);var i;var s=0;if(Tt.data("width")>$){if(t){Lt=e}else{Lt=Math.max(0,Lt+e*r)}if((i=Tt.data("count")-Lt)<r){Lt-=r-i+1;s=$-r*n-n-8}}else{Lt=0}At=-Lt*n+s;Nt.transform(1,At===0?0:At-2,0)}function a(e){if(!Q||Dt){return true}var t=e.type;var n=e.originalEvent;switch(t){case"touchstart":if(n.touches.length>1||n.scale&&n.scale!==1){return true}bt=n.touches[0].pageX;wt=0;break;case"touchmove":if(n.touches.length>1||n.scale&&n.scale!==1){return true}wt=n.touches[0].pageX-bt;e.preventDefault();e.stopPropagation();if(Ct){Nt.addClass("touchMove").transform(1,At+wt,0)}break;case"touchend":if(Ct){Nt.removeClass("touchMove")}if(wt===0){return true}var r=false;if(wt>10){r=true;if(!Ct){c()}else{u(-1)}}if(wt<-10){r=true;if(!Ct){l()}else{u(+1)}}wt=0;break}return true}function f(e){if(!Q){return true}e.preventDefault();e.stopPropagation();return false}function l(){if(xt||!pt){return}yt="next";D(pt[(dt+1)%pt.length])}function c(){if(xt||!pt){return}yt="prev";D(pt[dt===0?pt.length-1:dt-1])}function h(e){var t=Tt.parent();Ct=e===true?true:e===false?false:Ct?false:true;if(et){t[Ct?"addClass":"removeClass"]("peFlareLightboxActive")}else{t.animate({"margin-top":Ct?-84:0},500)}}function p(){if(_t.hasClass("peFlareLightboxActive")){if(e.pixelentity.browser.mobile||Ot.videoType=="youtube"||Ot.videoType=="vimeo"){var t=e.pixelentity.browser.iDev?35:0;var n=e.pixelentity.browser.android?$*9/16:J;n=Math.min(n,J);_t.find("iframe, video").css("margin-top",(J-n)/2+t).height(n-t).width("100%")}else{Dt.resize($,J)}}}function d(){clearTimeout(Pt);Dt.unbind("video_ready.pixelentity",d);tt.hide();_t.addClass("peFlareLightboxActive");p();if(e.pixelentity.browser.iDev&&(Ot.videoType=="vimeo"||Ot.videoType=="youtube")){Ht=true;K.css({position:"absolute",top:V.scrollTop()})}}function v(){clearTimeout(Pt);if(Dt){if(Dt.destroy){Dt.destroy()}Dt=false;_t.removeClass("peFlareLightboxActive").empty();Mt.addClass("peFlareLightboxActive")}if(Ht){Ht=false;K.css({position:"fixed",top:0})}}function m(){if(Dt){v();Mt.addClass("peFlareLightboxActive");if(!pt){k()}}else{k()}}function g(){tt.show();Mt.removeClass("peFlareLightboxActive");Dt=_t.peVideo({api:true,useVideoTag:e.pixelentity.browser.mobile,disableFade:true,width:$,height:J,type:Ot.videoType,videoId:Ot.video,poster:e.pixelentity.browser.mobile&&Ot.videoPoster,hd:true,autoPlay:true,loop:false});Dt.one("video_ready.pixelentity",d);Pt=setTimeout(d,5e3)}function y(e){switch(e.currentTarget.id){case"peFlareLightboxControlClose":m();break;case"peFlareLightboxControlNext":l();break;case"peFlareLightboxControlPrev":c();break;case"peFlareLightboxControlThumbs":h();break;case"peFlareLightboxControlVideo":g();break}e.stopPropagation();e.stopImmediatePropagation();return false}function b(e,t){if(!Q){return true}if(e.type=="keydown"){switch(e.keyCode){case 27:m();break;case 39:l();break;case 37:c();break}}else{if(!Dt){if(t<0){l()}else{c()}}}e.preventDefault();e.stopPropagation();return false}function w(e){if(W){return true}W=true;z=e;return true}function E(e){if(!Q){return}if(Ht){K.css("top",V.scrollTop())}}function S(){if(X){return true}X=true;V=e(window).resize(t);V.scroll(E);K=e('<div class="peFlareLightbox"><div class="peFlareLightboxHidden"></div><div class="peFlareLightboxControls"><div><a href="#" class="sprite" id="peFlareLightboxControlClose"/><a href="#" class="sprite" id="peFlareLightboxControlNext"/><a href="#" class="sprite" id="peFlareLightboxControlPrev"/><a href="#" class="sprite" id="peFlareLightboxControlThumbs"/></div></div><div class="peFlareLightboxOverlay"></div><div class="peFlareLightboxContent"></div><div class="peFlareLightboxThumbs"><span></span></div><a id="peFlareLightboxControlVideo" class="peFlareLightboxVideoIcon"><span></span></a><div class="peFlareLightboxVideo"></div><div class="peFlareLightboxSpinner"><span/></div></div>');if(!Z){K.addClass("no-transitions")}if(e.browser.msie){K.addClass("msie")}e("body").append(K).bind("touchmove",f);tt=K.find(".peFlareLightboxSpinner").hide();nt=K.find(".peFlareLightboxContent");Mt=K.find(".peFlareLightboxVideoIcon");_t=K.find(".peFlareLightboxVideo");Tt=e("<div/>");if(e.pixelentity.browser.mobile){K.addClass("mobile");K.find(".peFlareLightboxThumbs").append(Tt)}else{K.find(".peFlareLightboxThumbs").bind("mouseenter mouseleave",r).append(Tt)}ht=K.find(".peFlareLightboxHidden");K.bind("touchstart touchmove touchend",a).bind("mousewheel",b).delegate(".peFlareLightboxControls a","click touchstart",y).delegate(".peFlareLightboxThumbs span","click",r);Mt.click(y);if(!e.pixelentity.browser.mobile){Tt.bind("mousemove",o)}else{K.click(h)}e(document).bind("keydown",b)}function x(){G=true;K.css("filter","none");if(Tt.data("created")){h(true);kt=setTimeout(h,2e3)}if(ft.length===ct){I()}}function T(){K.addClass("peFlareLightboxActive");if(Z){setTimeout(x,600)}else{K.stop().css("opacity",0).fadeTo(500,1,x)}}function N(){Q=true;S();t();V.scrollLeft(0);K.show();setTimeout(T,10)}function C(){Q=false;pt=false;xt=false;vt=-1;v();K.hide();nt.empty();var e,t;while(t=lt.shift()){t.destroy()}while(e=it.shift()){st[e].destroy()}Tt.data("created",false).empty();K.removeClass("peFlareLightboxActive");Mt.removeClass("peFlareLightboxActive");yt="none"}function k(e){G=false;if(Z){if(false&&et){K.one(et,C)}else{setTimeout(C,600)}K.removeClass("peFlareLightboxActive")}else{K.stop().css("opacity",1).fadeTo(500,0,C)}}function L(){tt.show()}function A(){St=setTimeout(L,500)}function O(){clearTimeout(St);tt.hide()}function M(){if(!pt||Tt.data("created")===true){return}var t,n;Nt=e("<div/>");Tt.empty().append(Nt);var r=0;for(var i=0;i<pt.length;i++){n=pt[i];if(t=ut[n].thumb){t=e("<span/>").attr("data-src",t).attr("id",n);Nt.append(t);t.peSimpleThumb();r++}}var s=r*104+10;Nt.width(s);Tt.data("count",r);Tt.data("size",104);if(r>0){Tt.data("created",true);Tt.data("width",s);K.find("#peFlareLightboxControlThumbs").show()}else{K.find("#peFlareLightboxControlThumbs").hide()}}function _(e){O();var t=vt;ut[t].resource=e&&e[0]&&e[0].thumbnail_large||false;vt=-1;D(t)}function D(t){var n=ut[t];if(n.resource.match(i)){vt=t;A();e.getJSON(n.resource,_);return false}if(t===vt){Y=true;ct=0;return false}vt=t;v();pt=n.gallery?at[n.gallery]:false;pt=pt.length>1?pt:false;K.find("#peFlareLightboxControlPrev,#peFlareLightboxControlNext")[pt&&pt.length>1?"show":"hide"]();if(pt){dt=e.inArray(t,pt);M()}else{K.find("#peFlareLightboxControlThumbs").hide()}Y=false;ct=0;var r;var s,o;if(it.length>0&&(s=st[it[0]]).isGallery){r=it[0];mt=false}else{r=gt++;o=rt[n.plugin]||rt["default"];s=new o(r,$,J);st[r]=s;it.push(r);mt=true}Ot=n.video?n:false;if(!Ot){Mt.removeClass("peFlareLightboxActive")}ft.push(r);A();s.load(n)}function P(e){N();D(parseInt(e.currentTarget.getAttribute("data-pe-target-id"),10));return false}function H(t){var n=e.inArray(t,it);if(n!==false){it.splice(n,1)}st[t]=undefined;delete st[t]}function B(e,t){switch(e){case"loaded":ct++;if(ft.length===ct&&G){I()}break;case"destroy":H(t);break;case"locked":xt++;break;case"unlocked":xt--;break}}function j(t){var n=st[t];var r=n.resize($,J).render();if(n.isGallery){nt.append(r)}else{r.css("left",s[yt].from);nt.append(r);if(Z){r.fadeTo(0,1).css("left",s[yt].to)}else{r.css("opacity",0).animate({left:s[yt].to,opacity:1},1e3)}}if(e.inArray(n,lt)<0){lt.push(n)}if(Ot&&!pt){Mt.removeClass("peFlareLightboxActive");g()}else{Mt[Ot?"addClass":"removeClass"]("peFlareLightboxActive")}}function F(){if(!mt){return}mt=false;var e,t;while(e=lt.shift()){if(et){e.render().fadeTo(0,0).css("left",-s[yt].from).one(et,e.destroy)}else{e.render().css("opacity",1).animate({left:-s[yt].from,opacity:0},1e3,null,e.destroy)}}}function I(){O();if(Y){return}Y=true;var e;F();while((e=ft.shift())!==undefined){j(e)}}function q(e){var t=e.gallery||false;var n=e.id!==undefined?e.id:ut.length;if(t){if(at[t]){at[t].push(n)}else{at[t]=[n]}}ut.push(e)}function R(t){var n=ot.length;var r=t.attr("href");var i=t.attr("data-flare-plugin")||"default";t.attr("data-pe-target-id",ot.length).bind("click",P);var s;s=e.pixelentity.videoplayer.getInfo(r,t.attr("data-flare-videoformats"),t.attr("data-flare-videoposter"));if(s.video){r=s.videoPoster}else{s=e.pixelentity.videoplayer.getInfo(t.attr("data-flare-video"),t.attr("data-flare-videoformats"))}var o={id:n,plugin:i,resource:r||"",gallery:t.attr("data-flare-gallery")||false,bw:t.attr("data-flare-bw"),thumb:t.attr("data-flare-thumb"),scale:t.attr("data-flare-scale")||"fit"};if(s.video){e.extend(o,s)}ot.push(t);q(o)}function U(e){ht.append(e)}var z;var W=false;var X=false;var V;var $,J;var K;var Q=false;var G=false;var Y=false;var Z=e.support.csstransitions;var et=e.support.csstransitionsEnd;var tt,nt;var rt=[];var it=[];var st={};var ot=[];var ut=[];var at={};var ft=[];var lt=[];var ct=0;var ht;var pt=false;var dt=0;var vt=-1;var mt=false;var gt=1;var yt="none";var bt,wt,Et;var St=0;var xt=0;var Tt;var Nt;var Ct=false;var kt;var Lt=0;var At=0;var Ot=false;var Mt,_t;var Dt;var Pt=0;var Ht=false;e.extend(this,{init:w,add:R,show:j,signal:B,touchHandler:a,thumbsActive:function(e){if(typeof e==="undefined")return Ct;Ct=e},register:n,addToBuffer:U})}function n(t,n){function r(){o.init(n);o.add(t)}e.extend(this,{destroy:function(){t.data("peFlareLightbox",null);t=undefined}});r()}e.pixelentity=e.pixelentity||{version:"1.0.0"};e.pixelentity.peFlareLightbox={conf:{api:false}};e.pixelentity.video.fallbackPlayer="/includes/libs/js/plugins/flare/pe.flare/video/jarisplayer.swf";var r=navigator.userAgent.toLowerCase();var i=/http:\/\/(vimeo\.com|www\.vimeo\.com)\//i;var s={none:{from:0,to:0},prev:{from:-100,to:0},next:{from:100,to:0}};var o=e.pixelentity.lightbox=new t;e.fn.peFlareLightbox=function(t){var r=this.data("peFlareLightbox");if(r){return r}t=e.extend(true,{},e.pixelentity.peFlareLightbox.conf,t);this.each(function(){var i=e(this);r=new n(i,t);i.data("peFlareLightbox",r)});return t.api?r:this}})(jQuery);(function(e){function t(t,r,i){function s(e){g=e;n.signal("locked",t);l(e);return this}function o(){n.signal("unlocked",t)}function u(t,n){r=t;i=n;if(h){var s=0;if(g.scale=="fit"){s=40}var o=e.pixelentity.Geom.getScaler(g.scale,"center","center",r-s,i-s,p,d);h.transform(o.ratio,parseInt(o.offset.w,10)+s/2,parseInt(o.offset.h,10)+s/2,p,d,true,e.pixelentity.browser.android&&e.pixelentity.browser.android<3)}return this}function a(){p=h[0].naturalWidth||h[0].width||h.width();d=h[0].naturalHeight||h[0].height||h.height();n.signal("loaded",t);setTimeout(o,500)}function f(){if(!m){m=e('<div class="peFlareLightboxRenderImage" />').append(h.addClass(g.scale));h.wrap("<div/>")}return m}function l(t){v=true;h=e('<img class="singleImage" src="%0"/>'.format(t.resource));n.addToBuffer(h);e.pixelentity.preloader.load(h,a)}function c(){h=undefined;if(m){m.detach();m=undefined}n.signal("destroy",t)}var h;var p,d;var v=false;var m=false;var g;e.extend(this,{load:s,preload:l,resize:u,render:f,isGallery:false,destroy:c})}var n;if(!e.pixelentity||!(n=e.pixelentity.lightbox)){return}n.register(t,"default")})(jQuery);(function(e){function t(t,n){function r(){E=e(window)}function i(n,r){A=L=false;if(b){y=b.removeClass("peCurrentColor").addClass("pePrevColor")}x=n?1:0;x+=r?1:0;S.triggerHandler("loading.pixelentity");var i=e.browser.mozilla;if(n){b=e("<img/>").addClass("peCurrentColor").attr("data-src",n);if(i){b.css("background-color","rgba(255,255,255,.01)")}t.append(b.fadeTo(0,0)[0]);e.pixelentity.preloader.load(b,s)}else{b=false}if(r){w=e("<img/>").addClass("peCurrentBW").attr("data-src",r);if(i){w.css("background-color","rgba(255,255,255,.01)")}t.append(w.fadeTo(0,0)[0]);e.pixelentity.preloader.load(w,s)}else{w=false}if(!x){o()}}function s(e){x--;if(x===0){o()}}function o(){if(L){return}L=true;S.triggerHandler("loaded.pixelentity");if(A||!n.wait){a()}}function u(){A=true;if(x===0){a()}}function a(){c(b);c(w);f();if(y){if(b){y.fadeTo(400,0);h()}else{y.fadeTo(400,0,h)}}else{h()}}function f(){C=E.width();k=window.innerHeight?window.innerHeight:E.height();l(b,1.02);l(w,1)}function l(t,n){if(t){var r=t.data("w");var i=t.data("h");var s=e.pixelentity.Geom.getScaler(N,T[1],T[0],C,k,r,i);t.transform(s.ratio*n,parseInt(s.offset.w+r*(s.ratio-s.ratio*n)*.5,10),parseInt(s.offset.h+i*(s.ratio-s.ratio*n)*.5,10),r,i,true,e.pixelentity.browser.android&&e.pixelentity.browser.android<3)}}function c(e){if(e){e.data("w",e[0].width||e.width()||e[0].naturalWidth);e.data("h",e[0].height||e.height()||e[0].naturalHeight)}}function h(){if(w){w.delay(200).fadeTo(800,1)}if(b){b.delay(600).fadeTo(1200,1,p)}else{p()}}function p(){if(y){y.remove();y=false}if(w){w.remove();w=false}if(S){S.triggerHandler("complete.pixelentity")}}function d(){S.bind.apply(S,arguments)}function v(){S.unbind.apply(S,arguments)}function m(e,t){N=e;T=t.split(/,/)}function g(){y=b=w=E=S=undefined;t.data("peBackgroundSlider",null);t=undefined}var y,b,w,E;var S=e(this);var x=0;var T="center,center".split(/,/);var N="fillmax";var C,k;var L=false;var A=false;e.extend(this,{load:i,resize:f,gogo:u,bind:d,unbind:v,configure:m,destroy:g});r()}e.pixelentity=e.pixelentity||{version:"1.0.0"};e.pixelentity.peBackgroundSlider={conf:{api:false,wait:false}};e.fn.peBackgroundSlider=function(n){var r=this.data("peBackgroundSlider");if(r){return r}n=e.extend(true,{},e.pixelentity.peBackgroundSlider.conf,n);this.each(function(){var i=e(this);r=new t(i,n);i.data("peBackgroundSlider",r)});return n.api?r:this}})(jQuery);(function(e){function t(t,n){function r(){s=e("<img/>").attr("src",t.attr("data-src")).fadeTo(0,0);t.append(s);e.pixelentity.preloader.load(s,i)}function i(){var n=s[0].naturalWidth||s[0].width||s.width();var r=s[0].naturalHeight||s[0].height||s.height();var i=e.pixelentity.Geom.getScaler("fill","center","center",t.width(),t.height(),n,r);s.transform(i.ratio,parseInt(i.offset.w,10),parseInt(i.offset.h,10),n,r,true,true);s.fadeTo(500,1);t.addClass("loaded");t=undefined;s=undefined}var s;e.extend(this,{destroy:function(){t.data("peSimpleThumb",null);t=undefined}});r()}e.pixelentity=e.pixelentity||{version:"1.0.0"};e.pixelentity.peSimpleThumb={conf:{api:false}};e.fn.peSimpleThumb=function(n){var r=this.data("peSimpleThumb");if(r){return r}n=e.extend(true,{},e.pixelentity.peSimpleThumb.conf,n);this.each(function(){var i=e(this);r=new t(i,n);i.data("peSimpleThumb",r)});return n.api?r:this}})(jQuery);(function(e){function t(t,r,i){function s(e){y=e;n.signal("locked",t);c(e);return this}function o(e,t){r=e;i=t;if(p){p.resize(r,i)}return this}function u(){n.signal("loaded",t)}function a(){n.signal("unlocked",t)}function f(){setTimeout(l,50);return g}function l(){if(p){p.gogo()}}function c(t){m=true;if(!p){g=e('<div class="peFlareLightboxRenderGallery" />');n.addToBuffer(g);p=g.peBackgroundSlider({api:true,wait:true});p.bind("loaded.pixelentity",u);p.bind("complete.pixelentity",a)}p.load(t.resource,t.bw);p.configure("fillmax","center,center")}function h(){if(g){g.detach();g=undefined}if(p){p.unbind("loaded.pixelentity",u);p.unbind("complete.pixelentity",a);p.destroy();p=undefined}n.signal("destroy",t)}var p;var d,v;var m=false;var g=false;var y;e.extend(this,{load:s,preload:c,resize:o,render:f,isGallery:true,destroy:h})}var n;if(!e.pixelentity||!(n=e.pixelentity.lightbox)){return}n.register(t,"shutter")})(jQuery)