!function(){function a(){}a.prototype.construct=function(){},a.extend=function(b){var c=function(){arguments[0]!==a&&this.construct.apply(this,arguments)},d=new this(a),e=this.prototype;for(var f in b){var g=b[f];g instanceof Function&&(g.$=e),d[f]=g}return c.prototype=d,c.extend=this.extend,c},window.Class=a}($),function(){var a=Class.extend({construct:function(){}});window.Base=a}($),function(a){var b=Base.extend({construct:function(b){this.application=b,this.$loader=a("#loader"),this.$circles=this.$loader.find(".circles"),this.$current=this.$circles.find("li").first();var c=this.application.pageManager;this.loadArray=c.items.slice(),this.$loader.show(),this.application.utils.animatePreLoader(this.$loader.find("li").first(),this.$loader),config.loaderNum=0===c.current||c.current===c.last?config.loaderNum:2*(config.loaderNum-1)+1,this.reorderLoadArray(this.application.pageManager.current)},application:null,$loader:null,$circles:null,$current:null,loadArray:null,loadPage:function(){var b=this,c=b.application.pageManager,d=b.loadArray.shift(),e=d.$element,f=0,g=e.find("img"),h=g.length,i=function(){return d.hasLoaded(),0===b.loadArray.length?(b.application.$window.trigger("pagesLoaded"),b.destroy(),void 0):(b.loadArray.length!=c.items.length-config.loaderNum||b.application.initialised||(b.$loader.hide(),b.application.init(),a(".branding").show()),b.loadPage(),void 0)};0===h?i():e.find("img").each(function(){var b=a(this);"undefined"!=typeof b.attr("data-original")&&d.resizeImage(b),b.one("load",function(){return f++,f==h&&i(),!1}).each(function(){this.complete&&a(this).trigger("load")}),b.on("error",function(){f++})})},reorderLoadArray:function(b){var c=a.inArray(this.application.pageManager.items[b],this.loadArray);if(c>-1){var d;0===c?(d=this.loadArray.splice(c,2),d=d.concat(this.loadArray.splice(c))):(d=this.loadArray.splice(c-1,3),d.push(d.shift()),d=d.concat(this.loadArray.splice(c-1))),this.loadArray=d.concat(this.loadArray.reverse()),this.loadPage()}},destroy:function(){this.$loader.remove(),delete this.application.loader}});window.Loader=b}($),function(a){var b=Base.extend({construct:function(a){this.application=a,this.hasTrim()},application:null,deSelect:function(){if(window.getSelection){var b=window.getSelection();b.empty?b.empty():b.removeAllRanges&&b.removeAllRanges()}else document.selection&&document.selection.empty();config.isMobile&&a(document).trigger("touchstart touchmove touchend")},stopPropagation:function(a){a.stopPropagation()},stopEvent:function(a){a.stopPropagation(),a.preventDefault()},isNumberKey:function(a){var b=a.which?a.which:event.keyCode;return b>31&&(48>b||b>57)?!1:!0},isPortrait:function(){return this.application.$window.width()<this.application.$window.height()&&config.portraitMode||config.hasMobileVersion?!0:!1},openLink:function(a,b){return b="undefined"==typeof b||null===b?"_blank":b,window.open(a),!1},hasTrim:function(){"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")})},matrixToArray:function(a){var b=a.indexOf("(")+1;return a.substr(b,a.length-(b+1)).split(", ")},getCoordsFromMatrix:function(a){var b=this.matrixToArray(a),c={x:0,y:0,z:0};return"none"===a?c:(b.length>6?(c.x=parseFloat(b[12]),c.y=parseFloat(b[13]),c.z=parseFloat(b[14])):(c.x=parseFloat(b[4]),c.y=parseFloat(b[5])),c)},createPreloader:function(b){var c=a("<div />").addClass("loadingContent").html('<ul class="circles"><li></li><li></li><li></li><li></li></ul><p>'+config.loadingText+"</p>"),d=a("<div />").addClass("loadingWrapper").append(c);return"undefined"!=typeof b&&b&&d.append(a("<div />").addClass("loadingOverlay")),this.animatePreLoader(d.find("li").first(),d),d},animatePreLoader:function(a,b){var c=this;a.animate({backgroundColor:config.foregroundColour},config.loaderSpeed,function(){a.animate({backgroundColor:config.backgroundColour},config.loaderSpeed,function(){a=a.next().length?a.next():b.find("li").first(),c.animatePreLoader(a,b)})})},stopPreLoader:function(a){a.stop().css("backgroundColor",config.backgroundColour)},getVendorPrefix:function(){if(a.browser.msie&&a.browser.version<9)return{dom:"MS",lowercase:"ms",css:"-ms-",js:"Ms"};var b=window.getComputedStyle(document.documentElement,""),c=(Array.prototype.slice.call(b).join("").match(/-(moz|webkit|ms)-/)||""===b.OLink&&["","o"])[1],d="WebKit|Moz|MS|O".match(new RegExp("("+c+")","i"))[1];return{dom:d,lowercase:c,css:"-"+c+"-",js:c[0].toUpperCase()+c.substr(1)}},unscaleIframes:function(){var b=this.application.scale,c=1/b;a("iframe.iframe-fix").each(function(){var d,e,f,g,h,i,j,k,l=a(this);void 0===l.attr("data-orig-width")&&l.attr("data-orig-width",l.attr("width")),void 0===l.attr("data-orig-height")&&l.attr("data-orig-height",l.attr("height")),d=l.attr("data-orig-width"),e=l.attr("data-orig-height"),f=d*b,g=e*b,h=(d-f)/2,i=(e-g)/2,j={"margin-top":i,"margin-left":h,scale:c},k={width:f,height:g},l.css(j),l.attr(k),l.attr("style",l.attr("style")+"; width: "+f+"px !important; height: "+g+"px !important;")})},replaceScrollbars:function(){var b=a(".scroll");b.addClass("overthrow"),overthrow.set(),config.isMobile&&b.on("touchstart touchmove touchend",function(a){a.stopPropagation()}),b.length&&this.application.$body.hasClass("msie10")&&(b.css("overflow","hidden").perfectScrollbar(),this.application.scrollbarsAdded=!0)}});window.Utils=b}($),function(a){var b=Base.extend({construct:function(b){this.application=b,this.$navigation=a("#navigation"),this.$menus=a(".nav-menu"),this.$contents=a(".contents"),this.$share=a(".share"),this.$zoomIn=a(".zoomIn"),this.$zoomOut=a(".zoomOut"),this.$startPage=a(".startPage"),this.$previousPage=a(".previousPage"),this.$pageNumber=a(".pageNumber"),this.$nextPage=a(".nextPage"),this.$endPage=a(".endPage"),this.$tooltip=a(".tooltip"),this.setWidth(),this.setHeight()},application:null,$navigation:null,$menus:null,$contents:null,$share:null,$zoomIn:null,$zoomOut:null,$startPage:null,$previousPage:null,$pageNumber:null,$nextPage:null,$endPage:null,$print:null,width:null,height:null,init:function(){var b=this,c=b.application,d=config.singlePageSpreads?(2*c.pageManager.total).toString().length:c.pageManager.total.toString().length;this.$pageNumber.attr("maxlength",d),this.changePageNumberValue(),this.$pageNumber.on("keypress",function(a){return 13==a.keyCode?(b.pageNumberValue(this,a),!1):c.utils.isNumberKey(a)}),this.$pageNumber.on("blur",function(a){return b.pageNumberValue(this,a),!1}),this.$zoomIn.on("click",function(a){a=b.changeMouseCoordinates(a),c.featureManager.zoom.zoomContainer(a,"in")}),this.$zoomOut.on("click",function(a){a=b.changeMouseCoordinates(a),c.featureManager.zoom.zoomContainer(a,"out")}),this.$startPage.on("click",function(){c.goToPage(1)}),this.$previousPage.on("click",function(){c.goBack()}),this.$nextPage.on("click",function(){c.goForward()}),this.$endPage.on("click",function(){c.goToPage(c.pageManager.total)}),this.$share.on("click",function(){var a=c.featureManager.share;a.open?a.closeFeature():a.openFeature()}),this.$contents.on("click",function(){var a=c.featureManager.contents;a.open?a.closeFeature():a.openFeature()}),a(".addNavigationFeatureToApp").each(function(){var b=a(this);b.on("click",function(){var c=a("."+b.data("custom-feature")).data("feature");c.open?c.closeFeature():c.openFeature()})}),this.$menus.on("click",function(a){c.featureManager.closeOpenMenus(a)}),this.$navigation.on("dblclick doubletap touchmove",function(a){c.utils.stopEvent(a)}),this.$navigation.on("touchstart touchend",function(a){a.stopPropagation()}),config.isMobile||(this.$navigation.find("a").on("mouseover",function(){var c=a(this);if(c.css("opacity",.5),"undefined"!=typeof c.attr("name")){b.$tooltip.find(".tip-text").html(c.attr("name"));var d=c.offset().left-(b.$tooltip.width()-c.width())/2;b.$tooltip.css("left",d).stop().hide().fadeIn(300)}}),this.$navigation.find("a").on("mouseout",function(){var c=a(this);c.css("opacity",1),b.$tooltip.fadeOut(300)})),this.$navigation.animate({top:0},1e3)},pageNumberValue:function(a){var b=parseInt(a.value);0!==b%2&&b>1&&!this.application.isPortrait&&config.singleFrontPage&&b--,config.singleFrontPage||this.application.isPortrait?b>this.application.pageManager.total?b=this.application.pageManager.total:1>b&&(b=1):config.singlePageSpreads?(b=Math.floor((b+1)/2),b>this.application.pageManager.total?b=this.application.pageManager.total:1>b&&(b=1)):config.singleFrontPage||this.application.isPortrait||b>=this.application.pageManager.total&&(b=this.application.pageManager.total-1),this.application.goToPage(b)},changePageNumberValue:function(){(0===this.application.pageManager.current||this.application.pageManager.current===this.application.pageManager.last)&&config.singleFrontPage||this.application.isPortrait?this.$pageNumber.val(this.application.pageManager.current+1):config.portraitMode||config.singleFrontPage?"arabic"!=config.language?this.$pageNumber.val(this.application.pageManager.current+1+"-"+(this.application.pageManager.current+2)):this.$pageNumber.val(this.application.pageManager.current+2+"-"+(this.application.pageManager.current+1)):config.singlePageSpreads?"arabic"!=config.language?this.$pageNumber.val(2*(this.application.pageManager.current+1)-1+"-"+2*(this.application.pageManager.current+1)):this.$pageNumber.val(2*(this.application.pageManager.current+1)+"-"+(2*(this.application.pageManager.current+1)-1)):this.$pageNumber.val(this.application.pageManager.current+1)},changeMouseCoordinates:function(a){if(!config.hasMobileVersion){var b=this.application.pageManager,c=b.onSingleFrontCover()||b.onSingleBackCover()?this.getSingleCentre():this.getWindowCentre();return config.isMobile?a.originalEvent.changedTouches=[{pageX:c.x,pageY:c.y}]:(a.pageX=c.x,a.pageY=c.y),a}},getWindowCentre:function(){return{x:.5*this.application.dimensions.viewportWidth,y:this.application.dimensions.viewportHeight/2}},getSingleCentre:function(){var a,b=this.application.pageManager;return 0===b.current?(a="arabic"!=config.language?.75:.25,{x:this.application.dimensions.viewportWidth*a,y:this.application.dimensions.viewportHeight/2}):(a="arabic"!=config.language?.25:.75,{x:this.application.dimensions.viewportWidth*a,y:this.application.dimensions.viewportHeight/2})},setWidth:function(){this.width=this.$navigation.width()},setHeight:function(){this.height=this.$navigation.height()}});window.Navigation=b}($),function(a){var b=Base.extend({construct:function(b,c){if(!c instanceof jQuery)throw"ImageChanger - image list must be passed as jQuery Object";this.parent=b,this.$images=c.clone(),c.remove(),this.parent instanceof Page&&this.$images.attr("data-orig-page-number",this.parent.number),b instanceof Page&&(this.counterpart=this.parent.counterpart),this.$element=a("<div />").addClass("imageChanger"),this.parent.$element.prepend(this.$element)},$images:null,$element:null,parent:null,counterpart:null,ready:!1,stopped:!1,defaultConf:{animation:"slideleft",delay:"0",wait:"2000",transition:"800"},setup:function(){return this.ready?(this.stopped=!1,this.play(),void 0):(this.counterpart?this.counterpart.imageChanger&&this.sortImages(this.counterpart.imageChanger.$images.clone()):this.sortImages(),void 0)},sortImages:function(b,c){var d={},e=null,f=this,g=[];"undefined"==typeof b&&(b=null),"undefined"==typeof c&&(c=!1),c===!1&&this.counterpart?(this.$images=this.$images.add(b),this.counterpart.imageChanger.sortImages(this.$images.clone(),!0)):null!==b&&(this.$images=b),this.$images.each(function(){e=a(this),d=f.decodeAlt(e.attr("alt")),e.attr({alt:"image gallery",title:"image gallery"}),d&&(d.set&&!g[d.set]&&(g[d.set]=[]),d.number&&!g[d.set][d.number]&&(g[d.set][d.number]=[]),d.part?g[d.set][d.number][d.part]=e:g[d.set][d.number].push(e))}),this.appendImages(g)},appendImages:function(b){var c=this,d=a("<div />").addClass("imageChangerSet"),e=a("<div />").addClass("imageChangerImage");a.each(b,function(f,g){if("undefined"!=typeof g){var h,i,j=d.clone().attr("data-ic-set",f);c.$element.append(j);for(i in c.defaultConf)c.defaultConf.hasOwnProperty(i)&&j.data("ic-"+i,c.defaultConf[i]);if(imageChangerConfig&&imageChangerConfig[f]){h=imageChangerConfig[f];for(i in h)h.hasOwnProperty(i)&&j.data("ic-"+i,h[i])}a.each(b[f],function(d,g){if("undefined"!=typeof g){var h=e.clone().attr("data-ic-number",d),i=0;j.append(h),a.each(b[f][d],function(a,e){if("undefined"!=typeof e){var g=b[f][d][a];h.append(g),h.attr("style",g.attr("style")),g.attr("style",""),c.counterpart&&(g.css("left",i),i+=g.width())}})}})}}),this.arrangeImages()},arrangeImages:function(){var b,c,d,e=this,f=this.$element.children(".imageChangerSet");f.each(function(){var f,g=0,h=0,i=1,j=0===e.parent.number%2?0:-480,k=!1;switch(c=a(this),c.data("current",1),b=c.data("ic-animation")){case"slideright":i=-1,c.data("reverseOrder",!0);case"slideleft":case"slide":f="left",c.children(".imageChangerImage").each(function(){d=a(this),d.css("left",parseInt(j)+"px").children().each(function(){var b=a(this);h=parseInt(b.css("left")),g+=parseInt(b.css("width")),0>h&&(j+=h)}),d.attr("data-ic-width",g),j+=g*i,g=0});break;case"slidedown":i=-1,c.data("reverseOrder",!0);case"slideup":f="top",c.children(".imageChangerImage").each(function(){d=a(this),k===!1&&(k=parseInt(d.css("top"))),d.css("top",parseInt(k)+"px").css("left",parseInt(j)+"px"),g=d.children().first().height(),d.attr("data-ic-height",g),k+=g*i,g=0});break;case"fade":f="opacity",c.children(".imageChangerImage").each(function(){d=a(this),d.css("left",parseInt(j)+"px"),1!==d.data("ic-number")&&d.hide()})}c.data({"ic-property":f,"ic-direction":-1*i})}).each(function(){c=a(this),c.data("reverseOrder")===!0&&c.children(".imageChangerImage").each(function(){var b=a(this);b.prependTo(b.parent())})}),this.ready=!0,this.play()},play:function(b){var c,d,e=this;if(this.ready){if("undefined"==typeof b&&(b="*"),!this.parentVisible())return this.stopped=!0,void 0;d=function(a,b){setTimeout(function(){var b=a.data("ic-set"),c=null;if(!e.parentVisible())return e.stopped=!0,void 0;if(a.data("ic-waiting",!0),!e.counterpart||(c=e.counterpart.imageChanger.getImageSet(b),c.data("ic-waiting")))switch(a.data("ic-property")){case"left":e.slideHorizontal(a,a.data("ic-direction")),c&&e.counterpart.imageChanger.slideHorizontal(c,c.data("ic-direction"));break;case"top":e.slideVertical(a,a.data("ic-direction")),c&&e.counterpart.imageChanger.slideVertical(c,c.data("ic-direction"));break;case"opacity":e.fade(a),c&&e.counterpart.imageChanger.fade(c)}},a.data(b))},"*"===b?this.$element.children().each(function(){c=a(this),c.data("ic-waiting",!1),d(c,"ic-delay")}):(c=this.getImageSet(b),c.length&&(c.data("ic-waiting",!1),d(c,"ic-wait")))}},fade:function(b){var c,d=this,e=b.data("current"),f=b.children(),g=null,h=null,i=null,j=e+1>f.length?1:e+1;f.each(function(){g=a(this),c=g.data("ic-number"),c===e?h=g:c===j&&(i=g)}),i&&h&&i.appendTo(i.parent()).fadeIn(parseInt(b.data("ic-transition")),function(){h.hide(),b.data("current",j),d.play(b.data("ic-set"))})},slideHorizontal:function(a,b){var c=this,d=a.children(),e=0,f=2*c.parent.width*b,g=function(){if(e++,e===d.length){var f,g=0,h=null;0>b?(h=d.last(),g=parseInt(h.css("left"))+h.data("ic-width"),d.first().appendTo(a).css("left",g+"px"),a.data("current",d.filter(":first-child").data("ic-number"))):b>0&&(h=d.first(),f=d.last(),g=parseInt(h.css("left"))-f.data("ic-width"),f.prependTo(a).css("left",g+"px"),a.data("current",d.filter(":last-child").data("ic-number"))),c.play(a.data("ic-set"))}};d.animate({left:"+="+f+"px"},{duration:parseInt(a.data("ic-transition")),complete:g})},slideVertical:function(a,b){var c=this,d=a.children(),e=0,f=a.children().first().data("ic-height")*b,g=function(){if(e++,e===d.length){var f,g=0,h=null;0>b?(h=d.last(),g=parseInt(h.css("top"))+h.data("ic-height"),d.first().appendTo(a).css("top",g+"px"),a.data("current",d.filter(":first-child").data("ic-number"))):b>0&&(h=d.first(),f=d.last(),g=parseInt(h.css("top"))-f.data("ic-height"),f.prependTo(a).css("top",g+"px"),a.data("current",d.filter(":last-child").data("ic-number"))),c.play(a.data("ic-set"))}};d.animate({top:"+="+f+"px"},{duration:parseInt(a.data("ic-transition")),complete:g})},decodeAlt:function(a){var b=a.split("-"),c={};if(b.length<3)throw"ImageChanger - incorrectly formatted alt tag "+a;return c.animation=b[2],c.set=b[1],c.number=b[2],4===b.length&&(c.part=b[3]),c},getImageSet:function(a){var b=this.$element.children('div[data-ic-set="'+a+'"]');return b.length?b:null},parentVisible:function(){var a=this.parent.application.pageManager.current+1;return a===this.parent.number||a===this.counterpart.number}});window.ImageChanger=b}($),function(a){var b=Base.extend({construct:function(a){this.application=a,this.zoom=new Zoom(this.application),this.share=new Share(this.application),this.print=new Print(this.application),this.contents=new Contents(this.application),config.hasGallery&&(this.gallery=new Gallery(this.application),this.gallery.init())},application:null,zoom:null,share:null,print:null,contents:null,gallery:null,current:null,init:function(){var b=this.application;a(".addFeatureToApp").each(function(){var c,d=a(this);d.data("feature",new Feature),c=d.data("feature"),c.application=b,c.$feature=a(this),c.width=c.$feature.width(),c.height=c.$feature.height(),c.duration="slow",c.init()})},closeOpenMenus:function(b){return b.currentTarget==this.current?(this.current=null,void 0):null===this.current?(this.current=b.currentTarget,void 0):(a(this.current).trigger("click"),this.current=b.currentTarget,void 0)}});window.FeatureManager=b}($),function(){var a=Base.extend({construct:function(){},application:null,open:!1,$feature:null,width:null,height:null,duration:null,init:function(){var a=this.application;this.$feature.on("dblclick doubletap touchmove",function(b){a.utils.stopEvent(b)}),this.$feature.on("touchstart touchend",function(a){a.stopPropagation()})},openFeature:function(){this.open=!0,this.$feature.stop().animate({top:this.application.navigation.height},this.duration)},closeFeature:function(){this.open=!1,this.$feature.stop().animate({top:-this.height},this.duration)}});window.Feature=a}($),function(a){var b=Feature.extend({$iframe:null,construct:function(a){this.application=a},print:function(){var b,c,d=confirm(config.phrases.PRINT_PDF_MESSAGE);d===!0&&(this.$iframe||(b=a('<iframe id="downloadPDF" />'),this.application.$body.append(b),this.$iframe=b),c=window.location.href,c.lastIndexOf("/")!==c.length-1&&(c=c.substring(0,c.lastIndexOf("/")),c+="/"),this.$iframe.get(0).src=config.libPath+"/php/pdf.php?pdfFile="+encodeURIComponent(c+config.pdfLocation))},setPrintPage:function(){var b=this.application,c=b.pageManager,d=b.popupManager,e=c.current,f=this.application.isPortrait||c.onSingleFrontCover()||c.onSingleBackCover();config.htmlVersion||f||e++,a(c.items).each(function(a){a===c.current||a===e?this.$element.removeClass("noprint").addClass("print"):this.$element.removeClass("print").addClass("noprint"),a===e&&c.current!==e&&this.$element.addClass("right")}),null!==d&&a(d.items).each(function(){"open"===this.state||"opening"===this.state||"loaded"===this.state?this.$element.removeClass("noprint").addClass("print"):this.$element.removeClass("print").addClass("noprint")})},setPrintButton:function(a){var b=this;a.children().on("click",function(a){a.preventDefault(),a.stopPropagation(),b.print()})},openFeature:function(){},closeFeature:function(){}});window.Print=b}($),function(a){var b=Feature.extend({construct:function(a){this.application=a,this.counter=1},counter:null,$content:null,$videoIcon:null,$close:null,init:function(){var b=this;a(".addGalleryToApp").each(function(){b.setThumbnailData(a(this))})},setThumbnailData:function(b){var c,d,e,f=this,g={"data-target":"flare","data-flare-scale":"fitmax","data-gallery-type":""};b.find("a").each(function(){c=a(this),d=c.attr("href").toLowerCase().indexOf("#flare-"),e=c.attr("href").toLowerCase().indexOf("youtube.com/watch?v"),delete g.href,delete g["data-flare-videoposter"],delete g["data-flare-videoformats"],c.hasClass("thumb")?(g["data-flare-thumb"]=c.attr("href"),g["data-flare-gallery"]="image-gallery"+f.counter,g["data-gallery-type"]="image",f.setThumbnails(c,g)):d>=0?(d=c.attr("href").substring(7),g.href="assets/videos/"+d+".mp4",g["data-flare-gallery"]="video-gallery"+f.counter,g["data-flare-thumb"]="assets/videos/"+d+".jpg",g["data-flare-videoposter"]="assets/videos/"+d+".jpg",g["data-flare-videoformats"]="ogv",g["data-gallery-type"]="video",f.setThumbnails(c,g)):e>=0&&(g["data-gallery-type"]="youtube",f.setThumbnails(c,g))}),this.counter++},setThumbnails:function(a,b){var c=this;a.attr(b),a.peFlareLightbox(),a.on("click",function(){null===c.$feature&&c.setGalleryProperties()})},setGalleryProperties:function(){var b=this;this.$feature=a(".peFlareLightbox"),this.$content=a(".peFlareLightboxContent"),this.$videoIcon=a(".peFlareLightboxVideoIcon"),this.$close=a("#peFlareLightboxControlClose"),this.$feature.children(".peFlareLightboxThumbs").addClass("noSwipe"),this.$content.on("touchstart touchmove touchend",function(a){b.touchHander(a)})},touchHander:function(b){var c=a.pixelentity.lightbox.thumbsActive(),d=this;if(c&&a.pixelentity.lightbox.thumbsActive(!1),a.pixelentity.lightbox.touchHandler(b),a.pixelentity.lightbox.thumbsActive(c),"touchmove"==b.type)d.$content.data("moved",!0),d.application.utils.stopEvent(b);else if(config.hasMobileVersion)switch(b.type){case"touchend":if(!d.$content.data("moved")){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0),d.$content.get(0).dispatchEvent(e)}d.$content.data("moved",!1);break;default:d.$content.data("moved",!1)}},isOpen:function(){var a=!1;return this.$feature&&(a=this.$feature.hasClass("peFlareLightboxActive")),a}});window.Gallery=b}($),function(a){var b=Feature.extend({construct:function(b){this.application=b,this.$feature=a("#contents"),this.width=this.$feature.width(),this.height=this.$feature.height(),this.duration=config.maxContentsDuration,arguments.callee.$.init.call(this)}});window.Contents=b}($),function(a){var b=Feature.extend({construct:function(b){this.application=b,this.$feature=a("#share"),this.$toolbox=this.$feature.find(".toolbox"),this.width=this.$feature.width(),this.height=this.$feature.height(),this.duration=config.maxShareDuration},$toolbox:null,init:function(){if(arguments.callee.$.init.call(this),this.application,"undefined"==typeof addthis)return this.application.navigation.$share.parent().remove(),void 0;var a="",b={facebook:"Faceook",twitter:"Twitter",google_plusone_share:"Google+",email:"Email",print:"Print",expanded:"More"};for(var c in b)a+='<a class="addthis_32x32_style addthis_button_'+c+'"></a>';this.$toolbox.html(a),addthis.toolbox(".toolbox"),this.application.featureManager.print.setPrintButton(this.$feature.find('a[title="Print"]'))}});window.Share=b}($),function(a){var b=Feature.extend({construct:function(a){this.application=a,this.zoom=1},zoomEvent:null,zoom:null,zoomContainer:function(b,c){if(!config.hasMobileVersion){var d=this.application,e=this.application.pageManager,f=this,g=e.getCurrent(),h=(this.zoom,{});if(g.loaded){if(this.zoomEvent=b,"undefined"==typeof c)this.zoom=this.zoom==config.maxZoom?1:this.zoom+1;else if("in"==c){if(this.zoom==config.maxZoom)return;this.zoom++}else if("out"==c){if(1==this.zoom)return;this.zoom--}if(1==this.zoom?(config.isMobile?d.addTouchListeners():d.changeControls(),g.$element.find("img").each(function(){g.resizeImage(a(this))}),d.$container.off("draginit dragmove mousedown touchstart selectstart")):(config.isMobile&&(this.zoomEvent=b.originalEvent.changedTouches[0],d.removeTouchListeners()),2==this.zoom&&(config.isMobile||d.$controls.hide(),a.browser.msie&&a.browser.version>7&&a.browser.version<9?d.$body.css("overflow","auto"):d.$container.on("draginit dragmove",function(a,b){f.dragZoomedContainer(a,b)})),g.$element.find("img").each(function(){g.resizeImage(a(this))}),null!==e.items[e.current+1]&&"undefined"!=typeof e.items[e.current+1]&&e.items[e.current+1].$element.find("img").each(function(){e.items[e.current+1].resizeImage(a(this))}),d.setDimensions(),h=this.positionZoomedContainer(d.getNewScale(),this.zoomEvent.pageX,this.zoomEvent.pageY)),d.$window.trigger("resize"),"out"!=c&&d.$container.css(h),a.browser.msie&&a.browser.version>7&&a.browser.version<9)if(1==this.zoom)d.$body.scrollTop(0),d.$body.css("overflow","hidden");else{g="arabic"!=config.language?0:d.pageManager.last;var i=config.singleFrontPage&&d.pageManager.current==g?-(2*d.$controls.data("width")/d.scale+d.pageManager.items[0].width):-(2*d.$controls.data("width")/d.scale);d.$container.css({top:d.navigation.height/d.scale,left:i})}if(null!==this.zoomEvent){var j=this.zoomEvent.pageX||this.zoomEvent.originalEvent.pageX;this.zoomEvent.x=(j-parseInt(d.$container.css("left")))/(d.dimensions.width*d.scale),this.zoomEvent.y=(this.zoomEvent.pageY-parseInt(d.$container.css("top")))/(d.dimensions.height*d.scale)}this.application.featureManager.share.open&&this.application.featureManager.share.closeFeature(),d.utils.deSelect()}}},positionZoomedContainer:function(b,c,d){var e=this.application,f=e.dimensions.width*e.scale,g=e.dimensions.height*e.scale,h=e.dimensions.width*b,i=e.dimensions.height*b,j=e.dimensions.viewportWidth/2,k=e.dimensions.viewportHeight/2,l=(c-parseInt(e.$container.css("left")))/f,m=(d-parseInt(e.$container.css("top")))/g,n=-(m*i)+k,o=-(l*h)+j,p=0,q=0,r=e.pageManager.getCurrent().width*b;return e.dimensions.viewportHeight>i&&(p=(e.dimensions.viewportHeight-i)/2),e.dimensions.viewportWidth>h&&(q=(e.dimensions.viewportWidth-h)/2),n>e.navigation.height+p?n=e.navigation.height+p:n<e.dimensions.viewportHeight-i+e.navigation.height-p&&(n=e.dimensions.viewportHeight-i+e.navigation.height-p),o>q?o=q:o<e.dimensions.viewportWidth-h-q&&(o=e.dimensions.viewportWidth-h-q),config.singleFrontPage&&r>=j&&!e.isPortrait&&(q=(e.dimensions.viewportWidth-h/2)/2,("arabic"!==config.language&&0===e.pageManager.current||"arabic"===config.language&&e.pageManager.current===e.pageManager.last)&&o>e.dimensions.viewportWidth-h-q?o=e.dimensions.viewportWidth-h-q:("arabic"!==config.language&&e.pageManager.current===e.pageManager.last||"arabic"===config.language&&0===e.pageManager.current)&&q>o&&(o=q)),a.browser.msie&&a.browser.version>7&&a.browser.version<9?(n/=b,o/=b,{margin:0,top:(n+k+e.navigation.height)/b,left:(o+j)/b}):{margin:0,top:n,left:o}},dragZoomedContainer:function(a,b){var c=this.application;if(c.$container.css("z-index",0),1==this.zoom||c.checkMultiTouch(a))return a.preventDefault(),!1;var d={width:c.dimensions.width*c.scale,height:c.dimensions.height*c.scale,margin:parseInt(c.$body.css("padding-left")),dimensions:c.dimensions,navigation:c.navigation,pageWidth:c.pageManager.items[0].width,pageHeight:c.pageManager.items[0].height,current:c.pageManager.current,last:c.pageManager.last,scale:c.scale,portrait:c.isPortrait};b.limit(d),this.zoomEvent.x=(c.dimensions.viewportWidth/2-parseInt(c.$container.css("left")))/(c.dimensions.width*c.scale),this.zoomEvent.y=(c.dimensions.viewportHeight/2-parseInt(c.$container.css("top")))/(c.dimensions.height*c.scale)},resetZoom:function(a){1!=this.zoom&&(this.zoom=2,this.zoomContainer(a,"out"))}});window.Zoom=b}($),function(a){var b=Base.extend({construct:function(){},application:null,width:null,height:null,$element:null,loaded:null,popups:null,parent:null,$links:null,imageChanger:null,setReferenceOnElement:function(){this.$element&&this.$element.data("ContentElement",this)},addPopup:function(a){this.popups&&this!==a&&(this.removePopup(a),this.popups.push(a))},removePopup:function(a){if(this.popups&&this!==a)for(var b=0;b<this.popups.length;b++)if(a===this.popups[b]){this.popups.splice(b,1);break}},setMailtoTarget:function(){var b;this.$links.each(function(){b=a(this),0===b.attr("href").indexOf("mailto:")&&b.attr("target","_blank")})},addTransparencyToEmptyElements:function(){var b,c,d,e=a("<img />").attr("src",config.libPath+"/images/transparent.png");this.$links.each(function(){b=a(this),c=b.children(),d=c.first(),1===c.length&&d.is("div")&&0===d.children().length&&(d.empty(),e.clone().width(d.width()).height(d.height()).appendTo(d))})},showTextLinks:function(){var b;this.$links.children("div").each(function(){b=a(this),b.find("p,span,ul").length>0&&b.css({background:"none",opacity:1})})},swapImageForGoogleMap:function(){var b,c,d,e,f,g,h,i,j;this.application.$body.hasClass("msie8")||this.$links.each(function(){b=a(this),g=b.attr("href"),h=g.indexOf("//maps.google"),d=b.children(),c=1===d.length?d.filter("img"):null,5!==h&&6!==h||!c||1!==c.length||(g=g.substring(h)+"&output=embed",c.one("load",function(){i=c.width(),j=c.height(),f=a("<iframe />"),e=c.attr("style")+"; position: absolute; width: "+i+"px !important; height: "+j+"px !important;",f.attr({src:g,style:e},g).attr("width",i).attr("height",j).addClass("iframe-fix").addClass("pageItem"),b.replaceWith(f),a(window).trigger("resize")}).each(function(){this.complete&&a(this).trigger("load")}))})},startImageChanger:function(){var a=null;null===this.imageChanger&&(a=this.$element.find('img[alt^="image_change"]'),this.imageChanger=a.length?new ImageChanger(this,a):!1),this.imageChanger!==!1&&this.imageChanger.setup()},wordBreakLinks:function(){this.$links.closest("p").css({"word-wrap":"break-word"})}});window.ContentElement=b}($),function(){var a=Base.extend({construct:function(){},application:null,$stack:null,items:null,current:null,total:null,getCurrent:function(){return null!==this.current?this.items[this.current]:null},getItem:function(a){return this.items[a]}});window.Manager=a}($),function(a){var b=Manager.extend({construct:function(a){this.application=a},width:null,translateX:null,translateY:null,startDrag:null,currentDrag:null,skip:null,last:null,init:function(){var b,c=this.application;this.$stack=a(".pages"),b=this.$stack.find(".page"),this.total=b.length,this.last=this.total-1,this.items=[];var d=this;b.each(function(){var b=new Page(c,a(this));d.items.push(b)}),a(d.items).each(function(){this.init()});for(var e=0;e<this.items.length;e++)this.getItem(e).setCounterpart();this.current=config.startPage>1?config.startPage-1:0,this.current>this.items.length-1&&(this.current=this.items.length-1),this.translateX=0,this.translateY=0,this.skip=1},animatePage:function(b,c,d){"undefined"==typeof c&&(c=null),"undefined"==typeof d&&(d=null);var e=this,f=a.inArray(b,this.items),g=b.$element,h=this.application.vendorPrefix.css+"transform",i=e.application.utils.getCoordsFromMatrix(g.css(h)),j={x:null!==c?0:f>this.current?this.width:-this.width,y:null!==c?i.y:0},k=this.application.dimensions?Math.round(this.application.dimensions.viewportHeight/this.application.scale)-b.height:0;if(!(0>f||f==this.current&&this.getCurrent().$element.hasClass("activePage"))||null!==c){this.application.touchDisabled=null===c;var l={top:"0",left:"0"};l[h]="translate("+j.x+"px, "+j.y+"px)",g.stop().css(l),null===c&&g.addClass("nextPage"),g.animate({x:0,y:null===c?0:c.distance+j.y},{duration:null===c?config.pageDuration:c.time,easing:null===c?config.pageEasing:"easeOutQuart",step:function(a,b){switch(null!==j[b.prop]&&(a=j[b.prop],b.start=j[b.prop],b.now=(b.start-b.end)*(1-b.pos),j[b.prop]=null),i=e.application.utils.getCoordsFromMatrix(g.css(h)),b.prop){case"x":g.css(h,"translate("+a+"px, "+i.y+"px)");break;case"y":if(null!==c){if(k>0)break;if(0>a&&k>a?a=k:a>0&&a>0&&(a=0),a===k||0===a){b.now=b.end=i.y=a===k?k:0,g.css(h,"translate("+i.x+"px, "+a+"px)"),g.stop(!0,!1);break}}g.css(h,"translate("+i.x+"px, "+a+"px)")}},complete:function(){null===c&&(e.setNewPage(f),e.pageTransitionComplete()),"function"==typeof d&&d()}})}},animateStack:function(b){if(config.hasMobileVersion)return this.animatePage(b),void 0;var c=this,d=a.inArray(b,this.items);if(!(0>d)){if(this.translateX=this.getX(d),0===d&&!this.application.isPortrait&&config.singleFrontPage&&(this.translateX+=this.application.$slider.data("width")),a.browser.msie&&a.browser.version<9)this.$stack.stop().animate({left:this.translateX,top:this.translateY},{duration:config.pageDuration,easing:config.pageEasing,complete:function(){c.application.$slider.css("width","+=1px").css("width","-=1px"),c.pageTransitionComplete()
}});else{var e=parseInt(this.$stack.css("x"));this.$stack.stop().animate({x:this.translateX},{duration:config.pageDuration,easing:config.pageEasing,step:function(a,b){null!==e&&(a=e,b.start=e,e=null),c.$stack.css("x",a)},complete:function(){c.application.$slider.css("width","+=1px").css("width","-=1px"),c.pageTransitionComplete()}})}this.setNewPage(d)}},moveStack:function(b){if(config.hasMobileVersion)return this.animatePage(b),void 0;var c=a.inArray(b,this.items);0>c||(this.translateX=this.getX(c),0===c&&!this.application.isPortrait&&config.singleFrontPage&&(this.translateX+=this.application.$slider.data("width")),a.browser.msie&&a.browser.version<9?this.$stack.css({left:this.translateX,top:this.translateY}):this.$stack.css({x:this.translateX}),this.setNewPage(c),this.pageTransitionComplete())},setNewPage:function(a){var b;a===this.current-1&&0===this.current%2&&!this.application.isPortrait||this.current===a||this.application.hidePopups(),this.application.touchDisabled=!1,this.getCurrent().$element.removeClass("activePage"),this.current=a,b=this.getCurrent(),b.$element.removeClass("nextPage").addClass("activePage"),this.application.navigation.changePageNumberValue(),null!==this.application.loader&&this.application.loader.reorderLoadArray(this.current),this.application.featureManager.share.open&&this.application.featureManager.share.closeFeature(),this.application.featureManager.print.setPrintPage(),this.application.scrollbarsAdded&&b.$element.find(".scroll").perfectScrollbar("update")},dragInit:function(a){this.translateX=parseInt(this.$stack.css("x")),this.startDrag={pageX:a.originalEvent.touches[0].pageX,pageY:a.originalEvent.touches[0].pageY}},dragStack:function(a){null!==this.startDrag&&(this.currentDrag=a.originalEvent.touches[0],config.hasMobileVersion||this.$stack.css({translate:[this.setX(),0,0]}))},dragEnd:function(){if(null!==this.startDrag&&null!==this.currentDrag){var a=this.getCurrent(),b=this.getX(this.current);if(this.translateX=this.setX(),"arabic"!=config.language)this.translateX>0?this.animateStack(this.items[0]):this.translateX<-(this.last*a.width)?this.animateStack(this.items[this.last]):Math.abs(b-this.translateX)>=a.width/2?b-this.translateX>0?this.animateStack(this.next()):this.animateStack(this.prev()):b-this.translateX<a.width/2&&this.animateStack(a);else{var c=0===this.current?Math.abs(b-this.translateX)-a.width:Math.abs(b-this.translateX),d=this.application.isPortrait?a.width/2:a.width;this.translateX>0?this.animateStack(this.items[this.last]):this.translateX<-(this.last*a.width)?this.animateStack(this.items[0]):c>=d?b-this.translateX>0?this.animateStack(this.prev()):this.animateStack(this.next()):b-this.translateX<a.width/2&&this.animateStack(a)}}},next:function(){var a=0===this.current&&config.singleFrontPage?1:this.skip,b=this.current===this.last?this.current:this.current+a;return b=b>this.last?this.last:b,config.singleFrontPage||this.application.isPortrait||!config.portraitMode||(b=b==this.last?this.current:b),this.items[b]},prev:function(){var a=0===this.current?this.current:this.current-this.skip;return a=0>a?0:a,this.items[a]},getX:function(a){return"arabic"==config.language&&(a=this.last-a,a=a==this.last?a+1:a-1,this.application.isPortrait&&(a==this.total?a--:a++)),-1*a*(this.width/this.total)},setX:function(){return(this.currentDrag.pageX-this.startDrag.pageX)/this.application.scale+this.translateX},scaleLoadingPages:function(){for(var a=1/this.application.scale,b=0;b<this.items.length;b++)if(!this.items[b].loaded){var c=this.items[b].$loading.find(".loadingContent");c.css({scale:a,transformOrigin:"0 0"})}},pageTransitionComplete:function(){var a=this.getCurrent();a.imageChanger&&a.imageChanger.stopped===!0&&(a.imageChanger.setup(),a.imageChanger.counterpart.imageChanger.setup())},onSingleFrontCover:function(){return config.singleFrontPage&&(0===this.current&&"arabic"!==config.language||this.current===this.last&&"arabic"===config.language)},onSingleBackCover:function(){return config.singleFrontPage&&(0===this.current&&"arabic"===config.language||this.current===this.last&&"arabic"!==config.language)}});window.PageManager=b}($),function(a){var b=ContentElement.extend({construct:function(a,b){this.application=a,this.$element=b,this.number=this.$element.index()+1,this.width=this.$element.width(),this.height=this.$element.height(),this.loaded=!1,this.popups=[],this.$links=this.$element.find("a"),this.setReferenceOnElement()},number:null,counterpart:null,$loading:null,init:function(){this.$loading=this.application.utils.createPreloader(),this.$element.append(this.$loading),config.hasMobileVersion!==!1||!config.maskCovers||1!==this.number&&this.number!==this.application.pageManager.total||this.maskPage()},setCounterpart:function(){var a=this.application.pageManager;1!==this.number&&this.number!==a.total&&(this.counterpart=0===this.number%2?a.getItem(this.number):a.getItem(this.number-2))},hasLoaded:function(){this.application.featureManager.gallery&&this.application.featureManager.gallery.setThumbnailData(this.$element),this.setMailtoTarget(),this.showTextLinks(),this.application.$body.hasClass("msie")&&this.addTransparencyToEmptyElements(),(this.application.$body.hasClass("msie")||this.application.$body.hasClass("mozilla"))&&this.wordBreakLinks(),this.swapImageForGoogleMap(),this.startImageChanger(),this.loaded=!0,this.$loading.remove(),delete this.$loading},resizeImage:function(a){var b,c="undefined"!=typeof a.attr("style")?a.attr("style"):"",d="";config.htmlVersion||(c=c.indexOf("width")>=0?c.replace(/width:\s?[0-9]+px(\s?!important)?;/,"width: "+this.width+"px !important;"):c+"; width: "+this.width+"px !important;",c=c.indexOf("height")>=0?c.replace(/height:\s?[0-9]+px(\s?!important)?;/,"height: "+this.height+"px !important;"):c+"; height: "+this.height+"px !important;",d="?h="+config.pageImageHeight*this.application.featureManager.zoom.zoom+"&q="+config.pageImageQuality),b=c,"undefined"!=typeof a.attr("data-original")?a.attr({style:b,src:a.attr("data-original").split("?")[0]+d}).removeAttr("data-original"):a.attr({style:b,src:a.attr("src").split("?")[0]+d})},maskPage:function(){var b="undefined"!=typeof this.$element.attr("style")?this.$element.attr("style"):"",c=b+"; background: none !important;",d=a("<div />").addClass("maskedBackground");switch(this.number){case 1:d.css("left",this.width/2),d.css("width",this.width/2);break;default:d.css("width",this.width/2)}this.$element.attr({style:c}).prepend(d)}});window.Page=b}($),function(a){var b=Manager.extend({identifier:"#popup-",idMap:null,openPopups:null,popupWaiting:!1,$loading:null,$overlay:null,construct:function(b){this.$stack=a(".popups"),this.total=this.$stack.find(".page").length,this.items=[],this.openPopups=[],this.idMap={};var c,d=this;this.$stack.find(".page").each(function(){c=new Popup(b,a(this)),d.idMap[c.id]=d.items.length,d.items.push(c)}),this.application=b},init:function(){this.setPopupButtons()},setPopupButtons:function(){var b,c,d,e=this.application.$container,f=this;e.find("a").each(function(){b=a(this),d=b.attr("href"),c=b.attr("href").toLowerCase().indexOf(f.identifier),c>=0&&(b.attr("data-popup",d.substring(c+f.identifier.length)),b.on("click",function(a){f.popupButtonClick(a,this)}))})},popupButtonClick:function(b,c){this.application.utils.stopEvent(b);var d=a(c),e=this.getPopupById(d.data("popup")),f=this,g=d.closest("li.page"),h=g.data("ContentElement");if(!(g.parents(".popups").length>0)||"opening"!==h.state&&"closing"!==h.state)return e.setParent(d),e.addCallback("loading",function(a){f.popupLoading(a)},!0),e.addCallback("loaded",function(a){f.popupLoaded(a)},!0),e.addCallback("opening",function(a){f.popupOpening(a)},!0),e.addCallback("open",function(a){f.popupOpened(a)},!0),e.addCallback("closing",function(a){f.popupClosing(a)},!0),e.addCallback("closed",function(a){f.popupClosed(a)},!0),!e.props.openAndCloseButton||"open"!==e.state&&"opening"!==e.state?(e.open(),void 0):(e.close(),void 0)},showLoading:function(a){var b=this;this.$loading?(this.$loading.css("z-index","").show(),this.application.utils.animatePreLoader(this.$loading.find("li").first(),this.$loading)):(this.$loading=this.application.utils.createPreloader(!0),this.application.$body.append(this.$loading)),"undefined"!=typeof a&&this.$loading.off("click").on("click",function(){a.cancel(),b.hideLoading(),b.popupsOpen()||b.application.unlock()}).css("cursor","pointer")},hideLoading:function(){this.$loading.off("click").css("z-index","0").hide(),this.application.utils.stopPreLoader(this.$loading.find("li"))},popupLoading:function(a){if(this.application.lock(),this.showLoading(a),this.popupsOpen()&&a.props.closeOpenPopups){var b,c,d=this;a.props.waitForClose&&a.parent.popups.length>1&&(a.pause(),this.popupWaiting=!0);for(var e=this.openPopups.length-1;e>=0;e--)b=this.getPopupById(this.openPopups[e]),a.props.closeParentAfterClosing===!1&&a.isDescendantOf(b)||(a.props.closeParentAfterClosing===!0&&a.parent===b&&(a.parent&&a.parent.removePopup(a),a.parent=b.parent,a.parent.addPopup(a)),c||(c=b),c.anims.end.params.duration<b.anims.end.params.duration&&(c=b),b.close());if(a.props.waitForClose&&c){var f=c.callbacks.closed,g=a;c.callbacks.closed=function(a){"function"==typeof f&&f(a),g.unpause(),c.callbacks.closed=f,d.popupWaiting=!1}}}},popupLoaded:function(){this.hideLoading(),this.application.featureManager.print.setPrintPage()},popupOpening:function(a){this.$loading.css("z-index","0").hide(),this.addToOpen(a),a.hasOverlay&&this.openOverlay(a)},popupOpened:function(){},openOverlay:function(b){if(!this.$overlay){var c=a("<div />").addClass("popup-overlay").insertBefore(this.$stack);this.$overlay=c}var d=this.application.pageManager.getCurrent().width;!this.application.isPortrait&&this.application.pageManager.onSingleFrontCover()||this.application.pageManager.onSingleBackCover()?(this.$overlay.css("width",d+"px"),this.application.pageManager.onSingleFrontCover()?this.$overlay.css("left",d+"px"):this.$overlay.css("left","0")):this.$overlay.css({width:2*d+"px",left:0}),this.$overlay.stop(!0).off("click").on("click",function(){b.close()}),this.$overlay.is(":visible")?this.$overlay.animate(b.overlayData,b.anims.end.params.duration):this.$overlay.css(b.overlayData).fadeIn(b.anims.end.params.duration)},closeOverlay:function(a){this.$overlay&&this.$overlay.is(":visible")&&(this.$overlay.stop(!0).off("click"),"undefined"==typeof a||0===a?this.$overlay.hide():this.$overlay.fadeOut(a))},popupClosing:function(a){!a.hasOverlay||a.parent.hasOverlay&&"open"===a.parent.state||this.closeOverlay(a.anims.out.params.duration)},popupClosed:function(a){a.parent.removePopup(a),this.removeFromOpen(a),this.popupsOpen()||this.popupWaiting||this.$loading.is(":visible")||this.application.unlock(),this.application.featureManager.print.setPrintPage()},getPopupById:function(a){return this.items[this.idMap[a]]},addToOpen:function(a){this.removeFromOpen(a),this.openPopups.push(a.id),this.current=a.$element.index()},removeFromOpen:function(a){for(var b=0;b<this.openPopups.length;b++)if(this.openPopups[b]===a.id){this.openPopups.splice(b,1);break}var c=this.openPopups.length;this.current=c?this.getPopupById(this.openPopups[c-1]).$element.index():null},hidePopups:function(){for(var a,b=this.openPopups.length;this.openPopups.length;)b--,a=this.getPopupById(this.openPopups[b]),a.hide();this.closeOverlay()},popupsOpen:function(){return 0!==this.openPopups.length}});window.PopupManager=b}($),function(a){var b=ContentElement.extend({id:"",group:"",state:"unloaded",paused:!1,cancelled:!1,props:{closeOpenPopups:!0,openAndCloseButton:!0,waitForClose:!1,closeParentAfterClosing:!1,keepBackground:!0,waitForChildClose:!0,closeSet:!0,nextPrevious:!1},defaultAnimParams:{duration:1e3,easing:"swing"},anims:null,callbacks:{},hasOverlay:!1,overlayData:null,hasMask:!1,maskData:null,gallerySetup:!1,mapSwapped:!1,$closeButton:null,$animator:null,construct:function(b,c){this.application=b,this.$element=c,this.width=this.$element.width(),this.height=this.$element.height(),this.id=this.$element.data("popup-id"),this.group=this.$element.data("popup-group"),this.props=a.extend({},this.props,this.$element.data("popup-props")),this.popups=[],this.anims={start:{params:null},end:{params:null},out:{params:null}},this.$links=this.$element.find("a"),this.setBackground(),this.setReferenceOnElement(),this.createDefaultAnims()},createDefaultAnims:function(){this.anims.start={top:"center",left:"center",opacity:0},this.anims.end={opacity:1}},open:function(){if("opening"!==this.state&&"open"!==this.state){this.loaded||(this.addCloseButton(),this.setMailtoTarget(),this.showTextLinks(),this.application.$body.hasClass("msie")&&this.addTransparencyToEmptyElements(),(this.application.$body.hasClass("msie")||this.application.$body.hasClass("mozilla"))&&this.wordBreakLinks());var b=this.$element,c=b.data("popup-start"),d=b.data("popup-end"),e=b.data("popup-overlay"),f=b.data("popup-mask"),g=b.data("popup-css");if(g&&this.$element.css(this.getAnimationProperties(g)),c&&(c.bottom&&delete this.anims.start.top,c.right&&delete this.anims.start.left),c=a.extend({},this.anims.start,c),this.anims.start=this.getAnimationProperties(c),d=a.extend({},this.anims.end,d),this.anims.end=this.getAnimationProperties(d),e&&(this.hasOverlay=!0,this.overlayData=e,this.overlayData.background))throw"Popup - Overlay - You should use the css 'backgroundColor'. 'background' breaks in IE8.";f&&this.addMask(f),this.setupNextPrevious(),this.anims.end.params=this.getAnimationParameters(this.anims.end),this.load()}},ready:function(){var a=this;if(this.setState("loaded"),!this.paused){if(this.cancelled)return this.cancelled=!1,void 0;this.application.featureManager.gallery&&!this.gallerySetup&&(this.application.featureManager.gallery.setThumbnailData(this.$element),this.gallerySetup=!0),this.setState("opening");var b=this.hasMask?this.$animator:this.$element;this.$element.show(),this.application.scrollbarsAdded&&this.addCallback("open",function(){a.$element.find(".scroll").perfectScrollbar("update")}),this.mapSwapped||(this.swapImageForGoogleMap(),this.mapSwapped=!0),b.stop(!0).css(this.anims.start).animate(this.anims.end,this.anims.end.params)}},close:function(b){if("undefined"==typeof b&&(b=!1),!(this.popups.length&&(this.closePopups(b),this.props.waitForChildClose)||"closed"===this.state)){var c,d=this.$element.data("popup-out")||{};d=a.extend({},this.anims.end.params,this.anims.start,d),this.anims.out=this.getAnimationProperties(d),this.anims.out.params=this.getAnimationParameters(this.anims.out),this.addCallback("closed",function(a){a.$element.hide()},!1,!0),this.setState("closing"),c=this.hasMask?this.$animator:this.$element,b?(c.stop(!0).css(this.anims.out),this.anims.out.params.complete()):c.stop(!0).animate(this.anims.out,this.anims.out.params)}},load:function(){if(this.setState("loading"),this.loaded)return this.ready(),void 0;var b,c=0,d=0,e=this,f=function(){d++,d===c&&(e.loaded=!0,e.ready())},g=this.$element.find("img");g.length?g.each(function(){c++,b=a(this),b.one("load",function(){f()}).one("error",function(){f()}).attr({src:b.data("original"),"data-original":null}),this.complete&&b.trigger("load")}):(d--,f())},getAnimationProperties:function(b){var c,d={},e=1,f=null;for(var g in b)if(b.hasOwnProperty(g)){switch(g){case"right":b.x="auto";case"x":b.left=b.x;case"left":switch(c="right"===g?"right":"left",b[g]){case"center":case"centre":delete b.x,delete b.left,delete b.right,a.extend(d,this.getCenterXPosition(c));break;case"-parentWidth":e=-1;case"parentWidth":f=(this.parent.width*e).toString()+"px",d[c]=f;break;case"beforeParent":e=-1;case"afterParent":f=(parseInt(this.parent.$element.css("left"))*e+this.parent.width*e).toString()+"px",d[c]=f;break;case"-width":e=-1;case"width":f=(this.width*e).toString()+"px",d[c]=f;break;default:d[c]=b[c]}break;case"bottom":b.y="auto";case"y":b.top=b.y;case"top":switch(c="bottom"===g?"bottom":"top",b[g]){case"center":case"centre":delete b.y,delete b.top,delete b.bottom,a.extend(d,this.getCenterYPosition(c));break;case"-parentHeight":e=-1;case"parentHeight":f=(this.parent.height*e).toString()+"px",d[c]=f;break;case"beforeParent":e=-1;case"afterParent":f=(parseInt(this.$element.css("top"))*e+this.parent.height*e).toString()+"px",d[c]=f;break;case"-height":e=-1;case"height":f=(this.height*e).toString()+"px",d[c]=f;break;default:d[c]=b[c]}break;default:d[g]=b[g]}f=null,e=1}return d},getCenterXPosition:function(a){var b={},c=1;return this.application.isPortrait||0!==this.application.pageManager.current&&this.application.pageManager.current!==this.application.pageManager.last||(c=2),b[a]=(this.application.$slider.width()/c-this.width)/2+"px",b},getCenterYPosition:function(a){var b={};return b[a]=(this.application.$slider.height()-this.height)/2+"px",b},getAnimationParameters:function(a){var b,c,d=this,e={};if("undefined"!=typeof a){for(c in d.defaultAnimParams)d.defaultAnimParams.hasOwnProperty(c)&&(a.hasOwnProperty(c)?(e[c]=a[c],delete a[c]):e[c]=d.defaultAnimParams[c]);e.complete&&window[e.complete]&&(b=window[e.complete])}return e.duration=parseInt(e.duration),e.complete=function(){"opening"==d.state?d.setState("open"):"closing"==d.state&&d.setState("closed"),"function"==typeof b&&b(d)},e},setState:function(a){this.state!==a&&(this.state=a,this.callbacks[a]&&"function"==typeof this.callbacks[a]&&this.callbacks[a](this))},addCloseButton:function(){if(!this.$closeButton){var b=a("<div />").addClass("popup-close-button"),c=this,d=this.$element.data("popup-close"),e=!1;"undefined"!=typeof d&&("undefined"!=typeof d.removeText&&(e=d.removeText,delete d.removeText),b.css(d)),e||b.html("&times;"),this.$element.append(b),b.on("click",function(){c.close()}),this.$closeButton=b}},addMask:function(b){if(!this.$mask){var c,d,e;this.hasMask=!0,this.maskData=b,c=a("<div />").addClass("popup-animator"),d=a("<div />").addClass("popup-mask").css(this.maskData),this.$element.wrapInner(c).wrapInner(d),this.$animator=this.$element.find(".popup-animator"),this.$mask=this.$element.find(".popup-mask"),this.props.keepBackground&&(e=this.$element.css("background-color"),this.$animator.css("background-color",e)),this.$element.attr("style",function(a,b){return b+"; background: none !important;"})}},pause:function(){this.paused=!0},unpause:function(){this.paused=!1,this.ready()},setParent:function(a){var b=a.closest(".page").data("ContentElement");this.parent=this.group&&b.group===this.group&&null!==b.parent?b.parent:b,this.parent.addPopup(this)},closePopups:function(a){if(this.popups.length){for(var b,c=this,d=null,e=0;e<this.popups.length;e++)b=this.popups[e],(null===d||d.getAnimationDuration("out")<b.getAnimationDuration("out"))&&(d=b),b.close(a);this.props.waitForChildClose&&d.addCallback("closed",function(){c.close(a)})}},cancel:function(){this.cancelled=!0,this.setState("cancelled")},hide:function(){this.close(!0)},isDescendantOf:function(a){for(var b=this.parent,c=!1;null!==b;){if(b===a){c=!0;break}b=b.parent}return c},addCallback:function(a,b,c,d){if("function"==typeof b&&""!==a){"undefined"==typeof d&&(d=!1),"undefined"==typeof c&&(c=!1);var e,f=this.callbacks[a];e=c?function(a){b(a)}:d?function(a){b(a),"function"==typeof f&&f(a)}:function(a){"function"==typeof f&&f(a),b(a)},this.callbacks[a]=e}},setBackground:function(){("undefined"==typeof config.popupBackgrounds||config.popupBackgrounds===!0)&&this.$element.addClass("popupBGWhite")},getAnimationDuration:function(a){var b=0,c=0;for(this.anims[a].params&&this.anims[a].params.duration&&(b+=this.anims[a].params.duration),c;c<this.popups.length;c++)b+=this.popups[c].getAnimationDuration(a);return b},setupNextPrevious:function(){var a=this,b=this.application.pageManager.getCurrent(),c=this.application.isPortrait,d=c?b.width:2*b.width,e=d!==a.$element.data("viewWidth"),f=a.width>d,g=a.width/d,h={current:1,sections:g,viewWidth:d},i=null,j=a.$element.data("popup-close");e&&a.props.nextPrevious&&(f?(a.addNavigationButtons(h),a.addCallback("closed",function(){a.$element.data("current",1)})):a.removeNavigationButtons()),f?(i=d*(g-1),a.$closeButton.attr("style",null),j&&a.$closeButton.css(j),(!this.anims.end.left||this.anims.end.right||j&&j.right&&""!==j.right)&&!a.props.nextPrevious||a.$closeButton.css("right","+="+i)):j?(j.right||(j.right=""),a.$closeButton.css(j)):a.$closeButton.attr("style",null)},addNavigationButtons:function(b){var c,d,e,f,g,h,i,j,k=this,l=this.application.pageManager.getCurrent(),m=this.application.isPortrait,n=m?l.width:2*l.width,o=k.$element.data("popup-np-style")||{};for(c=function(a){k.$element.data("current",k.$element.data("current")+a)},d=function(a){var b=0>a?"+=":"-=",d=k.$element.data("sections"),e=k.$element.data("current"),f=k.application.isPortrait,g=f?l.width:2*l.width;e+a>d||1>e+a||k.width<=g||(k.$element.animate({left:b+g+"px"},{duration:800,complete:function(){c(a)}}),k.$closeButton.animate({right:b+g+"px"},{duration:800}))},e=a("<div />").css(o).addClass("popup-next").text(config.phrases.NEXT).on("click",function(){d(1)}),f=a("<div />").css(o).addClass("popup-prev").text(config.phrases.PREVIOUS).on("click",function(){d(-1)}),g=a("<div />").css(o).addClass("popup-next-prev-wrapper"),i=0,h=0;h<b.sections;h++)j=g.clone(),0===h?j.append(e.clone(!0)):h===b.sections-1?j.append(f.clone(!0)):j.append(e.clone(!0),f.clone(!0)),j.css({left:i+"px",width:n+"px"}),this.$element.append(j),i+=n;k.$element.data(b)},removeNavigationButtons:function(){var a=this,b=a.$element.find(".popup-next-prev-wrapper");b.length&&(b.remove(),a.$element.data({current:null,sections:null,viewWidth:null})),a.$element.css(this.anims.end)},repositionPopup:function(){var b,c,d,e=this.application.pageManager,f=this.application.popupManager;"open"===this.state&&(b=a.extend({},this.anims.start,this.$element.data("popup-start")),this.anims.start=this.getAnimationProperties(b),c=a.extend({},this.anims.end,this.$element.data("popup-end")),this.anims.end=this.getAnimationProperties(c),this.$element.css(this.anims.end),this.setupNextPrevious(),this.hasOverlay&&e.onSingleFrontCover()&&(d=this.application.isPortrait?"-=":"+=",f.$overlay.css({left:d+e.getCurrent().width+"px"})))}});window.Popup=b}($),function(a){var b=Base.extend({construct:function(){this.$window=a(window),this.$document=a(document),this.$body=a("body"),this.$container=a("#container"),this.$slider=this.$container.find(".slider"),this.$sliderWindow=this.$container.find(".sliderWindow"),this.$controls=a(".controls"),a("html").addClass(config.htmlVersion?"htmlversion":"pdfversion"),this.$controls.data({width:this.$controls.width(),height:this.$controls.height()}),this.navigation=new Navigation(this),this.dimensions={width:0,height:0,viewportWidth:0,viewportHeight:this.$window.height()-this.navigation.height},this.utils=new Utils(this),this.pageManager=new PageManager(this),this.pageManager.init(),this.featureManager=new FeatureManager(this),this.vendorPrefix=this.utils.getVendorPrefix(),this.$container.find("ul.popups").length>0&&(this.popupManager=new PopupManager(this)),this.loader=new Loader(this),this.featureManager.init()},$window:null,$document:null,$container:null,$slider:null,$sliderWindow:null,$controls:null,navigation:null,pageManager:null,popupManager:null,loader:null,featureManager:null,utils:null,dimensions:null,isPortrait:null,scale:null,dragTime:null,dragDistance:null,initialised:null,dblclickObj:null,touchDisabled:!1,touchListeners:{start:null,move:null,end:null},vendorPrefix:null,scrollbarsAdded:!1,init:function(){var b=this;this.pageManager.width=config.hasMobileVersion?this.pageManager.items[0].width:this.pageManager.items[0].width*this.pageManager.total,this.pageManager.$stack.data({width:this.pageManager.width,height:config.hasMobileVersion?"100%":this.pageManager.items[0].height}),this.$slider.data({width:this.pageManager.items[0].width,height:config.hasMobileVersion?"100%":this.pageManager.items[0].height}),this.pageManager.$stack.css({width:this.pageManager.$stack.data("width"),height:this.pageManager.$stack.data("height")}),this.$slider.css({width:this.$slider.data("width"),height:this.$slider.data("height")}),this.$window.on("resize",function(a){b.resizeContainer(a)}),this.$window.trigger("resize"),this.goToPage(this.pageManager.current+1),config.isMobile?(this.addTouchListeners(),this.hideControls(),config.hasMobileVersion||this.$body.on("dragmove",function(a){a.preventDefault()})):this.pageManager.total>1?this.showControls():this.hideControls(),a("img").on("dragstart",function(a){a.preventDefault()});var c=a.browser.msie&&a.browser.version<9?!0:!1,d=config.isMobile?"doubletap":"click dblclick",e=function(a){"click"==a.type?null===b.dblclickObj?b.dblclickObj=a.target:null!==b.dblclickObj&&a.target!=b.dblclickObj&&(b.dblclickObj=!1):"doubletap"==a.type||!c&&"dblclick"==a.type&&b.dblclickObj!==!1||c&&a.target===b.dblclickObj?("a"!==a.target.tagName.toLowerCase()&&b.featureManager.zoom.zoomContainer(a),b.dblclickObj=null):b.dblclickObj=null};this.addKeyNavigation(),config.hasMobileVersion?this.$document.on("touchmove touchend","a",function(c){if(!(b.navigation.$navigation.has(this).length>0)){var d,e=a(this);switch(c.type){case"touchmove":e.data("moved",!0);break;case"touchend":e.data("moved")||(d=document.createEvent("MouseEvents"),d.initMouseEvent("click",!0,!0),e.get(0).dispatchEvent(d)),e.data("moved",!1)}}}):a("a").on("touchstart touchend",function(a){1==b.featureManager.zoom.zoom&&a.stopPropagation()}),this.$body.on(d,function(){b.utils.deSelect()}),this.pageManager.$stack.on(d,e),this.popupManager&&(this.popupManager.$stack.on(d,e),this.popupManager.init()),this.navigation.init(),this.featureManager.share.init(),b.utils.replaceScrollbars(),this.$window.trigger("brochureInitialised"),this.initialised=!0},addTouchListeners:function(){if(!(1!==this.featureManager.zoom.zoom||this.popupManager&&this.popupManager.popupsOpen())){var a=this;if(config.hasMobileVersion){var b,c,d,e,f=!1,g=.05;this.$document.swipe({swipeLeft:function(){a.touchDisabled||(f&&e&&e(),a.pageManager.animatePage(a.pageManager.next()))},swipeRight:function(){a.touchDisabled||(f&&e&&e(),a.pageManager.animatePage(a.pageManager.prev()))},swipeStatus:function(h,i,j,k){if(!a.touchDisabled){h.preventDefault(),f&&e();var l=a.pageManager.getCurrent(),m=a.vendorPrefix.css+"transform";if("start"===i&&(b=a.utils.getCoordsFromMatrix(l.$element.css(m)).y,d=h.timeStamp),"up"===j||"down"===j){var n="up"===j?-1:1;if("move"===i&&(c=b+k*n,c+l.height<Math.round(a.dimensions.viewportHeight/a.scale)&&(c=Math.round(a.dimensions.viewportHeight/a.scale)-l.height),c>0&&(c=0),l.$element.css("y",c)),"end"===i&&0!==c){var o=h.timeStamp-d,p=k*n/o;if(Math.abs(p)>g){var q=600,r=p*q/2,s={time:q,distance:r};b=c+r,f=!0,c=0,l.$element.on("touchstart",e=function(){l.$element.stop(!0).off("touchstart",e),f=!1}),a.pageManager.animatePage(a.pageManager.getCurrent(),s,function(){e()})}}}}},allowPageScroll:"vertical",threshold:0,excludedElements:"button, input, select, textarea, .noSwipe"})}else this.$document.on("touchstart",a.touchListeners.start=function(b){a.dragPagesStart(b)}),this.$document.on("touchmove",a.touchListeners.move=function(b){a.dragPagesMove(b)}),this.$document.on("touchend",a.touchListeners.end=function(b){a.dragPagesEnd(b)})}},removeTouchListeners:function(){var a=this;this.$document.off("touchstart",a.touchListeners.start),this.$document.off("touchmove",a.touchListeners.move),this.$document.off("touchend",a.touchListeners.end)},showControls:function(){if(!(config.isMobile||1!==this.featureManager.zoom.zoom||this.popupManager&&this.popupManager.popupsOpen())){var a,b=this;this.$controls.show(),config.singleFrontPage||this.isPortrait||!config.portraitMode?a=this.pageManager.last:config.singleFrontPage||this.isPortrait||(a=this.pageManager.last-1),this.pageManager.current===a?this.hideControl(".next"):0===this.pageManager.current&&this.hideControl(".previous"),this.$controls.off("click").on("click",function(a){b.goToPage(a)})}},changeControls:function(){this.showControls()},hideControls:function(){this.$controls.hide(),this.$controls.off("click")},showControl:function(b){"arabic"==config.language&&(b=".previous"==b?".next":".previous"),a(b).show()},hideControl:function(b){"arabic"==config.language&&(b=".previous"==b?".next":".previous"),a(b).hide()},setDimensions:function(){this.navigation.setWidth(),this.navigation.setHeight(),this.portraitCheck(),this.dimensions.width=this.$slider.width(),this.dimensions.height=this.$slider.height(),this.dimensions.viewportWidth=!config.isMobile&&!config.controlsInside&&(this.$controls.is(":visible")||this.popupManager&&this.popupManager.popupsOpen()&&1===this.featureManager.zoom.zoom)?this.$window.width()-(2*this.$controls.data("width")+6*config.controlsGap):this.$window.width(),this.dimensions.viewportHeight=a.browser.msie&&a.browser.version>7&&a.browser.version<9?this.$window.height()-this.navigation.height:window.innerHeight-this.navigation.height},getNewScale:function(){var a,b=0,c=this.pageManager.items[0].width;return this.dimensions.viewportWidth>this.dimensions.viewportHeight&&(b=this.dimensions.viewportHeight/this.dimensions.height),(this.dimensions.viewportWidth<this.dimensions.viewportHeight||this.dimensions.width*b>this.dimensions.viewportWidth)&&(b=this.dimensions.viewportWidth/this.dimensions.width),this.dimensions.height*b>this.dimensions.viewportHeight&&(b=this.dimensions.viewportHeight/this.dimensions.height),b*=this.featureManager.zoom.zoom,a=Math.round(b*c),0!==a%2&&(a-=1),b=a/c},positionContainer:function(){var b,c,d=this.featureManager.zoom;if(this.scale=this.getNewScale(),a.browser.msie&&a.browser.version<9?(b=Math.floor((this.dimensions.viewportHeight-this.dimensions.height*this.scale)/2+this.navigation.height),c=Math.floor((this.dimensions.viewportWidth-this.dimensions.width*this.scale)/2+parseInt(config.isMobile||!(this.$controls.is(":visible")||this.popupManager&&this.popupManager.popupsOpen()&&1===d.zoom)||config.controlsInside?0:parseInt(this.$controls.data("width"))+3*config.controlsGap)),a.browser.version>7&&(b/=this.scale,c/=this.scale),this.$container.css({width:this.dimensions.width,height:this.dimensions.height,zoom:this.scale,top:b,left:c})):(b=Math.floor(-1*(this.dimensions.height*this.scale/2)+this.dimensions.viewportHeight/2+this.navigation.height),c=Math.floor(-1*(this.dimensions.width*this.scale/2)+this.dimensions.viewportWidth/2+parseInt(config.isMobile||!(this.$controls.is(":visible")||this.popupManager&&this.popupManager.popupsOpen()&&1===d.zoom)||config.controlsInside?0:parseInt(this.$controls.data("width"))+3*config.controlsGap)),this.$container.css({scale:this.scale,transformOrigin:"0 0",top:b,left:c})),d.zoom>1&&null!==d.zoomEvent&&"undefined"!=typeof d.zoomEvent.x){var e=d.zoomEvent.x*this.dimensions.width*this.scale+parseInt(this.$container.css("left")),f=d.zoomEvent.y*this.dimensions.height*this.scale+parseInt(this.$container.css("top")),g=d.positionZoomedContainer(this.scale,e,f);this.$container.css({top:g.top,left:g.left})}if(this.pageManager.scaleLoadingPages(),!config.isMobile){var h,i,j=this.$sliderWindow.offset();config.controlsInside?(h=j.left+config.controlsGap,i=j.left+this.$sliderWindow.width()*this.scale-this.$controls.data("width")-config.controlsGap):(h=j.left-this.$controls.data("width")-2*config.controlsGap,i=j.left+this.$sliderWindow.width()*this.scale+2*config.controlsGap),this.$controls.first().css({left:h}),this.$controls.last().css({left:i})}window.scrollTo(0,0)},positionMobileContainer:function(){this.scale=this.dimensions.viewportWidth/this.dimensions.width,this.$container.css({scale:this.scale,transformOrigin:"0 0"}),this.pageManager.scaleLoadingPages();var a=this.pageManager.getCurrent(),b=parseInt(a.$element.css("y")),c=Math.round(this.dimensions.viewportHeight/this.scale);b+a.height<c&&(b=c-a.height),b>0&&(b=0),a.$element.css("y",b)},resizeContainer:function(){this.setDimensions(),config.hasMobileVersion?this.positionMobileContainer():this.positionContainer(),this.utils.unscaleIframes()},checkMultiTouch:function(a){return null===a.originalEvent.touches||"undefined"==typeof a.originalEvent.touches?!1:a.originalEvent.touches.length>1
},dragPagesStart:function(a){this.pageManager.$stack.stop(),this.checkMultiTouch(a)||(this.dragTime=(new Date).getTime(),this.pageManager.dragInit(a))},dragPagesMove:function(b){return a(b.target).parents("div.pageItem.scroll").length?void 0:(b.preventDefault(),this.checkMultiTouch(b)?(this.pageManager.animateStack(this.pageManager.getCurrent()),void 0):(this.pageManager.dragStack(b),void 0))},dragPagesEnd:function(a){this.checkMultiTouch(a)||null===this.pageManager.startDrag||(null===this.pageManager.currentDrag&&(this.pageManager.currentDrag={pageX:this.pageManager.startDrag.pageX,pageY:this.pageManager.startDrag.pageY}),this.dragTime=(new Date).getTime()-this.dragTime,this.dragDistance=Math.abs(this.pageManager.startDrag.pageX-this.pageManager.currentDrag.pageX),this.dragTime<config.dragTimeLimit&&this.dragDistance>config.dragMinDistance&&this.dragDistance<config.dragMaxDistance?this.swipePages():this.pageManager.dragEnd(a),this.dragTime=null,this.pageManager.startDrag=null,this.pageManager.currentDrag=null)},swipePages:function(){if(null!==this.pageManager.startDrag&&null!==this.pageManager.currentDrag){var a=this.pageManager.startDrag.pageX>this.pageManager.currentDrag.pageX?"next":"previous";"arabic"==config.language&&(a="previous"==a?"next":"previous"),"next"==a?this.pageManager.animateStack(this.pageManager.next()):this.pageManager.animateStack(this.pageManager.prev())}},addKeyNavigation:function(){if(!config.isMobile){var a=this;this.$document.on("keyup",function(b){a.keyNavigation(b)})}},removeKeyNavigation:function(){config.isMobile||this.$document.off("keyup")},keyNavigation:function(a){if(!this.featureManager.gallery||!this.featureManager.gallery.isOpen())switch("arabic"==config.language&&(a.keyCode=37==a.keyCode?39:39==a.keyCode?37:a.keyCode),a.keyCode){case 37:this.goBack();break;case 39:this.goForward();break;case 38:a=this.navigation.changeMouseCoordinates(a),this.featureManager.zoom.zoomContainer(a,"in");break;case 40:a=this.navigation.changeMouseCoordinates(a),this.featureManager.zoom.zoomContainer(a,"out");break;case 32:this.goToPage(config.contentsPage)}},goToPage:function(b){if("number"===a.type(b))return config.portraitMode&&(0!==b%2&&b>1&&!this.isPortrait&&config.singleFrontPage?b--:0===b%2&&b>1&&!this.isPortrait&&!config.singleFrontPage&&b--),this.featureManager.contents.open&&this.navigation.$contents.trigger("click"),this.featureManager.zoom.resetZoom(null),this.pageManager.moveStack(this.pageManager.items[b-1]),this.hidePopups(),this.changeControls(),void 0;var c=a(b.currentTarget),d=c.hasClass("next")?"next":"previous";"arabic"==config.language&&(d="previous"==d?"next":"previous"),"next"==d?this.goForward():this.goBack()},goForward:function(){this.featureManager.zoom.resetZoom(null),this.pageManager.animateStack(this.pageManager.next()),this.changeControls()},goBack:function(){this.featureManager.zoom.resetZoom(null),this.pageManager.animateStack(this.pageManager.prev()),this.changeControls()},portraitCheck:function(){var a,b,c;return!config.htmlVersion||config.singleFrontPage||config.portraitMode?(b=this.utils.isPortrait(),a=this.isPortrait!==b,a&&(this.isPortrait=b,this.isPortrait?(this.pageManager.skip=1,this.$slider.css("width",this.$slider.data("width")),"arabic"!=config.language?0===this.pageManager.current?this.pageManager.$stack.css("x",0):this.pageManager.moveStack(this.pageManager.getCurrent()):this.pageManager.moveStack(this.pageManager.getCurrent())):config.singlePageSpreads||(this.pageManager.skip=2,this.$slider.css("width",2*this.$slider.data("width")),"arabic"!=config.language?config.singleFrontPage?0===this.pageManager.current?this.pageManager.$stack.css("x",this.$slider.data("width")):0===this.pageManager.current%2?this.pageManager.moveStack(this.pageManager.items[this.pageManager.current-1]):0!==this.pageManager.current%2&&this.pageManager.moveStack(this.pageManager.getCurrent()):0!==this.pageManager.current%2&&this.pageManager.moveStack(this.pageManager.items[this.pageManager.current-1]):config.singleFrontPage?0===this.pageManager.current%2?this.pageManager.moveStack(this.pageManager.items[this.pageManager.current-1]):this.pageManager.moveStack(this.pageManager.getCurrent()):0!==this.pageManager.current%2&&this.pageManager.moveStack(this.pageManager.items[this.pageManager.current-1])),this.changeControls(),this.navigation.changePageNumberValue(),this.popupManager&&(c=this.popupManager.getCurrent(),c&&c.repositionPopup())),void 0):!1},lock:function(){this.hideControls(),this.removeKeyNavigation(),this.removeTouchListeners()},unlock:function(){this.showControls(),this.addKeyNavigation(),config.isMobile&&this.addTouchListeners()},hidePopups:function(){this.popupManager&&this.popupManager.popupsOpen()&&this.popupManager.hidePopups()}});window.Application=b}($);
//# sourceMappingURL=app.map.js